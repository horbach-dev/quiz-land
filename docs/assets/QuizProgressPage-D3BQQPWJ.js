import{l as pe,m as d,o as q,M as _,j as p,x as Ce,y as Ie,z as Le,I as Se,P as $e}from"./index-CI5jmBKB.js";const Ae=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],De=pe("chevrons-left",Ae);const Re=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Pe=pe("flag",Re),Ye="_progressWrap_38du3_1",qe="_progressIcon_38du3_9",ze="_progress_38du3_1",Qe="_progressTrack_38du3_24",Te="_hide_38du3_34",Y={progressWrap:Ye,progressIcon:qe,progress:ze,progressTrack:Qe,hide:Te},He=({isShow:l=!0,step:a,length:o})=>{const c=`${(a+1)/o*100}%`;return d.jsxs("div",{className:q(Y.progressWrap,!l&&Y.hide),children:[d.jsx("div",{className:Y.progress,children:d.jsx("div",{style:{width:c},className:Y.progressTrack})}),d.jsx(Pe,{className:Y.progressIcon})]})};function ge(l){let a=_.useRef(l);return _.useEffect(()=>{a.current=l}),_.useMemo(()=>(...o)=>{var c;return(c=a.current)==null?void 0:c.call(a,...o)},[])}function We({defaultProp:l,onChange:a}){let o=_.useState(l),[c]=o,u=_.useRef(c),x=ge(a);return _.useEffect(()=>{u.current!==c&&(x(c),u.current=c)},[c,u,x]),o}function Fe({prop:l,defaultProp:a,onChange:o=()=>{}}){let[c,u]=We({defaultProp:a,onChange:o}),x=l!==void 0,N=x?l:c,k=ge(o),C=_.useCallback(g=>{if(x){let M=typeof g=="function"?g(l):g;M!==l&&k(M)}else u(g)},[x,l,u,k]);return[N,C]}var ue=.3,Ve=30,Oe=l=>Math.pow(l-1,3)+1,G=(l,a,o)=>Math.max(a,Math.min(l,o)),Xe=({className:l,children:a})=>_.createElement("div",{className:l,"data-rwp-wrapper":!0},a);function Ze({defaultValue:l,value:a,onValueChange:o,options:c,infinite:u=!1,visibleCount:x=20,dragSensitivity:N=3,scrollSensitivity:k=5,optionItemHeight:C=30,classNames:g}){var M;let[$=(M=c[0])==null?void 0:M.value,W]=Fe({defaultProp:l,prop:a,onChange:o}),i=p.useMemo(()=>{if(!u)return c;let e=[],t=Math.ceil(x/2);if(c.length===0)return e;for(;e.length<t;)e.push(...c);return e},[x,c,u]),m=C,z=m*.5,v=360/x,I=m/Math.tan(v*Math.PI/180),A=Math.round(I*2+m*.25),j=x>>2,U=N*10,me=10,w=p.useRef(null),Q=p.useRef(null),F=p.useRef(null),b=p.useRef(0),ee=p.useRef(0),L=p.useRef(!1),te=p.useRef(0),V=p.useRef({startY:0,yList:[],touchScroll:0,isClick:!0}),O=p.useRef(null),ve=p.useMemo(()=>{let e=(n,r,s)=>_.createElement("li",{key:r,className:g?.optionItem,"data-slot":"option-item","data-rwp-option":!0,"data-index":r,style:{top:-z,height:m,lineHeight:`${m}px`,transform:`rotateX(${s}deg) translateZ(${I}px)`,visibility:"hidden"}},n.label),t=i.map((n,r)=>e(n,r,-v*r));if(u)for(let n=0;n<j;++n){let r=-n-1,s=n+i.length;t.unshift(e(i[i.length-n-1],r,v*(n+1))),t.push(e(i[n],s,-v*s))}return t},[m,z,u,v,i,j,I,g?.optionItem]),_e=p.useMemo(()=>{let e=(n,r)=>_.createElement("li",{key:r,className:g?.highlightItem,"data-slot":"highlight-item","data-rwp-highlight-item":!0,style:{height:m}},n.label),t=i.map((n,r)=>e(n,r));if(u){let n=i[0],r=i[i.length-1];t.unshift(e(r,"infinite-start")),t.push(e(n,"infinite-end"))}return t},[g?.highlightItem,m,u,i]),xe=p.useMemo(()=>{let e=0,t=Math.PI/180,n=[];for(let r=j-1;r>=-j+1;--r){let s=r*v,f=m*Math.cos(s*t),h=e;e+=f,n.push([h,e])}return n},[v,m,j]),X=e=>(e%i.length+i.length)%i.length,D=e=>{let t=u?X(e):e;if(Q.current){let n=`translateZ(${-I}px) rotateX(${v*t}deg)`;Q.current.style.transform=n,Q.current.childNodes.forEach(r=>{let s=r,f=Math.abs(Number(s.dataset.index)-t);s.style.visibility=f>j?"hidden":"visible"})}return F.current&&(F.current.style.transform=`translateY(${-t*m}px)`),t},T=()=>{cancelAnimationFrame(ee.current)},ne=(e,t,n,r)=>{if(e===t||n===0){D(e);return}let s=performance.now(),f=t-e,h=y=>{let E=(y-s)/1e3;if(E<n){let B=Oe(E/n);b.current=D(e+B*f),ee.current=requestAnimationFrame(h)}else T(),b.current=D(t),r?.()};requestAnimationFrame(h)},H=e=>{let t=X(e)|0,n=u?t:Math.min(Math.max(t,0),i.length-1);if(!u&&n!==e)return;b.current=D(n);let r=i[b.current];W(r.value)},we=e=>{let t=i.findIndex(n=>n.value===e);if(t===-1){console.error("Invalid value selected:",e);return}T(),H(t)},re=e=>{let t=b.current,n=t+e;u?n=Math.round(n):n=G(Math.round(n),0,i.length-1);let r=Math.abs(n-t);if(r===0)return;let s=Math.sqrt(r/k);T(),ne(t,n,s,()=>{H(b.current)})},be=e=>{let t=w.current;if(!t){console.error("Container reference is not set.");return}let{top:n}=t.getBoundingClientRect(),r=e-n,s=xe.findIndex(([h,y])=>r>=h&&r<=y);if(s===-1){console.error("No item found for click position:",r);return}let f=(j-s-1)*-1;re(f)},ye=e=>{var t,n;try{let r=(e instanceof MouseEvent?e.clientY:(n=(t=e.touches)==null?void 0:t[0])==null?void 0:n.clientY)||0,s=V.current;s.isClick&&Math.abs(r-s.startY)>5&&(s.isClick=!1),s.yList.push([r,Date.now()]),s.yList.length>5&&s.yList.shift();let f=(s.startY-r)/m,h=b.current+f;if(u)h=X(h);else{let y=i.length;h<0?h*=ue:h>y&&(h=y+(h-y)*ue)}s.touchScroll=D(h)}catch(r){console.error("Error in updateScrollDuringDrag:",r)}},se=e=>{var t;!L.current&&!((t=w.current)!=null&&t.contains(e.target))&&e.target!==w.current||(e.cancelable&&e.preventDefault(),i.length&&ye(e))},ae=e=>{var t,n,r;try{L.current=!0;let s=new AbortController,{signal:f}=s;O.current=s;let h={signal:f,passive:!1};(t=w.current)==null||t.addEventListener("touchmove",se,h),document.addEventListener("mousemove",se,h);let y=(e instanceof MouseEvent?e.clientY:(r=(n=e.touches)==null?void 0:n[0])==null?void 0:r.clientY)||0,E=V.current;E.startY=y,E.yList=[[y,Date.now()]],E.touchScroll=b.current,E.isClick=!0,T()}catch(s){console.error("Error in initiateDragGesture:",s)}},R=p.useCallback(e=>{var t;let n=L.current,r=!!((t=w.current)!=null&&t.contains(e.target))||e.target===w.current;(n||r)&&e.cancelable&&(e.preventDefault(),i.length&&ae(e))},[ae]),Me=e=>{let t=b.current,n=t,r=e>0?-U:U,s=0;if(u){s=Math.abs(e/r);let f=e*s+.5*r*s*s;n=Math.round(t+f)}else if(t<0||t>i.length-1){let f=G(t,0,i.length-1),h=t-f;r=me,s=Math.sqrt(Math.abs(h/r)),e=r*s,e=t>0?-e:e,n=f}else{s=Math.abs(e/r);let f=e*s+.5*r*s*s;n=Math.round(t+f),n=G(n,0,i.length-1);let h=n-t;s=Math.sqrt(Math.abs(h/r))}ne(t,n,s,()=>{H(b.current)}),H(b.current)},le=()=>{var e,t,n,r;try{(e=O.current)==null||e.abort(),O.current=null;let s=V.current;if(s.isClick){be(s.startY);return}let f=s.yList,h=0;if(f.length>1){let y=f.length,[E,B]=(t=f[y-2])!=null?t:[0,0],[Ee,Ne]=(n=f[y-1])!=null?n:[0,0],oe=Ne-B;if(oe>0){let ce=(E-Ee)/m*1e3/oe,je=Ve,ke=ce>0?1:-1;h=Math.min(Math.abs(ce),je)*ke}}b.current=(r=s.touchScroll)!=null?r:b.current,Me(h)}catch(s){console.error("Error in finalizeDragAndStartInertiaScroll:",s)}finally{L.current=!1}},P=p.useCallback(e=>{var t;if(!i.length)return;let n=L.current,r=!!((t=w.current)!=null&&t.contains(e.target))||e.target===w.current;(n||r)&&e.cancelable&&(e.preventDefault(),le())},[le]),ie=e=>{e.preventDefault();let t=Date.now();if(t-te.current<100)return;let n=Math.sign(e.deltaY);n&&(te.current=t,re(n))},Z=p.useCallback(e=>{if(!i.length||!w.current)return;let t=L.current,n=w.current.contains(e.target)||e.target===w.current;(t||n)&&e.cancelable&&(e.preventDefault(),ie(e))},[ie]);return p.useEffect(()=>{let e=w.current;if(!e)return;let t={passive:!1};return e.addEventListener("touchstart",R,t),e.addEventListener("touchend",P,t),e.addEventListener("wheel",Z,t),document.addEventListener("mousedown",R,t),document.addEventListener("mouseup",P,t),()=>{e.removeEventListener("touchstart",R),e.removeEventListener("touchend",P),e.removeEventListener("wheel",Z),document.removeEventListener("mousedown",R),document.removeEventListener("mouseup",P)}},[P,R,Z]),p.useEffect(()=>{we($)},[$,a,i]),_.createElement("div",{ref:w,"data-rwp":!0,style:{height:A}},_.createElement("ul",{ref:Q,"data-rwp-options":!0},ve),_.createElement("div",{className:g?.highlightWrapper,"data-rwp-highlight-wrapper":!0,"data-slot":"highlight-wrapper",style:{height:m,lineHeight:`${m}px`}},_.createElement("ul",{ref:F,"data-rwp-highlight-list":!0,style:{top:u?-m:void 0}},_e)))}const Be=window.innerWidth*12/100,Ge=({options:l,value:a,onValueChange:o})=>d.jsx(Xe,{children:d.jsx(Ze,{options:l,optionItemHeight:Be,value:a,onValueChange:o})}),Je="_container_2n9kh_1",Ke="_item_2n9kh_5",Ue="_itemActive_2n9kh_15",J={container:Je,item:Ke,itemActive:Ue},et=({options:l,value:a,onChange:o})=>d.jsx("div",{className:J.container,children:l.map(c=>d.jsx("div",{className:q(J.item,a===c.value&&J.itemActive),onClick:()=>o(c.value),children:c.label},c.value))}),tt="_container_15bqk_1",nt="_title_15bqk_9",rt="_hide_15bqk_15",K={container:tt,title:nt,hide:rt},st=({isShow:l,question:a,value:o,setValue:c})=>d.jsxs("div",{className:q(K.container,!l&&K.hide),children:[d.jsx("p",{className:K.title,children:a.question}),a.type==="option"&&d.jsx(Ge,{onValueChange:c,options:a.options,value:o||a?.default?.value||a.options[0].value}),a.type==="select"&&d.jsx(et,{value:o,options:a.options,onChange:c})]}),at="_container_cpawx_1",lt="_content_cpawx_29",it="_btn_cpawx_35",ot="_btnDone_cpawx_64",ct="_arrow_cpawx_69",S={container:at,content:lt,btn:it,btnDone:ot,arrow:ct},ut=({disabled:l,isDone:a,onClick:o})=>d.jsx("div",{className:q(S.container),children:d.jsx("div",{className:S.content,children:d.jsxs("button",{disabled:l,className:q(S.btn,a&&S.btnDone),onClick:o,children:[!a&&d.jsx(De,{className:S.arrow}),d.jsx("span",{children:a?"Поделиться":"Назад"}),a&&d.jsx(Ce,{className:S.arrow})]})})}),ht="_container_1iwae_1",dt="_content_1iwae_13",he={container:ht,content:dt},de=300,ft="1",fe={id:1,title:"Тест на уровень зависимости от лудомании",description:"Короткий тест показывает на сколько сильна зависимость от азартных игр.",image:Se,averageScore:85,results:[],questions:Le},pt=l=>l.reduce((a,o)=>(a[o.id]=null,a),{});function mt(){const[l,a]=p.useState(!1),[o,c]=p.useState(0),[u,x]=p.useState(!1),{currentQuiz:N,setCurrentQuiz:k}=Ie(),[C,g]=p.useState([]);if(p.useEffect(()=>{N||(g(pt(fe.questions)),k(fe))},[N]),!N&&!C.length)return null;const{questions:M}=N,$=()=>{if(!l){if(o===M.length-1){x(!0);return}a(!0),setTimeout(()=>{a(!1),c(v=>v+1)},de)}},W=()=>{l||o!==0&&(a(!0),setTimeout(()=>{a(!1),c(v=>v-1)},de))},i=M[o],m=C[i.id],z=v=>{$();const I=i.options.find(A=>A.value===v);g(A=>({...A,[i.id]:{value:v,point:I?.point||0}}))};return d.jsx($e,{withNavigation:!1,children:d.jsxs("div",{className:he.container,children:[d.jsxs("div",{className:he.content,children:[d.jsx(He,{step:o,isShow:!u,length:M.length}),d.jsx(st,{isShow:!l&&!u,value:m?.value||"",setValue:z,question:i})]}),d.jsx(ut,{id:ft,isDone:u,disabled:o===0,onClick:u?$:W})]})})}export{mt as default};
