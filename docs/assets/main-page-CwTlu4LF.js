import{c as u,g as i,j as s,B as n,S as d,K as _,A as h,r as x,a as j,v as z,h as p,i as v,C as S,P as f}from"./index-tm3_OPqF.js";import{S as y}from"./SectionHeader-CKWlVxoa.js";import{u as q,Q as g,a as w}from"./useQuizListQuery-9DUdP_0W.js";import{S as N}from"./square-pen-DUlwXELt.js";const L=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],m=u("chevron-right",L);const b=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],I=u("circle-user-round",b),D="Приложение для прохождения и создания квизов!",A=()=>{const{t:e}=i(),t=()=>{_(h,D)};return s.jsx(n,{onClick:t,after:s.jsx(d,{}),children:e("common.share")})},k="_avatar_1nv35_1",B={avatar:k},Q=({image:e})=>{const[t,c]=x.useState(!1);return s.jsxs("div",{className:B.avatar,children:[(!t||!e)&&s.jsx(I,{}),e&&s.jsx("img",{src:e,alt:"avatar",style:{opacity:t?1:0},onLoad:()=>c(!0)})]})},U=async e=>(await j.get(`/user/${e.id}`)).data;function C(){const{tgWebAppData:e}=z(),t={id:String(e?.user?.id||""),language:e?.user?.language_code||"ru",first_name:e?.user?.first_name||"",last_name:e?.user?.last_name||"",username:e?.user?.username||"",avatar:e?.user?.photo_url||""};return p({queryKey:["getUserData",t.id],queryFn:()=>U(t),refetchOnMount:!1})}const P="_userWelcome_bzalv_1",W="_userInfo_bzalv_6",$="_welcome_bzalv_13",R="_welcomeDesc_bzalv_24",E="_userStatistic_bzalv_29",K="_userStatisticItem_bzalv_43",M="_userStatisticBtn_bzalv_51",a={userWelcome:P,userInfo:W,welcome:$,welcomeDesc:R,userStatistic:E,userStatisticItem:K,userStatisticBtn:M},F=()=>{const{t:e}=i(),{data:t}=C(),c=t?.first_name||t?.username;return s.jsxs("div",{className:a.userWelcome,children:[s.jsxs("div",{className:a.userInfo,children:[s.jsx(Q,{image:t?.avatar}),s.jsxs("p",{className:a.welcome,children:[e("welcome.hello")," ",c&&s.jsxs("span",{children:[c,"!"]})]}),s.jsx("p",{className:a.welcomeDesc,children:e("welcome.description")})]}),s.jsxs("div",{className:a.userStatistic,children:[s.jsxs("p",{className:a.userStatisticItem,children:[e("welcome.completed"),s.jsx("span",{children:t?.quizzes_completed||0})]}),s.jsxs("p",{className:a.userStatisticItem,children:[e("welcome.created"),s.jsx("span",{children:t?.quizzes_created||0})]}),s.jsxs("div",{className:a.userStatisticBtn,children:[s.jsx("span",{children:e("welcome.to_profile")}),s.jsx("button",{type:"button",title:"в профиль",children:s.jsx(m,{})})]})]})]})},H="_container_f2ycw_1",O="_userData_f2ycw_5",T="_actions_f2ycw_9",o={container:H,userData:O,actions:T},G="_quizSection_1s3z1_1",J="_quizList_1s3z1_36",V="_quizAll_1s3z1_41",l={quizSection:G,quizList:J,quizAll:V},X=()=>{const{t:e}=i(),{data:t,isLoading:c}=q();return s.jsxs("div",{className:l.quizSection,children:[s.jsx("div",{className:l.quizList,children:s.jsx(g,{isLoading:c,data:t,renderItem:r=>s.jsx(w,{image:v+r.poster,title:r.title,link:`quiz/${r.id}`},r.id)})}),s.jsx("div",{className:l.quizAll,children:s.jsx(n,{to:"/quizzes",after:s.jsx(S,{}),children:e("common.all_quizzes")})})]})};function ts(){const{t:e}=i();return s.jsx(f,{back:!1,children:s.jsxs("div",{className:o.container,children:[s.jsx("div",{className:o.userData,children:s.jsx(F,{})}),s.jsxs("div",{className:o.actions,children:[s.jsx(n,{to:"/create",after:s.jsx(N,{}),children:e("common.create")}),s.jsx(A,{})]}),s.jsx(y,{title:e("main_page.popular"),actions:s.jsx(n,{style:"white",size:"sm",to:"/quizzes",after:s.jsx(m,{color:"#333"}),children:e("main_page.more")})}),s.jsx(X,{})]})})}export{ts as default};
