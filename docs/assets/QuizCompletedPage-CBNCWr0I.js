import{c as d,j as e,b as m,B as u,K as g,A as y}from"./index-rDwIdqWj.js";import{u as f}from"./useUserQuery-DHqWU90U.js";import{P as p}from"./page-layout-VyntR1zk.js";import{L as T,R as k,D as N}from"./LazyImage-JNEgQfZc.js";import{T as v}from"./Time-B348cZNp.js";import{b as P}from"./buildUrl-BKAySUEN.js";import"./useQuery-Dcp0ZFTz.js";import"./useBaseQuery-mP1osl3_.js";const q=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],b=d("circle-play",q);const z=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],I=d("share-2",z);const $=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],w=d("timer",$),C="_container_jvdn5_1",R="_background_jvdn5_7",L="_bad_jvdn5_11",S="_middle_jvdn5_16",B="_low_jvdn5_21",H="_high_jvdn5_26",U="_circle_jvdn5_31",A="_fillProgress_jvdn5_1",l={container:C,background:R,bad:L,middle:S,low:B,high:H,circle:U,fillProgress:A},M=t=>t>=70?"high":t>=55?"middle":t>=40?"low":"bad",o=188.495,K=({percentage:t=0})=>{const n=Math.max(0,Math.min(100,t)),r=o-n/100*o,c=M(n);return e.jsx("div",{className:l.container,children:e.jsxs("svg",{className:"progress-ring",width:"100%",height:"100%",viewBox:"0 0 100 100",version:"1.1",style:{"--circumference-value":o,"--offset-value":r},children:[e.jsx("circle",{className:m(l.background),strokeWidth:"5",fill:"transparent",r:"30",cx:"50",cy:"50"}),e.jsx("circle",{className:m(l.circle,l[c]),strokeWidth:"5",fill:"transparent",r:"30",cx:"50",cy:"50",strokeDasharray:o,strokeDashoffset:r,strokeLinecap:"round"})]})})},Q="_container_1hjth_1",W="_title_1hjth_5",E="_poster_1hjth_12",F="_resultHeader_1hjth_17",G="_resultInfo_1hjth_23",J="_resultTitle_1hjth_30",O="_resultTime_1hjth_35",V="_resultTimeIcon_1hjth_42",X="_resultProgress_1hjth_47",Y="_resultProgressText_1hjth_54",Z="_resultTextResult_1hjth_61",D="_resultTextCount_1hjth_66",ee="_actions_1hjth_72",s={container:Q,title:W,poster:E,resultHeader:F,resultInfo:G,resultTitle:J,resultTime:O,resultTimeIcon:V,resultProgress:X,resultProgressText:Y,resultTextResult:Z,resultTextCount:D,actions:ee};function ae({sessionData:t}){const{data:n}=f(),r=t.userId===n?.id,c=t.quiz.questions.length,x=t.quizId,i=t.quiz.title,a=(t?.score||0)/c*100,_=t.quiz?.resultFeedbacks?.find(h=>a>=Number(h.from)&&a<=Number(h.to)),j=()=>{g(`${y}?startapp=${t.id}&&completed`,`Мой результат в тесте: ${i} ${t?.score} из ${c}`)};return e.jsx(p,{children:e.jsxs("div",{className:s.container,children:[e.jsx("p",{className:s.title,children:i}),e.jsxs("div",{className:s.resultHeader,children:[t.quiz?.poster&&e.jsx(T,{className:s.poster,image:P(t.quiz.poster),title:i}),e.jsxs("div",{className:s.resultInfo,children:[e.jsx("p",{className:s.resultTitle,children:r?"Ваш результат":"Результат"}),e.jsxs("div",{className:s.resultProgress,children:[e.jsx(K,{percentage:a}),e.jsxs("p",{className:s.resultProgressText,children:[e.jsx("span",{className:s.resultTextResult,children:t.score})," / ",e.jsx("span",{className:s.resultTextCount,children:c})]})]}),e.jsxs("div",{className:s.resultTime,children:[e.jsx(w,{className:s.resultTimeIcon}),e.jsx(v,{seconds:t.timeSpentSeconds})]})]})]}),r?e.jsxs("div",{className:s.actions,children:[e.jsx(u,{to:`/quiz/${x}`,after:e.jsx(k,{}),children:"Повторить"}),e.jsx(u,{after:e.jsx(I,{}),onClick:j,children:"Поделиться результатом"})]}):e.jsx(u,{to:`/quiz/${t.quiz.id}`,after:e.jsx(b,{}),children:"Пройти тест"}),_&&e.jsx(N,{text:_.text})]})})}export{ae as default};
