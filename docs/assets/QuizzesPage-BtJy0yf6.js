import{c as w,j as e,r as o,u as C,B as $,h as D}from"./index-CpQMeG-6.js";import{s as N,Q as M,a as K}from"./QuizList-C-jYsfVn.js";import{P as U}from"./page-layout-DDA38ITa.js";import{T as G}from"./tab-bar-DF7B8yK7.js";import{r as Q}from"./index-Bz21J2Zd.js";import{B as J}from"./Background-DYvGlzno.js";import{u as T}from"./useTranslation-lpBjxsq-.js";import{T as W}from"./trash-2-BB9ukT4O.js";import{S as X}from"./SectionHeader-BQA1bP0Y.js";import{u as Z}from"./useCssVarElementHeight-F1kxK2wf.js";import"./useBaseQuery-Cf-xLxfk.js";const ee=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],te=w("funnel",ee);const se=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],re=w("search-check",se),ne=({avatar:r,username:s})=>e.jsxs("div",{className:N.author,children:[e.jsx("img",{src:r,className:N.authorAvatar,alt:s}),e.jsx("p",{className:N.authorNick,children:s})]});(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode("._overlay_ued7t_1{position:fixed;inset:0;background:#00000080;opacity:0;pointer-events:none;transition:opacity .3s ease;z-index:10}._overlayOpen_ued7t_11{opacity:1;pointer-events:all}._sheet_ued7t_16{position:fixed;left:0;right:0;bottom:0;max-height:calc(100vh - 32px);background:#fff;border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -2px 12px #00000026;display:flex;flex-direction:column;z-index:20;transform:translateY(100%);touch-action:none}._sheetOpen_ued7t_33{transform:translateY(0)}._header_ued7t_37{padding:16px;border-bottom:1px solid #eee;text-align:center;cursor:grab;-webkit-user-select:none;user-select:none}._handle_ued7t_45{width:50px;height:4px;background:#ccc;border-radius:4px;margin:0 auto}._content_ued7t_53{overflow-y:auto;flex:1}")),document.head.appendChild(r)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const ae="_overlay_ued7t_1",oe="_overlayOpen_ued7t_11",ce="_sheet_ued7t_16",ie="_sheetOpen_ued7t_33",le="_header_ued7t_37",ue="_handle_ued7t_45",de="_content_ued7t_53",l={overlay:ae,overlayOpen:oe,sheet:ce,sheetOpen:ie,header:le,handle:ue,content:de},he=120;function me({isOpen:r,onClose:s,header:n,children:t,threshold:c=he,overlayClassName:x="",headerClassName:m="",sheetClassName:_="",contentClassName:v=""}){const y=o.useRef(null),j=o.useRef(null),p=o.useRef(null),b=o.useRef(null),g=o.useRef(0),d=o.useRef(0),[z,f]=o.useState(!1),[k,F]=o.useState(!1);o.useEffect(()=>(r?(h(0),document.body.style.overflow="hidden"):(h(100),document.body.style.overflow=""),()=>{document.body.style.overflow="",q()}),[r]);const q=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",S)},E=()=>{d.current>c?(h(100),s()):h(0),d.current=0},A=a=>{const u=a-g.current;u>0&&(d.current=u,h(u/(p.current?.offsetHeight||0)*100))},h=a=>{p.current&&y.current&&(y.current.style.opacity=`${1-a/100}`,p.current.style.transform=`translateY(${a}%)`)},R=({clientY:a})=>{f(!0),g.current=a,d.current=0,document.addEventListener("mousemove",B),document.addEventListener("mouseup",S)},L=({touches:a})=>{const u=a[0].clientY;F(()=>{if(!b.current||!j.current)return!1;if(b.current.scrollTop===0)return!0;const{top:I,height:V}=j.current.getBoundingClientRect();return I+V>u}),f(!0),g.current=u,d.current=0},B=({clientY:a})=>{A(a)},P=({touches:a})=>{!z||!k||A(a[0].clientY)},S=()=>{f(!1),q(),E()},Y=()=>{f(!1),k&&E()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:y,className:`${l.overlay} ${r?l.overlayOpen:""} ${x}`,style:{transition:z?"none":"opacity 0.3s ease"},onClick:s}),e.jsxs("div",{ref:p,className:`${l.sheet} ${r?l.sheetOpen:""} ${_}`,style:{transition:z?"none":"transform 0.3s ease"},onTouchStart:L,onTouchMove:P,onTouchEnd:Y,children:[e.jsx("div",{ref:j,onMouseDown:R,className:`${l.header} ${m}`,children:n||e.jsx("div",{className:l.handle})}),e.jsx("div",{ref:b,className:`${l.content} ${v}`,children:t})]})]})}const _e="_container_1e1c3_1",pe="_overlay_1e1c3_11",fe="_header_1e1c3_16",xe="_filterHeader_1e1c3_23",ve="_filterTitle_1e1c3_29",ye="_filterAction_1e1c3_35",je="_content_1e1c3_38",be="_actions_1e1c3_49",i={container:_e,overlay:pe,header:fe,filterHeader:xe,filterTitle:ve,filterAction:ye,content:je,actions:be},ge=document.getElementById("modals"),ze=({withNavigation:r=!0,isOpen:s,onClose:n,title:t,headerActions:c,children:x,actions:m})=>{const _=C(v=>v.setNavigationVisible);return o.useEffect(()=>{r&&_(!s)},[s,r,_]),Q.createPortal(e.jsxs(me,{isOpen:s,onClose:n,overlayClassName:i.overlay,sheetClassName:i.container,headerClassName:i.header,header:(t||c)&&e.jsxs("div",{className:i.filterHeader,children:[t&&e.jsx("span",{className:i.filterTitle,children:t}),c&&e.jsx("div",{className:i.filterAction,children:c})]}),children:[e.jsx(J,{absolute:!0}),e.jsx("div",{className:i.content,children:x}),m&&e.jsx("div",{className:i.actions,children:m})]}),ge)},Ne="_empty_yu1sq_1",Ce={empty:Ne},$e=({isOpen:r,onClose:s})=>{const{t:n}=T(),t=()=>{s()},c=()=>{};return e.jsx(ze,{isOpen:r,onClose:s,title:n("filter.title"),headerActions:e.jsx($,{size:"sm",style:"white",disabled:!0,onClick:c,after:e.jsx(W,{}),children:n("filter.clear")}),actions:e.jsx($,{onClick:t,after:e.jsx(re,{}),children:n("filter.search")}),children:e.jsx("div",{className:Ce.empty,children:e.jsx("p",{children:"Приложение пока не нуждается в поиске"})})})},Te=()=>{const{t:r}=T(),[s,n]=o.useState(!1),t=()=>{n(!0)},c=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx($,{size:"sm",after:e.jsx(te,{}),onClick:t,children:r("quizzes_page.search")}),e.jsx($e,{isOpen:s,onClose:c})]})},ke="_header_1uu80_1",qe="_content_1uu80_10",H={header:ke,content:qe},Ee=document.getElementById("header"),Ae=({actions:r,title:s})=>{const n=Z("--quizzes-page-header-height");return Q.createPortal(e.jsx("div",{ref:n,className:H.header,children:e.jsx("div",{className:H.content,children:e.jsx(X,{title:s,actions:r})})}),Ee)},Be="_container_uiqvl_1",Se="_tabBar_uiqvl_10",O={container:Be,tabBar:Se},He=[{label:"quizzes_page.tab.public",value:"public"},{label:"quizzes_page.tab.my",value:"my"},{label:"quizzes_page.tab.shared",value:"shared"}];function Me(){const{t:r}=T(),s=C(t=>t.quizActiveTab),n=C(t=>t.setQuizActiveTab);return e.jsxs(U,{children:[e.jsx(Ae,{title:r("quizzes_page.title"),actions:e.jsx(Te,{})}),e.jsxs("div",{className:O.container,children:[e.jsx("div",{className:O.tabBar,children:e.jsx(G,{value:s,options:He,onChange:t=>n(t)})}),e.jsx(M,{listKey:s,params:{type:s},renderItem:({data:t})=>e.jsx(K,{image:D(t.poster),title:t.title,link:`quiz/${t.id}`,actions:t?.author&&e.jsx(ne,{avatar:t.author.avatar,username:t.author.username})},t.id)})]})]})}export{Me as default};
