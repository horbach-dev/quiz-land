import{c as k,a as w,u as z,b as E,r as o,j as e,B as l,f as L,P as N,k as A}from"./index-B_0r3ogX.js";import{u as Q,Q as R,a as S}from"./useQuizListQuery-D1f2CyTJ.js";import{S as b}from"./SectionHeader-DNMcYEgS.js";import{S as y,u as P,A as I}from"./useUserQuery-BqJT_-Rc.js";import{T as B}from"./trash-2-BgTgcqKX.js";const H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],W=k("globe",H),$="_container_lkrrv_1",q={container:$},M=async t=>(await w.delete(`/quiz/${t}`))?.data;function O(t){const s=z();return E({mutationFn:()=>M(t),onSuccess:()=>{s.invalidateQueries({queryKey:["getQuizList",{type:"my"}]})}})}function T({onClickOutside:t,ref:s,options:n={}}){o.useEffect(()=>{const r=i=>{const u=n.excludedElementsSelector,p=u&&u.some(d=>!!i.target.closest(d));!s.current||s.current.contains(i.target)||p||t(i)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[n.excludedElementsSelector,s,t])}const U="_popover_vdrbh_1",D="_popoverContent_vdrbh_5",F="_popoverActions_vdrbh_21",x={popover:U,popoverContent:D,popoverActions:F},G=({children:t,text:s,onConfirm:n,onCancel:r})=>{const[i,u]=o.useState(0),p=o.useRef(null),d=o.useRef(null),c=o.useRef(null),[m,f]=o.useState(!1),j=()=>{f(!1),n()},_=()=>{f(!1),r?.()},g=()=>{u(window.innerWidth),f(h=>!h)};return o.useLayoutEffect(()=>{if(d.current&&c.current&&m){const{left:h,width:v}=c.current.getBoundingClientRect(),{width:C}=d.current.getBoundingClientRect();if(c.current.style.bottom="calc(100% + 0.7rem)",i-h-v<20){c.current.style.right="0";return}c.current.style.left=`calc(-${v/2-C/2}px)`}},[m,i]),T({ref:p,onClickOutside:()=>f(!1)}),e.jsxs("div",{ref:p,className:x.popover,children:[m&&e.jsxs("div",{ref:c,className:x.popoverContent,children:[s,e.jsxs("div",{className:x.popoverActions,children:[e.jsx(l,{style:"default",size:"sm",onClick:j,children:"Да"}),e.jsx(l,{style:"white",size:"sm",onClick:_,children:"Нет"})]})]}),e.jsx("div",{onClick:g,ref:d,children:t})]})},K="_cardActions_13057_1",J={cardActions:K},V=({item:t})=>{const{mutate:s,isPending:n}=O(t.id);return e.jsxs("div",{className:J.cardActions,children:[e.jsx(l,{size:"sm",style:"icon",children:e.jsx(y,{})}),e.jsx(G,{onConfirm:s,text:e.jsxs(e.Fragment,{children:["Удалить ",e.jsx("br",{})," ",t.title," ?"]}),children:e.jsx(l,{size:"sm",style:"icon",loading:n,type:"button",children:e.jsx(B,{})})})]})},X="_profileHeader_ywmlk_1",Y="_profileInfo_ywmlk_7",Z="_profileContent_ywmlk_12",ee="_nick_ywmlk_16",te="_line_ywmlk_22",a={profileHeader:X,profileInfo:Y,profileContent:Z,nick:ee,line:te},se=()=>{const{i18n:t}=L(),{data:s}=P();return e.jsxs("div",{className:a.profileHeader,children:[e.jsxs("div",{className:a.profileInfo,children:[e.jsx(I,{image:s?.avatar}),e.jsxs("div",{className:a.profileContent,children:[e.jsx("p",{className:a.nick,children:s?.first_name||s?.username}),e.jsx("p",{className:a.line,children:"Создано: 0"}),e.jsx("p",{className:a.line,children:"Пройдено: 0"})]})]}),e.jsx(l,{size:"sm",auto:!0,onClick:()=>{t.changeLanguage(t.language==="ru"?"en":"ru")},after:e.jsx(W,{}),children:t.language==="ru"?"EN":"RU"})]})};function ae(){const{isLoading:t,data:s}=Q({type:"my"});return e.jsx(N,{children:e.jsxs("div",{className:q.container,children:[e.jsx(se,{}),e.jsx(b,{title:"Созданные квизы",actions:e.jsx(l,{size:"sm",to:"/create",after:e.jsx(y,{}),children:"Новый"})}),e.jsx(R,{isLoading:t,data:s,renderItem:n=>e.jsx(S,{image:A+n.poster,title:n.title,link:`quiz/${n.id}`,actions:e.jsx(V,{item:n})},n.id)})]})})}export{ae as default};
