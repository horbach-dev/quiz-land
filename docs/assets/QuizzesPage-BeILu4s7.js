import{c as q,g as v,j as e,d as D,r as c,f as L,k as U,B as z,l as E,P as G,i as J}from"./index-BwX7s29R.js";import{u as K,Q as V,a as X}from"./useQuizListQuery-Bdcv9atU.js";import{T as W}from"./trash-2-BPIRyR1V.js";import{S as Z}from"./SectionHeader-DgQ8V6Sj.js";const ee=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],te=q("funnel",ee);const ne=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],se=q("search-check",ne),ae="_tabBar_mvxgb_1",re="_tabBarItem_mvxgb_10",ce="_tabBarItemActive_mvxgb_24",oe="_tabBarActive_mvxgb_28",f={tabBar:ae,tabBarItem:re,tabBarItemActive:ce,tabBarActive:oe},ie=({options:n,value:s,onChange:a})=>{const{t:o}=v(),i=n.findIndex(t=>t.value===s);return e.jsxs("div",{className:f.tabBar,children:[n.map(t=>e.jsx("button",{onClick:()=>a(t.value),className:D(f.tabBarItem,t.value===s&&f.tabBarItemActive),children:o(t.label)},t.value)),e.jsx("div",{className:f.tabBarActive,children:e.jsx("span",{style:{transform:`translateX(${i*100}%)`}})})]})},le="_container_1ynd6_1",de="_tabBar_1ynd6_10",ue="_author_1ynd6_15",he="_authorAvatar_1ynd6_21",xe="_authorNick_1ynd6_28",_={container:le,tabBar:de,author:ue,authorAvatar:he,authorNick:xe};(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode("._overlay_ued7t_1{position:fixed;inset:0;background:#00000080;opacity:0;pointer-events:none;transition:opacity .3s ease;z-index:10}._overlayOpen_ued7t_11{opacity:1;pointer-events:all}._sheet_ued7t_16{position:fixed;left:0;right:0;bottom:0;max-height:calc(100vh - 32px);background:#fff;border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -2px 12px #00000026;display:flex;flex-direction:column;z-index:20;transform:translateY(100%);touch-action:none}._sheetOpen_ued7t_33{transform:translateY(0)}._header_ued7t_37{padding:16px;border-bottom:1px solid #eee;text-align:center;cursor:grab;-webkit-user-select:none;user-select:none}._handle_ued7t_45{width:50px;height:4px;background:#ccc;border-radius:4px;margin:0 auto}._content_ued7t_53{overflow-y:auto;flex:1}")),document.head.appendChild(n)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const _e="_overlay_ued7t_1",pe="_overlayOpen_ued7t_11",me="_sheet_ued7t_16",fe="_sheetOpen_ued7t_33",ve="_header_ued7t_37",je="_handle_ued7t_45",ye="_content_ued7t_53",d={overlay:_e,overlayOpen:pe,sheet:me,sheetOpen:fe,header:ve,handle:je,content:ye},be=120;function ge({isOpen:n,onClose:s,header:a,children:o,threshold:i=be,overlayClassName:t="",headerClassName:O="",sheetClassName:S="",contentClassName:H=""}){const j=c.useRef(null),y=c.useRef(null),p=c.useRef(null),b=c.useRef(null),g=c.useRef(0),h=c.useRef(0),[T,m]=c.useState(!1),[N,Q]=c.useState(!1);c.useEffect(()=>(n?(x(0),document.body.style.overflow="hidden"):(x(100),document.body.style.overflow=""),()=>{document.body.style.overflow="",B()}),[n]);const B=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",C)},A=()=>{h.current>i?(x(100),s()):x(0),h.current=0},$=r=>{const u=r-g.current;u>0&&(h.current=u,x(u/(p.current?.offsetHeight||0)*100))},x=r=>{p.current&&j.current&&(j.current.style.opacity=`${1-r/100}`,p.current.style.transform=`translateY(${r}%)`)},R=({clientY:r})=>{m(!0),g.current=r,h.current=0,document.addEventListener("mousemove",k),document.addEventListener("mouseup",C)},w=({touches:r})=>{const u=r[0].clientY;Q(()=>{if(!b.current||!y.current)return!1;if(b.current.scrollTop===0)return!0;const{top:Y,height:M}=y.current.getBoundingClientRect();return Y+M>u}),m(!0),g.current=u,h.current=0},k=({clientY:r})=>{$(r)},F=({touches:r})=>{!T||!N||$(r[0].clientY)},C=()=>{m(!1),B(),A()},P=()=>{m(!1),N&&A()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:j,className:`${d.overlay} ${n?d.overlayOpen:""} ${t}`,style:{transition:T?"none":"opacity 0.3s ease"},onClick:s}),e.jsxs("div",{ref:p,className:`${d.sheet} ${n?d.sheetOpen:""} ${S}`,style:{transition:T?"none":"transform 0.3s ease"},onTouchStart:w,onTouchMove:F,onTouchEnd:P,children:[e.jsx("div",{ref:y,onMouseDown:R,className:`${d.header} ${O}`,children:a||e.jsx("div",{className:d.handle})}),e.jsx("div",{ref:b,className:`${d.content} ${H}`,children:o})]})]})}const Te="_container_um6pn_1",ze="_overlay_um6pn_10",Ne="_header_um6pn_14",Be="_filterHeader_um6pn_21",Ae="_filterTitle_um6pn_27",$e="_filterAction_um6pn_34",ke="_content_um6pn_37",Ce="_actions_um6pn_47",l={container:Te,overlay:ze,header:Ne,filterHeader:Be,filterTitle:Ae,filterAction:$e,content:ke,actions:Ce},Ee=document.getElementById("modals"),Ie=({isOpen:n,onClose:s,children:a,title:o,clearButton:i,searchButton:t})=>L.createPortal(e.jsxs(ge,{overlayClassName:l.overlay,sheetClassName:l.container,headerClassName:l.header,header:e.jsxs("div",{className:l.filterHeader,children:[e.jsx("span",{className:l.filterTitle,children:o}),e.jsx("div",{className:l.filterAction,children:i})]}),isOpen:n,onClose:s,children:[e.jsx(U,{absolute:!0}),e.jsxs("div",{className:l.content,children:[a,e.jsx("div",{className:l.actions,children:t})]})]}),Ee),qe=({isOpen:n,onClose:s})=>{const{t:a}=v(),o=()=>{s()},i=()=>{};return e.jsxs(Ie,{isOpen:n,onClose:s,title:a("filter.title"),clearButton:e.jsx(z,{size:"sm",style:"white",disabled:!0,onClick:i,after:e.jsx(W,{}),children:a("filter.clear")}),searchButton:e.jsx(z,{onClick:o,after:e.jsx(se,{}),children:a("filter.search")}),children:[e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),e.jsx("p",{children:"Text"}),"Ñ‘"]})},Le=()=>{const{t:n}=v(),[s,a]=c.useState(!1),o=()=>{a(!0)},i=()=>{a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(z,{size:"sm",after:e.jsx(te,{}),onClick:o,children:n("quizzes_page.search")}),e.jsx(qe,{isOpen:s,onClose:i})]})},Oe="_header_1uu80_1",Se="_content_1uu80_10",I={header:Oe,content:Se},He=document.getElementById("header"),Qe=({actions:n,title:s})=>{const a=c.useRef(null);return c.useLayoutEffect(()=>{a?.current?.offsetHeight&&document.documentElement.style.setProperty("--quizzes-page-header-height",a.current.offsetHeight+"px")},[]),L.createPortal(e.jsx("div",{ref:a,className:I.header,children:e.jsx("div",{className:I.content,children:e.jsx(Z,{title:s,actions:n})})}),He)},Re=[{label:"quizzes_page.tab.public",value:"public"},{label:"quizzes_page.tab.my",value:"my"},{label:"quizzes_page.tab.shared",value:"shared"}];function Me(){const{t:n}=v(),s=E(t=>t.quizActiveTab),a=E(t=>t.setQuizActiveTab),{isLoading:o,data:i}=K({type:s});return e.jsxs(G,{children:[e.jsx(Qe,{title:n("quizzes_page.title"),actions:e.jsx(Le,{})}),e.jsxs("div",{className:_.container,children:[e.jsx("div",{className:_.tabBar,children:e.jsx(ie,{value:s,options:Re,onChange:t=>a(t)})}),e.jsx(V,{data:i,isLoading:o,renderItem:t=>e.jsx(X,{image:J+t.poster,title:t.title,link:`quiz/${t.id}`,actions:t?.author&&e.jsxs("div",{className:_.author,children:[e.jsx("img",{src:t.author.avatar,className:_.authorAvatar,alt:t.author.username}),e.jsx("p",{className:_.authorNick,children:t.author.username})]})},t.id)})]})]})}export{Me as default};
