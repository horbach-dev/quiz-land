import{c as q,r as o,j as e,g as L,y as M,u as z,B as b,v as A,P as D,k as K}from"./index-C0sR6Sdv.js";import{u as U,Q as G,a as J}from"./useQuizListQuery-BNhfFy72.js";import{T as V}from"./tab-bar-DtJgg4WN.js";import{T as W}from"./trash-2-qdx6wRTE.js";import{S as X}from"./SectionHeader-CBEdFdeq.js";const Z=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ee=q("funnel",Z);const te=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ne=q("search-check",te),se="_container_1ynd6_1",ae="_tabBar_1ynd6_10",re="_author_1ynd6_15",oe="_authorAvatar_1ynd6_21",ce="_authorNick_1ynd6_28",m={container:se,tabBar:ae,author:re,authorAvatar:oe,authorNick:ce},ie="_container_11unt_1",le="_overlay_11unt_11",ue="_header_11unt_16",de="_filterHeader_11unt_23",he="_filterTitle_11unt_29",_e="_content_11unt_36",me="_actions_11unt_46",pe="_empty_11unt_54",l={container:ie,overlay:le,header:ue,filterHeader:de,filterTitle:he,content:_e,actions:me,empty:pe};(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode("._overlay_ued7t_1{position:fixed;inset:0;background:#00000080;opacity:0;pointer-events:none;transition:opacity .3s ease;z-index:10}._overlayOpen_ued7t_11{opacity:1;pointer-events:all}._sheet_ued7t_16{position:fixed;left:0;right:0;bottom:0;max-height:calc(100vh - 32px);background:#fff;border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -2px 12px #00000026;display:flex;flex-direction:column;z-index:20;transform:translateY(100%);touch-action:none}._sheetOpen_ued7t_33{transform:translateY(0)}._header_ued7t_37{padding:16px;border-bottom:1px solid #eee;text-align:center;cursor:grab;-webkit-user-select:none;user-select:none}._handle_ued7t_45{width:50px;height:4px;background:#ccc;border-radius:4px;margin:0 auto}._content_ued7t_53{overflow-y:auto;flex:1}")),document.head.appendChild(n)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const fe="_overlay_ued7t_1",xe="_overlayOpen_ued7t_11",ye="_sheet_ued7t_16",ve="_sheetOpen_ued7t_33",je="_header_ued7t_37",ge="_handle_ued7t_45",be="_content_ued7t_53",u={overlay:fe,overlayOpen:xe,sheet:ye,sheetOpen:ve,header:je,handle:ge,content:be},ze=120;function Ne({isOpen:n,onClose:s,header:a,children:c,threshold:i=ze,overlayClassName:t="",headerClassName:O="",sheetClassName:S="",contentClassName:H=""}){const x=o.useRef(null),y=o.useRef(null),p=o.useRef(null),v=o.useRef(null),j=o.useRef(0),h=o.useRef(0),[g,f]=o.useState(!1),[N,Q]=o.useState(!1);o.useEffect(()=>(n?(_(0),document.body.style.overflow="hidden"):(_(100),document.body.style.overflow=""),()=>{document.body.style.overflow="",k()}),[n]);const k=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",E)},C=()=>{h.current>i?(_(100),s()):_(0),h.current=0},$=r=>{const d=r-j.current;d>0&&(h.current=d,_(d/(p.current?.offsetHeight||0)*100))},_=r=>{p.current&&x.current&&(x.current.style.opacity=`${1-r/100}`,p.current.style.transform=`translateY(${r}%)`)},R=({clientY:r})=>{f(!0),j.current=r,h.current=0,document.addEventListener("mousemove",T),document.addEventListener("mouseup",E)},w=({touches:r})=>{const d=r[0].clientY;Q(()=>{if(!v.current||!y.current)return!1;if(v.current.scrollTop===0)return!0;const{top:Y,height:I}=y.current.getBoundingClientRect();return Y+I>d}),f(!0),j.current=d,h.current=0},T=({clientY:r})=>{$(r)},F=({touches:r})=>{!g||!N||$(r[0].clientY)},E=()=>{f(!1),k(),C()},P=()=>{f(!1),N&&C()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:x,className:`${u.overlay} ${n?u.overlayOpen:""} ${t}`,style:{transition:g?"none":"opacity 0.3s ease"},onClick:s}),e.jsxs("div",{ref:p,className:`${u.sheet} ${n?u.sheetOpen:""} ${S}`,style:{transition:g?"none":"transform 0.3s ease"},onTouchStart:w,onTouchMove:F,onTouchEnd:P,children:[e.jsx("div",{ref:y,onMouseDown:R,className:`${u.header} ${O}`,children:a||e.jsx("div",{className:u.handle})}),e.jsx("div",{ref:v,className:`${u.content} ${H}`,children:c})]})]})}const ke=document.getElementById("modals"),Ce=({isOpen:n,onClose:s,children:a,title:c,clearButton:i,searchButton:t})=>L.createPortal(e.jsxs(Ne,{overlayClassName:l.overlay,sheetClassName:l.container,headerClassName:l.header,header:e.jsxs("div",{className:l.filterHeader,children:[e.jsx("span",{className:l.filterTitle,children:c}),e.jsx("div",{className:l.filterAction,children:i})]}),isOpen:n,onClose:s,children:[e.jsx(M,{absolute:!0}),e.jsxs("div",{className:l.content,children:[a,e.jsx("div",{className:l.actions,children:t})]})]}),ke),$e=({isOpen:n,onClose:s})=>{const{t:a}=z(),c=()=>{s()},i=()=>{};return e.jsx(Ce,{isOpen:n,onClose:s,title:a("filter.title"),clearButton:e.jsx(b,{size:"sm",style:"white",disabled:!0,onClick:i,after:e.jsx(W,{}),children:a("filter.clear")}),searchButton:e.jsx(b,{onClick:c,after:e.jsx(ne,{}),children:a("filter.search")}),children:e.jsx("div",{className:l.empty,children:e.jsx("p",{children:"Приложение пока не нуждается в поиске"})})})},Te=()=>{const{t:n}=z(),[s,a]=o.useState(!1),c=()=>{a(!0)},i=()=>{a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{size:"sm",after:e.jsx(ee,{}),onClick:c,children:n("quizzes_page.search")}),e.jsx($e,{isOpen:s,onClose:i})]})},Ee="_header_1uu80_1",Ae="_content_1uu80_10",B={header:Ee,content:Ae},Be=document.getElementById("header"),qe=({actions:n,title:s})=>{const a=o.useRef(null);return o.useLayoutEffect(()=>{a?.current?.offsetHeight&&document.documentElement.style.setProperty("--quizzes-page-header-height",a.current.offsetHeight+"px")},[]),L.createPortal(e.jsx("div",{ref:a,className:B.header,children:e.jsx("div",{className:B.content,children:e.jsx(X,{title:s,actions:n})})}),Be)},Le=[{label:"quizzes_page.tab.public",value:"public"},{label:"quizzes_page.tab.my",value:"my"},{label:"quizzes_page.tab.shared",value:"shared"}];function we(){const{t:n}=z(),s=A(t=>t.quizActiveTab),a=A(t=>t.setQuizActiveTab),{isLoading:c,data:i}=U({type:s});return e.jsxs(D,{children:[e.jsx(qe,{title:n("quizzes_page.title"),actions:e.jsx(Te,{})}),e.jsxs("div",{className:m.container,children:[e.jsx("div",{className:m.tabBar,children:e.jsx(V,{value:s,options:Le,onChange:t=>a(t)})}),e.jsx(G,{listKey:s,data:i,isLoading:c,renderItem:t=>e.jsx(J,{image:K+t.poster,title:t.title,link:`quiz/${t.id}`,actions:t?.author&&e.jsxs("div",{className:m.author,children:[e.jsx("img",{src:t.author.avatar,className:m.authorAvatar,alt:t.author.username}),e.jsx("p",{className:m.authorNick,children:t.author.username})]})},t.id)})]})]})}export{we as default};
