import{M as v,c as sr,d as kn,r as m,j as b,B as kr}from"./index-UPycLL-e.js";import{c as pt,n as on,u as Je,b as Mn,B as it,a as Ts}from"./Button-B4QhbFUk.js";import{u as Vn}from"./useMutation-C_jaUH5d.js";import{r as dt}from"./index-CEkgxZNq.js";import{F as Te,c as Os,a as Tn,b as js,d as gt,e as It,f as Nt,g as On,u as Ls,h as Bs,T as Ps}from"./popupStore-C5nNLdf-.js";import{T as $r}from"./trash-2-DUpdzWPN.js";import{S as zs}from"./SectionHeader-BwSW-0CK.js";import{T as qs}from"./tab-bar-Dgni2RbX.js";import{S as $s}from"./square-pen-DNj26E3t.js";const Us=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Hs=pt("badge-plus",Us);const Ws=[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]],Qs=pt("file-plus-corner",Ws);const Xs=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ks=pt("grip-vertical",Xs);const Ys=[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16",key:"9kzy35"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2",key:"1t0f0t"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor",key:"1obus6"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2",key:"1gvhby"}]],Gs=pt("images",Ys);const Js=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Zs=pt("redo-2",Js);const eo=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],to=pt("undo-2",eo);var Bt=e=>e.type==="checkbox",st=e=>e instanceof Date,fe=e=>e==null;const jn=e=>typeof e=="object";var J=e=>!fe(e)&&!Array.isArray(e)&&jn(e)&&!st(e),Ln=e=>J(e)&&e.target?Bt(e.target)?e.target.checked:e.target.value:e,ro=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Bn=(e,r)=>e.has(ro(r)),no=e=>{const r=e.constructor&&e.constructor.prototype;return J(r)&&r.hasOwnProperty("isPrototypeOf")},Ur=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function X(e){let r;const t=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!(Ur&&(e instanceof Blob||n))&&(t||J(e)))if(r=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!no(e))r=e;else for(const s in e)e.hasOwnProperty(s)&&(r[s]=X(e[s]));else return e;return r}var or=e=>/^\w*$/.test(e),Q=e=>e===void 0,ir=e=>Array.isArray(e)?e.filter(Boolean):[],Hr=e=>ir(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,r,t)=>{if(!r||!J(e))return t;const n=(or(r)?[r]:Hr(r)).reduce((s,o)=>fe(s)?s:s[o],e);return Q(n)||n===e?Q(e[r])?t:e[r]:n},xe=e=>typeof e=="boolean",H=(e,r,t)=>{let n=-1;const s=or(r)?[r]:Hr(r),o=s.length,i=o-1;for(;++n<o;){const a=s[n];let c=t;if(n!==i){const u=e[a];c=J(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=c,e=e[a]}};const Yt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},De={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ze={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Wr=v.createContext(null);Wr.displayName="HookFormContext";const Ze=()=>v.useContext(Wr),so=e=>{const{children:r,...t}=e;return v.createElement(Wr.Provider,{value:t},r)};var Pn=(e,r,t,n=!0)=>{const s={defaultValues:r._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const i=o;return r._proxyFormState[i]!==De.all&&(r._proxyFormState[i]=!n||De.all),t&&(t[i]=!0),e[i]}});return s};const ar=typeof window<"u"?v.useLayoutEffect:v.useEffect;function oo(e){const r=Ze(),{control:t=r.control,disabled:n,name:s,exact:o}=e||{},[i,a]=v.useState(t._formState),c=v.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ar(()=>t._subscribe({name:s,formState:c.current,exact:o,callback:u=>{!n&&a({...t._formState,...u})}}),[s,n,o]),v.useEffect(()=>{c.current.isValid&&t._setValid(!0)},[t]),v.useMemo(()=>Pn(i,t,c.current,!1),[i,t])}var we=e=>typeof e=="string",Mr=(e,r,t,n,s)=>we(e)?(n&&r.watch.add(e),A(t,e,s)):Array.isArray(e)?e.map(o=>(n&&r.watch.add(o),A(t,o))):(n&&(r.watchAll=!0),t),Vr=e=>fe(e)||!jn(e);function Re(e,r,t=new WeakSet){if(Vr(e)||Vr(r))return Object.is(e,r);if(st(e)&&st(r))return e.getTime()===r.getTime();const n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;if(t.has(e)||t.has(r))return!0;t.add(e),t.add(r);for(const o of n){const i=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const a=r[o];if(st(i)&&st(a)||J(i)&&J(a)||Array.isArray(i)&&Array.isArray(a)?!Re(i,a,t):!Object.is(i,a))return!1}}return!0}function Qr(e){const r=Ze(),{control:t=r.control,name:n,defaultValue:s,disabled:o,exact:i,compute:a}=e||{},c=v.useRef(s),u=v.useRef(a),f=v.useRef(void 0),d=v.useRef(t),h=v.useRef(n);u.current=a;const[x,R]=v.useState(()=>{const y=t._getWatch(n,c.current);return u.current?u.current(y):y}),C=v.useCallback(y=>{const w=Mr(n,t._names,y||t._formValues,!1,c.current);return u.current?u.current(w):w},[t._formValues,t._names,n]),_=v.useCallback(y=>{if(!o){const w=Mr(n,t._names,y||t._formValues,!1,c.current);if(u.current){const F=u.current(w);Re(F,f.current)||(R(F),f.current=F)}else R(w)}},[t._formValues,t._names,o,n]);ar(()=>((d.current!==t||!Re(h.current,n))&&(d.current=t,h.current=n,_()),t._subscribe({name:n,formState:{values:!0},exact:i,callback:y=>{_(y.values)}})),[t,i,n,_]),v.useEffect(()=>t._removeUnmounted());const M=d.current!==t,S=h.current,k=v.useMemo(()=>{if(o)return null;const y=!M&&!Re(S,n);return M||y?C():null},[o,M,n,S,C]);return k!==null?k:x}function io(e){const r=Ze(),{name:t,disabled:n,control:s=r.control,shouldUnregister:o,defaultValue:i,exact:a=!0}=e,c=Bn(s._names.array,t),u=v.useMemo(()=>A(s._formValues,t,A(s._defaultValues,t,i)),[s,t,i]),f=Qr({control:s,name:t,defaultValue:u,exact:a}),d=oo({control:s,name:t,exact:a}),h=v.useRef(e),x=v.useRef(void 0),R=v.useRef(s.register(t,{...e.rules,value:f,...xe(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const C=v.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!A(d.errors,t)},isDirty:{enumerable:!0,get:()=>!!A(d.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!A(d.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!A(d.validatingFields,t)},error:{enumerable:!0,get:()=>A(d.errors,t)}}),[d,t]),_=v.useCallback(y=>R.current.onChange({target:{value:Ln(y),name:t},type:Yt.CHANGE}),[t]),M=v.useCallback(()=>R.current.onBlur({target:{value:A(s._formValues,t),name:t},type:Yt.BLUR}),[t,s._formValues]),S=v.useCallback(y=>{const w=A(s._fields,t);w&&y&&(w._f.ref={focus:()=>y.focus&&y.focus(),select:()=>y.select&&y.select(),setCustomValidity:F=>y.setCustomValidity(F),reportValidity:()=>y.reportValidity()})},[s._fields,t]),k=v.useMemo(()=>({name:t,value:f,...xe(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:_,onBlur:M,ref:S}),[t,n,d.disabled,_,M,S,f]);return v.useEffect(()=>{const y=s._options.shouldUnregister||o,w=x.current;w&&w!==t&&!c&&s.unregister(w),s.register(t,{...h.current.rules,...xe(h.current.disabled)?{disabled:h.current.disabled}:{}});const F=(N,T)=>{const L=A(s._fields,N);L&&L._f&&(L._f.mount=T)};if(F(t,!0),y){const N=X(A(s._options.defaultValues,t,h.current.defaultValue));H(s._defaultValues,t,N),Q(A(s._formValues,t))&&H(s._formValues,t,N)}return!c&&s.register(t),x.current=t,()=>{(c?y&&!s._state.action:y)?s.unregister(t):F(t,!1)}},[t,s,c,o]),v.useEffect(()=>{s._setDisabledField({disabled:n,name:t})},[n,t,s]),v.useMemo(()=>({field:k,formState:d,fieldState:C}),[k,d,C])}const Gt=e=>e.render(io(e));var ao=(e,r,t,n,s)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:s||!0}}:{},ge=e=>Array.isArray(e)?e:[e],an=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}};function zn(e,r){const t={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],o=r[n];if(s&&J(s)&&o){const i=zn(s,o);J(i)&&(t[n]=i)}else e[n]&&(t[n]=o)}return t}var ce=e=>J(e)&&!Object.keys(e).length,Xr=e=>e.type==="file",Fe=e=>typeof e=="function",Jt=e=>{if(!Ur)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},qn=e=>e.type==="select-multiple",Kr=e=>e.type==="radio",lo=e=>Kr(e)||Bt(e),pr=e=>Jt(e)&&e.isConnected;function co(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=Q(e)?n++:e[r[n++]];return e}function uo(e){for(const r in e)if(e.hasOwnProperty(r)&&!Q(e[r]))return!1;return!0}function G(e,r){const t=Array.isArray(r)?r:or(r)?[r]:Hr(r),n=t.length===1?e:co(e,t),s=t.length-1,o=t[s];return n&&delete n[o],s!==0&&(J(n)&&ce(n)||Array.isArray(n)&&uo(n))&&G(e,t.slice(0,-1)),e}var fo=e=>{for(const r in e)if(Fe(e[r]))return!0;return!1};function $n(e){return Array.isArray(e)||J(e)&&!fo(e)}function Tr(e,r={}){for(const t in e){const n=e[t];$n(n)?(r[t]=Array.isArray(n)?[]:{},Tr(n,r[t])):Q(n)||(r[t]=!0)}return r}function ut(e,r,t){t||(t=Tr(r));for(const n in e){const s=e[n];if($n(s))Q(r)||Vr(t[n])?t[n]=Tr(s,Array.isArray(s)?[]:{}):ut(s,fe(r)?{}:r[n],t[n]);else{const o=r[n];t[n]=!Re(s,o)}}return t}const ln={value:!1,isValid:!1},cn={value:!0,isValid:!0};var Un=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Q(e[0].attributes.value)?Q(e[0].value)||e[0].value===""?cn:{value:e[0].value,isValid:!0}:cn:ln}return ln},Hn=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>Q(e)?e:r?e===""?NaN:e&&+e:t&&we(e)?new Date(e):n?n(e):e;const un={isValid:!1,value:null};var Wn=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,un):un;function dn(e){const r=e.ref;return Xr(r)?r.files:Kr(r)?Wn(e.refs).value:qn(r)?[...r.selectedOptions].map(({value:t})=>t):Bt(r)?Un(e.refs).value:Hn(Q(r.value)?e.ref.value:r.value,e)}var go=(e,r,t,n)=>{const s={};for(const o of e){const i=A(r,o);i&&H(s,o,i._f)}return{criteriaMode:t,names:[...e],fields:s,shouldUseNativeValidation:n}},Zt=e=>e instanceof RegExp,Rt=e=>Q(e)?e:Zt(e)?e.source:J(e)?Zt(e.value)?e.value.source:e.value:e,ft=e=>({isOnSubmit:!e||e===De.onSubmit,isOnBlur:e===De.onBlur,isOnChange:e===De.onChange,isOnAll:e===De.all,isOnTouch:e===De.onTouched});const fn="AsyncFunction";var ho=e=>!!e&&!!e.validate&&!!(Fe(e.validate)&&e.validate.constructor.name===fn||J(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===fn)),mo=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Or=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const ht=(e,r,t,n)=>{for(const s of t||Object.keys(e)){const o=A(e,s);if(o){const{_f:i,...a}=o;if(i){if(i.refs&&i.refs[0]&&r(i.refs[0],s)&&!n)return!0;if(i.ref&&r(i.ref,i.name)&&!n)return!0;if(ht(a,r))break}else if(J(a)&&ht(a,r))break}}};function gn(e,r,t){const n=A(e,t);if(n||or(t))return{error:n,name:t};const s=t.split(".");for(;s.length;){const o=s.join("."),i=A(r,o),a=A(e,o);if(i&&!Array.isArray(i)&&t!==o)return{name:t};if(a&&a.type)return{name:o,error:a};if(a&&a.root&&a.root.type)return{name:`${o}.root`,error:a.root};s.pop()}return{name:t}}var po=(e,r,t,n)=>{t(e);const{name:s,...o}=e;return ce(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(i=>r[i]===(!n||De.all))},vo=(e,r,t)=>!e||!r||e===r||ge(e).some(n=>n&&(t?n===r:n.startsWith(r)||r.startsWith(n))),bo=(e,r,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(r||e):(t?n.isOnBlur:s.isOnBlur)?!e:(t?n.isOnChange:s.isOnChange)?e:!0,yo=(e,r)=>!ir(A(e,r)).length&&G(e,r),Qn=(e,r,t)=>{const n=ge(A(e,t));return H(n,"root",r[t]),H(e,t,n),e};function hn(e,r,t="validate"){if(we(e)||Array.isArray(e)&&e.every(we)||xe(e)&&!e)return{type:t,message:we(e)?e:"",ref:r}}var ct=e=>J(e)&&!Zt(e)?e:{value:e,message:""},jr=async(e,r,t,n,s,o)=>{const{ref:i,refs:a,required:c,maxLength:u,minLength:f,min:d,max:h,pattern:x,validate:R,name:C,valueAsNumber:_,mount:M}=e._f,S=A(t,C);if(!M||r.has(C))return{};const k=a?a[0]:i,y=O=>{s&&k.reportValidity&&(k.setCustomValidity(xe(O)?"":O||""),k.reportValidity())},w={},F=Kr(i),N=Bt(i),T=F||N,L=(_||Xr(i))&&Q(i.value)&&Q(S)||Jt(i)&&i.value===""||S===""||Array.isArray(S)&&!S.length,W=ao.bind(null,C,n,w),P=(O,j,$,Y=ze.maxLength,Z=ze.minLength)=>{const K=O?j:$;w[C]={type:O?Y:Z,message:K,ref:i,...W(O?Y:Z,K)}};if(o?!Array.isArray(S)||!S.length:c&&(!T&&(L||fe(S))||xe(S)&&!S||N&&!Un(a).isValid||F&&!Wn(a).isValid)){const{value:O,message:j}=we(c)?{value:!!c,message:c}:ct(c);if(O&&(w[C]={type:ze.required,message:j,ref:k,...W(ze.required,j)},!n))return y(j),w}if(!L&&(!fe(d)||!fe(h))){let O,j;const $=ct(h),Y=ct(d);if(!fe(S)&&!isNaN(S)){const Z=i.valueAsNumber||S&&+S;fe($.value)||(O=Z>$.value),fe(Y.value)||(j=Z<Y.value)}else{const Z=i.valueAsDate||new Date(S),K=ke=>new Date(new Date().toDateString()+" "+ke),Ne=i.type=="time",ie=i.type=="week";we($.value)&&S&&(O=Ne?K(S)>K($.value):ie?S>$.value:Z>new Date($.value)),we(Y.value)&&S&&(j=Ne?K(S)<K(Y.value):ie?S<Y.value:Z<new Date(Y.value))}if((O||j)&&(P(!!O,$.message,Y.message,ze.max,ze.min),!n))return y(w[C].message),w}if((u||f)&&!L&&(we(S)||o&&Array.isArray(S))){const O=ct(u),j=ct(f),$=!fe(O.value)&&S.length>+O.value,Y=!fe(j.value)&&S.length<+j.value;if(($||Y)&&(P($,O.message,j.message),!n))return y(w[C].message),w}if(x&&!L&&we(S)){const{value:O,message:j}=ct(x);if(Zt(O)&&!S.match(O)&&(w[C]={type:ze.pattern,message:j,ref:i,...W(ze.pattern,j)},!n))return y(j),w}if(R){if(Fe(R)){const O=await R(S,t),j=hn(O,k);if(j&&(w[C]={...j,...W(ze.validate,j.message)},!n))return y(j.message),w}else if(J(R)){let O={};for(const j in R){if(!ce(O)&&!n)break;const $=hn(await R[j](S,t),k,j);$&&(O={...$,...W(j,$.message)},y($.message),n&&(w[C]=O))}if(!ce(O)&&(w[C]={ref:k,...O},!n))return w}}return y(!0),w};const xo={mode:De.onSubmit,reValidateMode:De.onChange,shouldFocusError:!0};function wo(e={}){let r={...xo,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Fe(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},n={},s=J(r.defaultValues)||J(r.values)?X(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:X(s),i={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...f};const h={array:an(),state:an()},x=r.criteriaMode===De.all,R=l=>g=>{clearTimeout(u),u=setTimeout(l,g)},C=async l=>{if(!r.disabled&&(f.isValid||d.isValid||l)){const g=r.resolver?ce((await N()).errors):await L(n,!0);g!==t.isValid&&h.state.next({isValid:g})}},_=(l,g)=>{!r.disabled&&(f.isValidating||f.validatingFields||d.isValidating||d.validatingFields)&&((l||Array.from(a.mount)).forEach(p=>{p&&(g?H(t.validatingFields,p,g):G(t.validatingFields,p))}),h.state.next({validatingFields:t.validatingFields,isValidating:!ce(t.validatingFields)}))},M=(l,g=[],p,I,D=!0,E=!0)=>{if(I&&p&&!r.disabled){if(i.action=!0,E&&Array.isArray(A(n,l))){const V=p(A(n,l),I.argA,I.argB);D&&H(n,l,V)}if(E&&Array.isArray(A(t.errors,l))){const V=p(A(t.errors,l),I.argA,I.argB);D&&H(t.errors,l,V),yo(t.errors,l)}if((f.touchedFields||d.touchedFields)&&E&&Array.isArray(A(t.touchedFields,l))){const V=p(A(t.touchedFields,l),I.argA,I.argB);D&&H(t.touchedFields,l,V)}(f.dirtyFields||d.dirtyFields)&&(t.dirtyFields=ut(s,o)),h.state.next({name:l,isDirty:P(l,g),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else H(o,l,g)},S=(l,g)=>{H(t.errors,l,g),h.state.next({errors:t.errors})},k=l=>{t.errors=l,h.state.next({errors:t.errors,isValid:!1})},y=(l,g,p,I)=>{const D=A(n,l);if(D){const E=A(o,l,Q(p)?A(s,l):p);Q(E)||I&&I.defaultChecked||g?H(o,l,g?E:dn(D._f)):$(l,E),i.mount&&!i.action&&C()}},w=(l,g,p,I,D)=>{let E=!1,V=!1;const B={name:l};if(!r.disabled){if(!p||I){(f.isDirty||d.isDirty)&&(V=t.isDirty,t.isDirty=B.isDirty=P(),E=V!==B.isDirty);const q=Re(A(s,l),g);V=!!A(t.dirtyFields,l),q?G(t.dirtyFields,l):H(t.dirtyFields,l,!0),B.dirtyFields=t.dirtyFields,E=E||(f.dirtyFields||d.dirtyFields)&&V!==!q}if(p){const q=A(t.touchedFields,l);q||(H(t.touchedFields,l,p),B.touchedFields=t.touchedFields,E=E||(f.touchedFields||d.touchedFields)&&q!==p)}E&&D&&h.state.next(B)}return E?B:{}},F=(l,g,p,I)=>{const D=A(t.errors,l),E=(f.isValid||d.isValid)&&xe(g)&&t.isValid!==g;if(r.delayError&&p?(c=R(()=>S(l,p)),c(r.delayError)):(clearTimeout(u),c=null,p?H(t.errors,l,p):G(t.errors,l)),(p?!Re(D,p):D)||!ce(I)||E){const V={...I,...E&&xe(g)?{isValid:g}:{},errors:t.errors,name:l};t={...t,...V},h.state.next(V)}},N=async l=>{_(l,!0);const g=await r.resolver(o,r.context,go(l||a.mount,n,r.criteriaMode,r.shouldUseNativeValidation));return _(l),g},T=async l=>{const{errors:g}=await N(l);if(l)for(const p of l){const I=A(g,p);I?H(t.errors,p,I):G(t.errors,p)}else t.errors=g;return g},L=async(l,g,p={valid:!0})=>{for(const I in l){const D=l[I];if(D){const{_f:E,...V}=D;if(E){const B=a.array.has(E.name),q=D._f&&ho(D._f);q&&f.validatingFields&&_([E.name],!0);const re=await jr(D,a.disabled,o,x,r.shouldUseNativeValidation&&!g,B);if(q&&f.validatingFields&&_([E.name]),re[E.name]&&(p.valid=!1,g))break;!g&&(A(re,E.name)?B?Qn(t.errors,re,E.name):H(t.errors,E.name,re[E.name]):G(t.errors,E.name))}!ce(V)&&await L(V,g,p)}}return p.valid},W=()=>{for(const l of a.unMount){const g=A(n,l);g&&(g._f.refs?g._f.refs.every(p=>!pr(p)):!pr(g._f.ref))&&Ue(l)}a.unMount=new Set},P=(l,g)=>!r.disabled&&(l&&g&&H(o,l,g),!Re(ke(),s)),O=(l,g,p)=>Mr(l,a,{...i.mount?o:Q(g)?s:we(l)?{[l]:g}:g},p,g),j=l=>ir(A(i.mount?o:s,l,r.shouldUnregister?A(s,l,[]):[])),$=(l,g,p={})=>{const I=A(n,l);let D=g;if(I){const E=I._f;E&&(!E.disabled&&H(o,l,Hn(g,E)),D=Jt(E.ref)&&fe(g)?"":g,qn(E.ref)?[...E.ref.options].forEach(V=>V.selected=D.includes(V.value)):E.refs?Bt(E.ref)?E.refs.forEach(V=>{(!V.defaultChecked||!V.disabled)&&(Array.isArray(D)?V.checked=!!D.find(B=>B===V.value):V.checked=D===V.value||!!D)}):E.refs.forEach(V=>V.checked=V.value===D):Xr(E.ref)?E.ref.value="":(E.ref.value=D,E.ref.type||h.state.next({name:l,values:X(o)})))}(p.shouldDirty||p.shouldTouch)&&w(l,D,p.shouldTouch,p.shouldDirty,!0),p.shouldValidate&&ie(l)},Y=(l,g,p)=>{for(const I in g){if(!g.hasOwnProperty(I))return;const D=g[I],E=l+"."+I,V=A(n,E);(a.array.has(l)||J(D)||V&&!V._f)&&!st(D)?Y(E,D,p):$(E,D,p)}},Z=(l,g,p={})=>{const I=A(n,l),D=a.array.has(l),E=X(g);H(o,l,E),D?(h.array.next({name:l,values:X(o)}),(f.isDirty||f.dirtyFields||d.isDirty||d.dirtyFields)&&p.shouldDirty&&h.state.next({name:l,dirtyFields:ut(s,o),isDirty:P(l,E)})):I&&!I._f&&!fe(E)?Y(l,E,p):$(l,E,p),Or(l,a)&&h.state.next({...t,name:l}),h.state.next({name:i.mount?l:void 0,values:X(o)})},K=async l=>{i.mount=!0;const g=l.target;let p=g.name,I=!0;const D=A(n,p),E=q=>{I=Number.isNaN(q)||st(q)&&isNaN(q.getTime())||Re(q,A(o,p,q))},V=ft(r.mode),B=ft(r.reValidateMode);if(D){let q,re;const rt=g.type?dn(D._f):Ln(l),se=l.type===Yt.BLUR||l.type===Yt.FOCUS_OUT,Ht=!mo(D._f)&&!r.resolver&&!A(t.errors,p)&&!D._f.deps||bo(se,A(t.touchedFields,p),t.isSubmitted,B,V),xt=Or(p,a,se);H(o,p,rt),se?(!g||!g.readOnly)&&(D._f.onBlur&&D._f.onBlur(l),c&&c(0)):D._f.onChange&&D._f.onChange(l);const wt=w(p,rt,se),_t=!ce(wt)||xt;if(!se&&h.state.next({name:p,type:l.type,values:X(o)}),Ht)return(f.isValid||d.isValid)&&(r.mode==="onBlur"?se&&C():se||C()),_t&&h.state.next({name:p,...xt?{}:wt});if(!se&&xt&&h.state.next({...t}),r.resolver){const{errors:Ct}=await N([p]);if(E(rt),I){const hr=gn(t.errors,n,p),St=gn(Ct,n,hr.name||p);q=St.error,p=St.name,re=ce(Ct)}}else _([p],!0),q=(await jr(D,a.disabled,o,x,r.shouldUseNativeValidation))[p],_([p]),E(rt),I&&(q?re=!1:(f.isValid||d.isValid)&&(re=await L(n,!0)));I&&(D._f.deps&&(!Array.isArray(D._f.deps)||D._f.deps.length>0)&&ie(D._f.deps),F(p,re,q,wt))}},Ne=(l,g)=>{if(A(t.errors,g)&&l.focus)return l.focus(),1},ie=async(l,g={})=>{let p,I;const D=ge(l);if(r.resolver){const E=await T(Q(l)?l:D);p=ce(E),I=l?!D.some(V=>A(E,V)):p}else l?(I=(await Promise.all(D.map(async E=>{const V=A(n,E);return await L(V&&V._f?{[E]:V}:V)}))).every(Boolean),!(!I&&!t.isValid)&&C()):I=p=await L(n);return h.state.next({...!we(l)||(f.isValid||d.isValid)&&p!==t.isValid?{}:{name:l},...r.resolver||!l?{isValid:p}:{},errors:t.errors}),g.shouldFocus&&!I&&ht(n,Ne,l?D:a.mount),I},ke=(l,g)=>{let p={...i.mount?o:s};return g&&(p=zn(g.dirtyFields?t.dirtyFields:t.touchedFields,p)),Q(l)?p:we(l)?A(p,l):l.map(I=>A(p,I))},et=(l,g)=>({invalid:!!A((g||t).errors,l),isDirty:!!A((g||t).dirtyFields,l),error:A((g||t).errors,l),isValidating:!!A(t.validatingFields,l),isTouched:!!A((g||t).touchedFields,l)}),ae=l=>{l&&ge(l).forEach(g=>G(t.errors,g)),h.state.next({errors:l?t.errors:{}})},_e=(l,g,p)=>{const I=(A(n,l,{_f:{}})._f||{}).ref,D=A(t.errors,l)||{},{ref:E,message:V,type:B,...q}=D;H(t.errors,l,{...q,...g,ref:I}),h.state.next({name:l,errors:t.errors,isValid:!1}),p&&p.shouldFocus&&I&&I.focus&&I.focus()},Le=(l,g)=>Fe(l)?h.state.subscribe({next:p=>"values"in p&&l(O(void 0,g),p)}):O(l,g,!0),$e=l=>h.state.subscribe({next:g=>{vo(l.name,g.name,l.exact)&&po(g,l.formState||f,Ut,l.reRenderRoot)&&l.callback({values:{...o},...t,...g,defaultValues:s})}}).unsubscribe,ue=l=>(i.mount=!0,d={...d,...l.formState},$e({...l,formState:d})),Ue=(l,g={})=>{for(const p of l?ge(l):a.mount)a.mount.delete(p),a.array.delete(p),g.keepValue||(G(n,p),G(o,p)),!g.keepError&&G(t.errors,p),!g.keepDirty&&G(t.dirtyFields,p),!g.keepTouched&&G(t.touchedFields,p),!g.keepIsValidating&&G(t.validatingFields,p),!r.shouldUnregister&&!g.keepDefaultValue&&G(s,p);h.state.next({values:X(o)}),h.state.next({...t,...g.keepDirty?{isDirty:P()}:{}}),!g.keepIsValid&&C()},Ae=({disabled:l,name:g})=>{(xe(l)&&i.mount||l||a.disabled.has(g))&&(l?a.disabled.add(g):a.disabled.delete(g))},me=(l,g={})=>{let p=A(n,l);const I=xe(g.disabled)||xe(r.disabled);return H(n,l,{...p||{},_f:{...p&&p._f?p._f:{ref:{name:l}},name:l,mount:!0,...g}}),a.mount.add(l),p?Ae({disabled:xe(g.disabled)?g.disabled:r.disabled,name:l}):y(l,!0,g.value),{...I?{disabled:g.disabled||r.disabled}:{},...r.progressive?{required:!!g.required,min:Rt(g.min),max:Rt(g.max),minLength:Rt(g.minLength),maxLength:Rt(g.maxLength),pattern:Rt(g.pattern)}:{},name:l,onChange:K,onBlur:K,ref:D=>{if(D){me(l,g),p=A(n,l);const E=Q(D.value)&&D.querySelectorAll&&D.querySelectorAll("input,select,textarea")[0]||D,V=lo(E),B=p._f.refs||[];if(V?B.find(q=>q===E):E===p._f.ref)return;H(n,l,{_f:{...p._f,...V?{refs:[...B.filter(pr),E,...Array.isArray(A(s,l))?[{}]:[]],ref:{type:E.type,name:l}}:{ref:E}}}),y(l,!1,void 0,E)}else p=A(n,l,{}),p._f&&(p._f.mount=!1),(r.shouldUnregister||g.shouldUnregister)&&!(Bn(a.array,l)&&i.action)&&a.unMount.add(l)}}},U=()=>r.shouldFocusError&&ht(n,Ne,a.mount),tt=l=>{xe(l)&&(h.state.next({disabled:l}),ht(n,(g,p)=>{const I=A(n,p);I&&(g.disabled=I._f.disabled||l,Array.isArray(I._f.refs)&&I._f.refs.forEach(D=>{D.disabled=I._f.disabled||l}))},0,!1))},pe=(l,g)=>async p=>{let I;p&&(p.preventDefault&&p.preventDefault(),p.persist&&p.persist());let D=X(o);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:E,values:V}=await N();t.errors=E,D=X(V)}else await L(n);if(a.disabled.size)for(const E of a.disabled)G(D,E);if(G(t.errors,"root"),ce(t.errors)){h.state.next({errors:{}});try{await l(D,p)}catch(E){I=E}}else g&&await g({...t.errors},p),U(),setTimeout(U);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ce(t.errors)&&!I,submitCount:t.submitCount+1,errors:t.errors}),I)throw I},He=(l,g={})=>{A(n,l)&&(Q(g.defaultValue)?Z(l,X(A(s,l))):(Z(l,g.defaultValue),H(s,l,X(g.defaultValue))),g.keepTouched||G(t.touchedFields,l),g.keepDirty||(G(t.dirtyFields,l),t.isDirty=g.defaultValue?P(l,X(A(s,l))):P()),g.keepError||(G(t.errors,l),f.isValid&&C()),h.state.next({...t}))},Ce=(l,g={})=>{const p=l?X(l):s,I=X(p),D=ce(l),E=D?s:I;if(g.keepDefaultValues||(s=p),!g.keepValues){if(g.keepDirtyValues){const V=new Set([...a.mount,...Object.keys(ut(s,o))]);for(const B of Array.from(V))A(t.dirtyFields,B)?H(E,B,A(o,B)):Z(B,A(E,B))}else{if(Ur&&Q(l))for(const V of a.mount){const B=A(n,V);if(B&&B._f){const q=Array.isArray(B._f.refs)?B._f.refs[0]:B._f.ref;if(Jt(q)){const re=q.closest("form");if(re){re.reset();break}}}}if(g.keepFieldsRef)for(const V of a.mount)Z(V,A(E,V));else n={}}o=r.shouldUnregister?g.keepDefaultValues?X(s):{}:X(E),h.array.next({values:{...E}}),h.state.next({values:{...E}})}a={mount:g.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!f.isValid||!!g.keepIsValid||!!g.keepDirtyValues||!r.shouldUnregister&&!ce(E),i.watch=!!r.shouldUnregister,i.action=!1,g.keepErrors||(t.errors={}),h.state.next({submitCount:g.keepSubmitCount?t.submitCount:0,isDirty:D?!1:g.keepDirty?t.isDirty:!!(g.keepDefaultValues&&!Re(l,s)),isSubmitted:g.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:D?{}:g.keepDirtyValues?g.keepDefaultValues&&o?ut(s,o):t.dirtyFields:g.keepDefaultValues&&l?ut(s,l):g.keepDirty?t.dirtyFields:{},touchedFields:g.keepTouched?t.touchedFields:{},errors:g.keepErrors?t.errors:{},isSubmitSuccessful:g.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Be=(l,g)=>Ce(Fe(l)?l(o):l,g),We=(l,g={})=>{const p=A(n,l),I=p&&p._f;if(I){const D=I.refs?I.refs[0]:I.ref;D.focus&&(D.focus(),g.shouldSelect&&Fe(D.select)&&D.select())}},Ut=l=>{t={...t,...l}},at={control:{register:me,unregister:Ue,getFieldState:et,handleSubmit:pe,setError:_e,_subscribe:$e,_runSchema:N,_focusError:U,_getWatch:O,_getDirty:P,_setValid:C,_setFieldArray:M,_setDisabledField:Ae,_setErrors:k,_getFieldArray:j,_reset:Ce,_resetDefaultValues:()=>Fe(r.defaultValues)&&r.defaultValues().then(l=>{Be(l,r.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:tt,_subjects:h,_proxyFormState:f,get _fields(){return n},get _formValues(){return o},get _state(){return i},set _state(l){i=l},get _defaultValues(){return s},get _names(){return a},set _names(l){a=l},get _formState(){return t},get _options(){return r},set _options(l){r={...r,...l}}},subscribe:ue,trigger:ie,register:me,handleSubmit:pe,watch:Le,setValue:Z,getValues:ke,reset:Be,resetField:He,clearErrors:ae,unregister:Ue,setError:_e,setFocus:We,getFieldState:et};return{...at,formControl:at}}var Ye=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(Math.random()*16+e)%16|0;return(r=="x"?t:t&3|8).toString(16)})},vr=(e,r,t={})=>t.shouldFocus||Q(t.shouldFocus)?t.focusName||`${e}.${Q(t.focusIndex)?r:t.focusIndex}.`:"",br=(e,r)=>[...e,...ge(r)],yr=e=>Array.isArray(e)?e.map(()=>{}):void 0;function xr(e,r,t){return[...e.slice(0,r),...ge(t),...e.slice(r)]}var wr=(e,r,t)=>Array.isArray(e)?(Q(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],_r=(e,r)=>[...ge(r),...ge(e)];function _o(e,r){let t=0;const n=[...e];for(const s of r)n.splice(s-t,1),t++;return ir(n).length?n:[]}var Cr=(e,r)=>Q(r)?[]:_o(e,ge(r).sort((t,n)=>t-n)),Sr=(e,r,t)=>{[e[r],e[t]]=[e[t],e[r]]},mn=(e,r,t)=>(e[r]=t,e);function Xn(e){const r=Ze(),{control:t=r.control,name:n,keyName:s="id",shouldUnregister:o,rules:i}=e,[a,c]=v.useState(t._getFieldArray(n)),u=v.useRef(t._getFieldArray(n).map(Ye)),f=v.useRef(!1);t._names.array.add(n),v.useMemo(()=>i&&a.length>=0&&t.register(n,i),[t,n,a.length,i]),ar(()=>t._subjects.array.subscribe({next:({values:y,name:w})=>{if(w===n||!w){const F=A(y,n);Array.isArray(F)&&(c(F),u.current=F.map(Ye))}}}).unsubscribe,[t,n]);const d=v.useCallback(y=>{f.current=!0,t._setFieldArray(n,y)},[t,n]),h=(y,w)=>{const F=ge(X(y)),N=br(t._getFieldArray(n),F);t._names.focus=vr(n,N.length-1,w),u.current=br(u.current,F.map(Ye)),d(N),c(N),t._setFieldArray(n,N,br,{argA:yr(y)})},x=(y,w)=>{const F=ge(X(y)),N=_r(t._getFieldArray(n),F);t._names.focus=vr(n,0,w),u.current=_r(u.current,F.map(Ye)),d(N),c(N),t._setFieldArray(n,N,_r,{argA:yr(y)})},R=y=>{const w=Cr(t._getFieldArray(n),y);u.current=Cr(u.current,y),d(w),c(w),!Array.isArray(A(t._fields,n))&&H(t._fields,n,void 0),t._setFieldArray(n,w,Cr,{argA:y})},C=(y,w,F)=>{const N=ge(X(w)),T=xr(t._getFieldArray(n),y,N);t._names.focus=vr(n,y,F),u.current=xr(u.current,y,N.map(Ye)),d(T),c(T),t._setFieldArray(n,T,xr,{argA:y,argB:yr(w)})},_=(y,w)=>{const F=t._getFieldArray(n);Sr(F,y,w),Sr(u.current,y,w),d(F),c(F),t._setFieldArray(n,F,Sr,{argA:y,argB:w},!1)},M=(y,w)=>{const F=t._getFieldArray(n);wr(F,y,w),wr(u.current,y,w),d(F),c(F),t._setFieldArray(n,F,wr,{argA:y,argB:w},!1)},S=(y,w)=>{const F=X(w),N=mn(t._getFieldArray(n),y,F);u.current=[...N].map((T,L)=>!T||L===y?Ye():u.current[L]),d(N),c([...N]),t._setFieldArray(n,N,mn,{argA:y,argB:F},!0,!1)},k=y=>{const w=ge(X(y));u.current=w.map(Ye),d([...w]),c([...w]),t._setFieldArray(n,[...w],F=>F,{},!0,!1)};return v.useEffect(()=>{if(t._state.action=!1,Or(n,t._names)&&t._subjects.state.next({...t._formState}),f.current&&(!ft(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!ft(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([n]).then(y=>{const w=A(y.errors,n),F=A(t._formState.errors,n);(F?!w&&F.type||w&&(F.type!==w.type||F.message!==w.message):w&&w.type)&&(w?H(t._formState.errors,n,w):G(t._formState.errors,n),t._subjects.state.next({errors:t._formState.errors}))});else{const y=A(t._fields,n);y&&y._f&&!(ft(t._options.reValidateMode).isOnSubmit&&ft(t._options.mode).isOnSubmit)&&jr(y,t._names.disabled,t._formValues,t._options.criteriaMode===De.all,t._options.shouldUseNativeValidation,!0).then(w=>!ce(w)&&t._subjects.state.next({errors:Qn(t._formState.errors,w,n)}))}t._subjects.state.next({name:n,values:X(t._formValues)}),t._names.focus&&ht(t._fields,(y,w)=>{if(t._names.focus&&w.startsWith(t._names.focus)&&y.focus)return y.focus(),1}),t._names.focus="",t._setValid(),f.current=!1},[a,n,t]),v.useEffect(()=>(!A(t._formValues,n)&&t._setFieldArray(n),()=>{const y=(w,F)=>{const N=A(t._fields,w);N&&N._f&&(N._f.mount=F)};t._options.shouldUnregister||o?t.unregister(n):y(n,!1)}),[n,t,s,o]),{swap:v.useCallback(_,[d,n,t]),move:v.useCallback(M,[d,n,t]),prepend:v.useCallback(x,[d,n,t]),append:v.useCallback(h,[d,n,t]),remove:v.useCallback(R,[d,n,t]),insert:v.useCallback(C,[d,n,t]),update:v.useCallback(S,[d,n,t]),replace:v.useCallback(k,[d,n,t]),fields:v.useMemo(()=>a.map((y,w)=>({...y,[s]:u.current[w]||Ye()})),[a,s])}}function Co(e={}){const r=v.useRef(void 0),t=v.useRef(void 0),[n,s]=v.useState({isDirty:!1,isValidating:!1,isLoading:Fe(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Fe(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:n},e.defaultValues&&!Fe(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...a}=wo(e);r.current={...a,formState:n}}const o=r.current.control;return o._options=e,ar(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),o._formState.isReady=!0,i},[o]),v.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),v.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),v.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),v.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),v.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==n.isDirty&&o._subjects.state.next({isDirty:i})}},[o,n.isDirty]),v.useEffect(()=>{var i;e.values&&!Re(e.values,t.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((i=o._options.resetOptions)===null||i===void 0)&&i.keepIsValid||o._setValid(),t.current=e.values,s(a=>({...a}))):o._resetDefaultValues()},[o,e.values]),v.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),r.current.formState=Pn(n,o),r.current}const So=e=>(r="")=>{if(!r)return e("validation.required");if(r.length<50)return e("validation.min_length",{value:50});const t=r.replace(/<[^>]*>?/gm,"").replace(/\n\s*\n/g,`
`).length;return t>3e3?e("validation.length_limit",{value:t-3e3}):!0},Er=e=>{let r="";if(e){const t=e.split("/");r=t[t.length-1]}return r},Eo=e=>({title:e.title,description:e.description,loadedImg:e.poster,poster:Er(e.poster),questions:e.questions.map(r=>({image:Er(r.image),text:r.text,loadedImg:r.image,field:r.field||"text",options:r.options.map(t=>({text:t.text,image:Er(t.image),loadedImg:t.image,isCorrect:t.isCorrect}))}))}),Do=async e=>(await sr.post("/quiz",e))?.data,Ao=()=>{const e=kn();return Vn({mutationFn:Do,onSuccess:()=>{e.invalidateQueries({queryKey:["getQuizList",{type:"my"}]})}})},Ro=async(e,r)=>(await sr.patch(`/quiz/${e}`,r))?.data,Fo=e=>{const r=kn();return Vn({mutationFn:t=>Ro(e,t),onSuccess:()=>{r.invalidateQueries({queryKey:["getQuiz",e]}),r.invalidateQueries({queryKey:["getQuizList",{type:"my"}]})}})},Io=(e,r)=>{const{mutateAsync:t}=Ao(),{mutateAsync:n}=Fo(e?.id),s=Co({defaultValues:e?Eo(e):{}}),o=async i=>{try{if(r){const c=await n({...i,limitedByTime:!1});on(`/quiz/${c.id}`);return}const a=await t({...i,limitedByTime:!1});on(`/quiz/${a.id}`)}catch(a){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ / Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚ÐµÑÑ‚Ð°",a)}};return{...s,onSubmit:s.handleSubmit(o)}},No="_footer_1eaut_1",ko="_footerShow_1eaut_18",Mo="_button_1eaut_22",Dr={footer:No,footerShow:ko,button:Mo},Vo=e=>{const[r,t]=m.useState(!0);return m.useEffect(()=>{const n=()=>{const o=document.activeElement?.tagName==="INPUT"&&document.activeElement?.getAttribute("type")!=="file",i=document.activeElement?.tagName==="TEXTAREA",a=e.current&&(o||i)&&e.current.contains(document.activeElement);t(!a)},s=e.current;return s&&(s.addEventListener("focusin",n),s.addEventListener("focusout",n)),()=>{s&&(s.removeEventListener("focusin",n),s.removeEventListener("focusout",n))}},[]),{isShow:r}},To=document.getElementById("footer"),Oo=({isEdit:e,formRef:r,isDisabled:t,isLoading:n,onSubmit:s})=>{const{t:o}=Je(),{isShow:i}=Vo(r);return dt.createPortal(b.jsxs("div",{className:Mn(Dr.footer,i&&Dr.footerShow),children:[t&&b.jsx(Te,{className:"text-center",children:o("create_page.check_fields")}),b.jsx(it,{className:Dr.button,loading:n,disabled:t,type:"submit",onClick:s,after:b.jsx(Hs,{}),children:e?"Ð’Ð½ÐµÑÑ‚Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ":o("common.create")})]}),To)},ot=e=>({title:{required:e("validation.required"),minLength:{value:7,message:e("validation.min_length",{value:7})},maxLength:{value:50,message:e("validation.max_length",{value:50})}},description:{required:e("validation.required"),minLength:{value:100,message:e("validation.min_length",{value:100})}},questions:{required:e("validation.questions.required"),minLength:{value:2,message:e("validation.questions.min_length",{value:2})}},question:{required:e("validation.required"),minLength:{value:7,message:e("validation.min_length",{value:7})},maxLength:{value:100,message:e("validation.max_length",{value:100})}},options:{required:e("validation.options.required"),minLength:{value:2,message:e("validation.options.min_length",{value:2})}},option:{required:e("validation.required"),minLength:{value:1,message:e("validation.min_length",{value:1})},maxLength:{value:100,message:e("validation.max_length",{value:100})}}});var te=function(){return te=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},te.apply(this,arguments)};function lr(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]]);return t}function pn(e){if(e){var r=e.textContent,t=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/;e.style.direction=r&&t.test(r[0])?"rtl":"ltr"}}function Kn(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.filter(Boolean).join(" ")}function jo(){if(document.selection)return document.selection.createRange().parentElement();var e=window.getSelection();if(e&&e.rangeCount>0)return e.getRangeAt(0).startContainer.parentNode||void 0}function vn(e){return typeof e=="string"?e.replace(/&nbsp;|\u202F|\u00A0/g," ").replace(/<br \/>/g,"<br>"):String(e)}function Lo(e){var r=document.createTextNode("");e.appendChild(r);var t=document.activeElement===e;if(r!==null&&r.nodeValue!==null&&t){var n=window.getSelection();if(n!==null){var s=document.createRange();s.setStart(r,r.nodeValue.length),s.collapse(!0),n.removeAllRanges(),n.addRange(s)}e instanceof HTMLElement&&e.focus()}}function Yn(e,r){typeof r=="function"?r(e):typeof r=="object"&&r&&(r.current=e)}var Bo=v.memo(v.forwardRef(function(r,t){var n=r.className,s=r.disabled,o=r.tagName,i=r.value,a=i===void 0?"":i,c=r.placeholder,u=lr(r,["className","disabled","tagName","value","placeholder"]),f=v.useRef(null),d=v.useRef(a),h=v.useRef(u);return v.useEffect(function(){h.current=u;var x=f.current;x&&vn(d.current)!==vn(a)&&(d.current=a,x.innerHTML=a,Lo(x))}),v.useMemo(function(){function x(_){f.current=_,pn(_),Yn(_,t)}function R(_){var M,S,k=f.current;if(k){var y=k.innerHTML;y!==d.current&&((S=(M=h.current).onChange)===null||S===void 0||S.call(M,te(te({},_),{target:{value:y,name:u.name}}))),pn(k),d.current=y}}var C=Kn("rsw-ce",n);return v.createElement(o||"div",te(te({},u),{className:C,contentEditable:!s,dangerouslySetInnerHTML:{__html:a},onBlur:function(_){return(h.current.onBlur||R)(_)},onInput:R,onKeyDown:function(_){return(h.current.onKeyDown||R)(_)},onKeyUp:function(_){return(h.current.onKeyUp||R)(_)},placeholder:c,ref:x}))},[n,s,c,o])})),Gn=v.createContext(void 0);function Po(e){var r=e.children,t=v.useState({htmlMode:!1,update:o}),n=t[0],s=t[1];function o(i){s(function(a){return te(te({},a),i)})}return v.createElement(Gn.Provider,{value:n},r)}function Pt(){var e=v.useContext(Gn);if(!e)throw new Error("You should wrap your component by EditorProvider");return e}var bn=[],Ft=[];function zo(e,r){if(e&&typeof document<"u"){var t,n=r.prepend===!0?"prepend":"append",s=r.singleTag===!0,o=typeof r.container=="string"?document.querySelector(r.container):document.getElementsByTagName("head")[0];if(s){var i=bn.indexOf(o);i===-1&&(i=bn.push(o)-1,Ft[i]={}),t=Ft[i]&&Ft[i][n]?Ft[i][n]:Ft[i][n]=a()}else t=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function a(){var c=document.createElement("style");if(c.setAttribute("type","text/css"),r.attributes)for(var u=Object.keys(r.attributes),f=0;f<u.length;f++)c.setAttribute(u[f],r.attributes[u[f]]);var d=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(d,c),c}}var qo=".rsw-editor{border:1px solid #ddd;border-radius:.375rem;display:flex;flex-direction:column;min-height:100px;overflow:hidden}.rsw-ce{flex:1 1 auto;overflow:auto;padding:.5rem}.rsw-ce:focus{outline:1px solid #668}.rsw-ce[contentEditable=true]:empty:not(:focus):before{color:grey;content:attr(placeholder);pointer-events:none}.rsw-html{background:transparent;border:none;font-family:monospace,Courier New}.rsw-separator{align-self:stretch;border-right:1px solid #ddd;display:flex;margin:0 3px}.rsw-dd{box-sizing:border-box;outline:none}.rsw-btn{background:transparent;border:0;color:#222;cursor:pointer;font-size:1em;height:2em;outline:none;padding:0;width:2em}.rsw-btn:hover{background:#eaeaea}.rsw-btn[data-active=true]{background:#e0e0e0}.rsw-toolbar{align-items:center;background-color:#f5f5f5;border-bottom:1px solid #ddd;display:flex}";zo(qo,{});var $o=v.forwardRef(function(r,t){var n=r.autoFocus,s=r.children,o=r.containerProps,i=r.onSelect,a=lr(r,["autoFocus","children","containerProps","onSelect"]),c=Pt();v.useEffect(function(){return document.addEventListener("click",u),function(){return document.removeEventListener("click",u)}});function u(x){var R;x.target!==c.$el&&(!((R=c.$el)===null||R===void 0)&&R.contains(x.target)||c.update({$selection:void 0}))}function f(x){i?.(x),c.update({$selection:jo()})}function d(x){c.update({$el:x}),Yn(x,t),n&&x&&c.$el===void 0&&x.focus()}var h=Kn("rsw-editor",o?.className);return c.htmlMode?v.createElement("div",te({},o,{className:h}),s,v.createElement("textarea",te({},a,{className:"rsw-ce rsw-html"}))):v.createElement("div",te({},o,{className:h}),s,v.createElement(Bo,te({},a,{ref:d,onSelect:f})))});function Uo(){return v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",style:{verticalAlign:"text-top"}},v.createElement("path",{fill:"currentColor",d:"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z"}))}function Ho(){return v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",style:{verticalAlign:"text-top"}},v.createElement("path",{fill:"currentColor",d:"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z"}))}var Jn=je("Bold","ð","bold"),Zn=je("Bullet list",v.createElement(Ho,null),"insertUnorderedList"),Wo=je("Clear formatting","TÌ²â‚“","removeFormat"),es=je("Italic","ð‘°","italic"),ts=je("Strike through",v.createElement("s",null,"ab"),"strikeThrough"),Qo=je("Link","ðŸ”—",function(e){var r=e.$selection;r?.nodeName==="A"?document.execCommand("unlink"):document.execCommand("createLink",!1,prompt("URL","")||void 0)}),rs=je("Numbered list",v.createElement(Uo,null),"insertOrderedList"),ns=je("Redo","â†·","redo"),ss=je("Underline",v.createElement("span",{style:{textDecoration:"underline"}},"ð”"),"underline"),os=je("Undo","â†¶","undo");function je(e,r,t){return n.displayName=e.replace(/\s/g,""),n;function n(s){var o=Pt(),i=o.$el,a=function(){return!!i?.contains(document.activeElement)},c=!1;typeof t=="string"&&(c=a()&&document.queryCommandState(t));function u(f){f.preventDefault(),a()||i?.focus(),typeof t=="function"?t(o):document.execCommand(t)}return o.htmlMode?null:v.createElement("button",te({className:"rsw-btn","data-active":c,onMouseDown:u,tabIndex:-1,title:e,type:"button"},s),r)}}var Xo=Ko("Styles",[["Normal","formatBlock","DIV"],["ð—›ð—²ð—®ð—±ð—²ð—¿ ðŸ­","formatBlock","H1"],["Header 2","formatBlock","H2"],["ð™²ðš˜ðšðšŽ","formatBlock","PRE"]]);function Ko(e,r){return t.displayName=e,t;function t(n){var s=Pt(),o=s.$el,i=s.$selection,a=s.htmlMode;if(a)return null;var c=r.findIndex(function(f){return f[1]==="formatBlock"&&i?.nodeName===f[2]});return v.createElement(Yo,te({},n,{items:r,onChange:u,selected:c,tabIndex:-1,title:e}));function u(f){var d=f.target,h=d.value,x=parseInt(h,10),R=r[x]||[],C=R[1],_=R[2];f.preventDefault(),document.activeElement!==o&&o?.focus(),typeof C=="function"?C(s):C&&document.execCommand(C,!1,_),setTimeout(function(){return d.value=h},10)}}}function Yo(e){var r=e.items,t=e.selected,n=lr(e,["items","selected"]);return v.createElement("select",te({className:"rsw-dd"},n,{value:t}),v.createElement("option",{hidden:!0},n.title),r.map(function(s,o){return v.createElement("option",{key:s[2],value:o},s[0])}))}function Go(e){var r=lr(e,[]),t=Pt();function n(){t.update({htmlMode:!t.htmlMode})}return v.createElement("button",te({className:"rsw-btn","data-active":t.htmlMode,onClick:n,tabIndex:-1,title:"HTML mode",type:"button"},r),"</>")}function Wt(e){var r=Pt();return r.htmlMode?null:v.createElement("div",te({className:"rsw-separator"},e))}function is(e){return v.createElement("div",te({className:"rsw-toolbar"},e))}var Jo=v.forwardRef(function(r,t){return v.createElement(Po,null,v.createElement($o,te({},r,{ref:t}),r.children||v.createElement(is,null,v.createElement(os,null),v.createElement(ns,null),v.createElement(Wt,null),v.createElement(Jn,null),v.createElement(es,null),v.createElement(ss,null),v.createElement(ts,null),v.createElement(Wt,null),v.createElement(rs,null),v.createElement(Zn,null),v.createElement(Wt,null),v.createElement(Qo,null),v.createElement(Wo,null),v.createElement(Go,null),v.createElement(Wt,null),v.createElement(Xo,null))))});const Zo="_editor_374mm_1",ei="_editorHeader_374mm_12",ti="_editorBtnWrap_374mm_25",ri="_editorBtn_374mm_25",ni="_editorBtnIcon_374mm_34",de={editor:Zo,editorHeader:ei,editorBtnWrap:ti,editorBtn:ri,editorBtnIcon:ni},si=({value:e,onChange:r,placeholder:t})=>b.jsx(b.Fragment,{children:b.jsx("div",{className:de.editor,children:b.jsx(Jo,{value:e,onChange:n=>r(n.target.value),placeholder:t,children:b.jsxs(is,{className:de.editorHeader,children:[b.jsxs("div",{className:de.editorBtnWrap,children:[b.jsx(to,{className:de.editorBtnIcon}),b.jsx(os,{className:de.editorBtn})]}),b.jsxs("div",{className:de.editorBtnWrap,children:[b.jsx(Zs,{className:de.editorBtnIcon}),b.jsx(ns,{className:de.editorBtn})]}),b.jsx(Jn,{className:de.editorBtn}),b.jsx(es,{className:de.editorBtn}),b.jsx(ss,{className:de.editorBtn}),b.jsx(ts,{className:de.editorBtn}),b.jsx(Zn,{className:de.editorBtn}),b.jsx(rs,{className:de.editorBtn})]})})})});function oi({className:e,type:r,...t}){return b.jsx("input",{type:r,"data-slot":"input",className:Os("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-lg border bg-transparent px-3 py-6 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t})}const ii=async e=>(await sr.post("/files/delete",{fileName:e}))?.data,ai=async(e,{signal:r,onProgress:t})=>(await sr.post("/files",e,{signal:r,onUploadProgress:s=>{t&&s.total&&t(Math.round(s.loaded*100/s.total))},headers:{"Content-Type":"multipart/form-data"}}))?.data,li="_uploadInput_1hs7y_1",ci="_uploadInputContent_1hs7y_6",ui="_uploadInputPreview_1hs7y_26",di="_uploadInputIcon_1hs7y_40",fi="_uploadInputImage_1hs7y_50",gi="_uploadInputProgress_1hs7y_55",hi="_uploadInputDelete_1hs7y_79",nt={uploadInput:li,uploadInputContent:ci,uploadInputPreview:ui,uploadInputIcon:di,uploadInputImage:fi,uploadInputProgress:gi,uploadInputDelete:hi},mi=({id:e,loadedImage:r,name:t,onDelete:n,onChange:s})=>{const{t:o}=Je(),i=m.useRef(null),[a,c]=m.useState(null),[u,f]=m.useState(0),d=()=>{i.current?.value&&(i.current.value=""),c(null),f(0),n?.()},h=()=>{f(0)},x=C=>{f(0);const _=C.target.files?.[0],M=new FileReader;_&&(M.onload=function(S){S.target?.result&&c(S.target.result)},M.readAsDataURL(_),s(_,{onProgress:f,onLoaded:h}))},R=a||r?kr+r:null;return b.jsxs("div",{className:nt.uploadInput,children:[b.jsxs("div",{className:nt.uploadInputContent,children:[b.jsx("input",{id:e,type:"file",name:t,disabled:!!R,ref:i,onChange:x,accept:"image/png, image/jpeg, image/jpg"}),b.jsxs("div",{className:nt.uploadInputPreview,children:[b.jsx(Gs,{className:nt.uploadInputIcon}),b.jsx("p",{children:o("shared.load_image")})]}),R&&b.jsx("img",{className:nt.uploadInputImage,src:R,alt:t}),!!u&&b.jsxs("div",{className:nt.uploadInputProgress,children:[b.jsxs("p",{children:["Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ",u," %"]}),b.jsx("span",{style:{width:`${u}%`}})]})]}),R&&b.jsx(it,{size:"sm",after:b.jsx($r,{}),className:nt.uploadInputDelete,onClick:d,children:o("shared.delete_image")})]})},pi="_content_7q73c_1",vi={content:pi},bi=1048576,yi=["image/png","image/jpeg","image/jpg"],xi=(e,r)=>e.size>bi?r("errors.image.size",{value:1}):yi.includes(e.type)?!1:r("errors.image.format"),as=({id:e,type:r="poster",onChange:t,loadedImg:n,clearError:s,setError:o})=>{const{t:i}=Je(),a=m.useRef(null),[c,u]=m.useState(null);m.useEffect(()=>{n&&u(n)},[n]);const f=(h,{onLoaded:x,onProgress:R})=>{s();const C=xi(h,i);if(C){o(C);return}if(h){const _=new FormData;_.append("file",h),_.append("type",r),a.current=new AbortController;const M=a.current.signal;ai(_,{signal:M,onProgress:R}).then(S=>{t(S.fileName),u(S.tempPath)}).catch(S=>{S.response?.data?.message?o(S.response?.data?.message):o(i("errors.image.load"))}).finally(()=>{x(),a.current=null})}},d=async()=>{if(t(null),o(i("validation.required")),u(null),a.current)return a.current.abort();c&&ii(c)};return b.jsx("div",{className:vi.content,children:b.jsx(mi,{id:e,loadedImage:c,onDelete:d,onChange:f})})},wi=()=>{const{t:e}=Je(),{control:r,register:t,watch:n,setError:s,clearErrors:o,formState:{errors:i}}=Ze(),a=n("loadedImg");return b.jsx(Tn,{className:"mb-5",children:b.jsxs(js,{children:[b.jsxs(gt,{children:[b.jsx(It,{htmlFor:"quiz-title",children:e("create_page.main.title")}),b.jsx(oi,{id:"quiz-title",placeholder:e("create_page.main.title_placeholder"),...t("title",ot(e).title)}),i.title?.message?b.jsx(Te,{children:i.title.message}):b.jsx(Nt,{children:ot(e).title.minLength.message})]}),b.jsxs(gt,{children:[b.jsx(It,{children:e("create_page.main.description")}),b.jsx(Gt,{name:"description",control:r,rules:{validate:So(e)},render:({field:c})=>b.jsx(si,{id:"quiz-description",value:c.value,onChange:c.onChange,placeholder:e("create_page.main.description_placeholder")})}),i.description?.message?b.jsx(Te,{children:i.description?.message}):b.jsx(Nt,{children:ot(e).description.minLength.message})]}),b.jsxs(gt,{children:[b.jsx(It,{htmlFor:"quiz-poster",children:e("create_page.main.poster")}),b.jsx(Gt,{name:"poster",control:r,rules:{required:e("validation.required")},render:({field:c})=>b.jsx(as,{id:"quiz-poster",type:"poster",loadedImg:a,clearError:()=>o("poster"),setError:u=>s("poster",{message:u}),onChange:c.onChange})}),i.poster?.message?b.jsx(Te,{children:i.poster?.message}):b.jsx(Nt,{children:e("create_page.main.poster_placeholder")})]}),b.jsx(On,{})]})})};function _i(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return m.useMemo(()=>n=>{r.forEach(s=>s(n))},r)}const cr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vt(e){const r=Object.prototype.toString.call(e);return r==="[object Window]"||r==="[object global]"}function Yr(e){return"nodeType"in e}function he(e){var r,t;return e?vt(e)?e:Yr(e)&&(r=(t=e.ownerDocument)==null?void 0:t.defaultView)!=null?r:window:window}function Gr(e){const{Document:r}=he(e);return e instanceof r}function zt(e){return vt(e)?!1:e instanceof he(e).HTMLElement}function ls(e){return e instanceof he(e).SVGElement}function bt(e){return e?vt(e)?e.document:Yr(e)?Gr(e)?e:zt(e)||ls(e)?e.ownerDocument:document:document:document}const Oe=cr?m.useLayoutEffect:m.useEffect;function Jr(e){const r=m.useRef(e);return Oe(()=>{r.current=e}),m.useCallback(function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return r.current==null?void 0:r.current(...n)},[])}function Ci(){const e=m.useRef(null),r=m.useCallback((n,s)=>{e.current=setInterval(n,s)},[]),t=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[r,t]}function Tt(e,r){r===void 0&&(r=[e]);const t=m.useRef(e);return Oe(()=>{t.current!==e&&(t.current=e)},r),t}function qt(e,r){const t=m.useRef();return m.useMemo(()=>{const n=e(t.current);return t.current=n,n},[...r])}function er(e){const r=Jr(e),t=m.useRef(null),n=m.useCallback(s=>{s!==t.current&&r?.(s,t.current),t.current=s},[]);return[t,n]}function Lr(e){const r=m.useRef();return m.useEffect(()=>{r.current=e},[e]),r.current}let Ar={};function $t(e,r){return m.useMemo(()=>{if(r)return r;const t=Ar[e]==null?0:Ar[e]+1;return Ar[e]=t,e+"-"+t},[e,r])}function cs(e){return function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n.reduce((o,i)=>{const a=Object.entries(i);for(const[c,u]of a){const f=o[c];f!=null&&(o[c]=f+e*u)}return o},{...r})}}const mt=cs(1),Ot=cs(-1);function Si(e){return"clientX"in e&&"clientY"in e}function Zr(e){if(!e)return!1;const{KeyboardEvent:r}=he(e.target);return r&&e instanceof r}function Ei(e){if(!e)return!1;const{TouchEvent:r}=he(e.target);return r&&e instanceof r}function Br(e){if(Ei(e)){if(e.touches&&e.touches.length){const{clientX:r,clientY:t}=e.touches[0];return{x:r,y:t}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:r,clientY:t}=e.changedTouches[0];return{x:r,y:t}}}return Si(e)?{x:e.clientX,y:e.clientY}:null}const jt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:r,y:t}=e;return"translate3d("+(r?Math.round(r):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:r,scaleY:t}=e;return"scaleX("+r+") scaleY("+t+")"}},Transform:{toString(e){if(e)return[jt.Translate.toString(e),jt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:r,duration:t,easing:n}=e;return r+" "+t+"ms "+n}}}),yn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Di(e){return e.matches(yn)?e:e.querySelector(yn)}const Ai={display:"none"};function Ri(e){let{id:r,value:t}=e;return v.createElement("div",{id:r,style:Ai},t)}function Fi(e){let{id:r,announcement:t,ariaLiveType:n="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return v.createElement("div",{id:r,style:s,role:"status","aria-live":n,"aria-atomic":!0},t)}function Ii(){const[e,r]=m.useState("");return{announce:m.useCallback(n=>{n!=null&&r(n)},[]),announcement:e}}const us=m.createContext(null);function Ni(e){const r=m.useContext(us);m.useEffect(()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(e)},[e,r])}function ki(){const[e]=m.useState(()=>new Set),r=m.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[m.useCallback(n=>{let{type:s,event:o}=n;e.forEach(i=>{var a;return(a=i[s])==null?void 0:a.call(i,o)})},[e]),r]}const Mi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Vi={onDragStart(e){let{active:r}=e;return"Picked up draggable item "+r.id+"."},onDragOver(e){let{active:r,over:t}=e;return t?"Draggable item "+r.id+" was moved over droppable area "+t.id+".":"Draggable item "+r.id+" is no longer over a droppable area."},onDragEnd(e){let{active:r,over:t}=e;return t?"Draggable item "+r.id+" was dropped over droppable area "+t.id:"Draggable item "+r.id+" was dropped."},onDragCancel(e){let{active:r}=e;return"Dragging was cancelled. Draggable item "+r.id+" was dropped."}};function Ti(e){let{announcements:r=Vi,container:t,hiddenTextDescribedById:n,screenReaderInstructions:s=Mi}=e;const{announce:o,announcement:i}=Ii(),a=$t("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),Ni(m.useMemo(()=>({onDragStart(d){let{active:h}=d;o(r.onDragStart({active:h}))},onDragMove(d){let{active:h,over:x}=d;r.onDragMove&&o(r.onDragMove({active:h,over:x}))},onDragOver(d){let{active:h,over:x}=d;o(r.onDragOver({active:h,over:x}))},onDragEnd(d){let{active:h,over:x}=d;o(r.onDragEnd({active:h,over:x}))},onDragCancel(d){let{active:h,over:x}=d;o(r.onDragCancel({active:h,over:x}))}}),[o,r])),!c)return null;const f=v.createElement(v.Fragment,null,v.createElement(Ri,{id:n,value:s.draggable}),v.createElement(Fi,{id:a,announcement:i}));return t?dt.createPortal(f,t):f}var ee;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ee||(ee={}));function tr(){}function Rr(e,r){return m.useMemo(()=>({sensor:e,options:r??{}}),[e,r])}function Oi(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return m.useMemo(()=>[...r].filter(n=>n!=null),[...r])}const Ie=Object.freeze({x:0,y:0});function ds(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function fs(e,r){let{data:{value:t}}=e,{data:{value:n}}=r;return t-n}function ji(e,r){let{data:{value:t}}=e,{data:{value:n}}=r;return n-t}function xn(e){let{left:r,top:t,height:n,width:s}=e;return[{x:r,y:t},{x:r+s,y:t},{x:r,y:t+n},{x:r+s,y:t+n}]}function gs(e,r){if(!e||e.length===0)return null;const[t]=e;return t[r]}function wn(e,r,t){return r===void 0&&(r=e.left),t===void 0&&(t=e.top),{x:r+e.width*.5,y:t+e.height*.5}}const Li=e=>{let{collisionRect:r,droppableRects:t,droppableContainers:n}=e;const s=wn(r,r.left,r.top),o=[];for(const i of n){const{id:a}=i,c=t.get(a);if(c){const u=ds(wn(c),s);o.push({id:a,data:{droppableContainer:i,value:u}})}}return o.sort(fs)},Bi=e=>{let{collisionRect:r,droppableRects:t,droppableContainers:n}=e;const s=xn(r),o=[];for(const i of n){const{id:a}=i,c=t.get(a);if(c){const u=xn(c),f=s.reduce((h,x,R)=>h+ds(u[R],x),0),d=Number((f/4).toFixed(4));o.push({id:a,data:{droppableContainer:i,value:d}})}}return o.sort(fs)};function Pi(e,r){const t=Math.max(r.top,e.top),n=Math.max(r.left,e.left),s=Math.min(r.left+r.width,e.left+e.width),o=Math.min(r.top+r.height,e.top+e.height),i=s-n,a=o-t;if(n<s&&t<o){const c=r.width*r.height,u=e.width*e.height,f=i*a,d=f/(c+u-f);return Number(d.toFixed(4))}return 0}const zi=e=>{let{collisionRect:r,droppableRects:t,droppableContainers:n}=e;const s=[];for(const o of n){const{id:i}=o,a=t.get(i);if(a){const c=Pi(a,r);c>0&&s.push({id:i,data:{droppableContainer:o,value:c}})}}return s.sort(ji)};function qi(e,r,t){return{...e,scaleX:r&&t?r.width/t.width:1,scaleY:r&&t?r.height/t.height:1}}function hs(e,r){return e&&r?{x:e.left-r.left,y:e.top-r.top}:Ie}function $i(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...t})}}const Ui=$i(1);function Hi(e){if(e.startsWith("matrix3d(")){const r=e.slice(9,-1).split(/, /);return{x:+r[12],y:+r[13],scaleX:+r[0],scaleY:+r[5]}}else if(e.startsWith("matrix(")){const r=e.slice(7,-1).split(/, /);return{x:+r[4],y:+r[5],scaleX:+r[0],scaleY:+r[3]}}return null}function Wi(e,r,t){const n=Hi(r);if(!n)return e;const{scaleX:s,scaleY:o,x:i,y:a}=n,c=e.left-i-(1-s)*parseFloat(t),u=e.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),f=s?e.width/s:e.width,d=o?e.height/o:e.height;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c}}const Qi={ignoreTransform:!1};function yt(e,r){r===void 0&&(r=Qi);let t=e.getBoundingClientRect();if(r.ignoreTransform){const{transform:u,transformOrigin:f}=he(e).getComputedStyle(e);u&&(t=Wi(t,u,f))}const{top:n,left:s,width:o,height:i,bottom:a,right:c}=t;return{top:n,left:s,width:o,height:i,bottom:a,right:c}}function _n(e){return yt(e,{ignoreTransform:!0})}function Xi(e){const r=e.innerWidth,t=e.innerHeight;return{top:0,left:0,right:r,bottom:t,width:r,height:t}}function Ki(e,r){return r===void 0&&(r=he(e).getComputedStyle(e)),r.position==="fixed"}function Yi(e,r){r===void 0&&(r=he(e).getComputedStyle(e));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=r[s];return typeof o=="string"?t.test(o):!1})}function ur(e,r){const t=[];function n(s){if(r!=null&&t.length>=r||!s)return t;if(Gr(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!zt(s)||ls(s)||t.includes(s))return t;const o=he(e).getComputedStyle(s);return s!==e&&Yi(s,o)&&t.push(s),Ki(s,o)?t:n(s.parentNode)}return e?n(e):t}function ms(e){const[r]=ur(e,1);return r??null}function Fr(e){return!cr||!e?null:vt(e)?e:Yr(e)?Gr(e)||e===bt(e).scrollingElement?window:zt(e)?e:null:null}function ps(e){return vt(e)?e.scrollX:e.scrollLeft}function vs(e){return vt(e)?e.scrollY:e.scrollTop}function Pr(e){return{x:ps(e),y:vs(e)}}var ne;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ne||(ne={}));function bs(e){return!cr||!e?!1:e===document.scrollingElement}function ys(e){const r={x:0,y:0},t=bs(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-t.width,y:e.scrollHeight-t.height},s=e.scrollTop<=r.y,o=e.scrollLeft<=r.x,i=e.scrollTop>=n.y,a=e.scrollLeft>=n.x;return{isTop:s,isLeft:o,isBottom:i,isRight:a,maxScroll:n,minScroll:r}}const Gi={x:.2,y:.2};function Ji(e,r,t,n,s){let{top:o,left:i,right:a,bottom:c}=t;n===void 0&&(n=10),s===void 0&&(s=Gi);const{isTop:u,isBottom:f,isLeft:d,isRight:h}=ys(e),x={x:0,y:0},R={x:0,y:0},C={height:r.height*s.y,width:r.width*s.x};return!u&&o<=r.top+C.height?(x.y=ne.Backward,R.y=n*Math.abs((r.top+C.height-o)/C.height)):!f&&c>=r.bottom-C.height&&(x.y=ne.Forward,R.y=n*Math.abs((r.bottom-C.height-c)/C.height)),!h&&a>=r.right-C.width?(x.x=ne.Forward,R.x=n*Math.abs((r.right-C.width-a)/C.width)):!d&&i<=r.left+C.width&&(x.x=ne.Backward,R.x=n*Math.abs((r.left+C.width-i)/C.width)),{direction:x,speed:R}}function Zi(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:r,left:t,right:n,bottom:s}=e.getBoundingClientRect();return{top:r,left:t,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function xs(e){return e.reduce((r,t)=>mt(r,Pr(t)),Ie)}function ea(e){return e.reduce((r,t)=>r+ps(t),0)}function ta(e){return e.reduce((r,t)=>r+vs(t),0)}function ra(e,r){if(r===void 0&&(r=yt),!e)return;const{top:t,left:n,bottom:s,right:o}=r(e);ms(e)&&(s<=0||o<=0||t>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const na=[["x",["left","right"],ea],["y",["top","bottom"],ta]];class en{constructor(r,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=ur(t),s=xs(n);this.rect={...r},this.width=r.width,this.height=r.height;for(const[o,i,a]of na)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=a(n),f=s[o]-u;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kt{constructor(r){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...t)})},this.target=r}add(r,t,n){var s;(s=this.target)==null||s.addEventListener(r,t,n),this.listeners.push([r,t,n])}}function sa(e){const{EventTarget:r}=he(e);return e instanceof r?e:bt(e)}function Ir(e,r){const t=Math.abs(e.x),n=Math.abs(e.y);return typeof r=="number"?Math.sqrt(t**2+n**2)>r:"x"in r&&"y"in r?t>r.x&&n>r.y:"x"in r?t>r.x:"y"in r?n>r.y:!1}var Ee;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ee||(Ee={}));function Cn(e){e.preventDefault()}function oa(e){e.stopPropagation()}var z;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(z||(z={}));const ws={start:[z.Space,z.Enter],cancel:[z.Esc],end:[z.Space,z.Enter,z.Tab]},ia=(e,r)=>{let{currentCoordinates:t}=r;switch(e.code){case z.Right:return{...t,x:t.x+25};case z.Left:return{...t,x:t.x-25};case z.Down:return{...t,y:t.y+25};case z.Up:return{...t,y:t.y-25}}};class tn{constructor(r){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=r;const{event:{target:t}}=r;this.props=r,this.listeners=new kt(bt(t)),this.windowListeners=new kt(he(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:r,onStart:t}=this.props,n=r.node.current;n&&ra(n),t(Ie)}handleKeyDown(r){if(Zr(r)){const{active:t,context:n,options:s}=this.props,{keyboardCodes:o=ws,coordinateGetter:i=ia,scrollBehavior:a="smooth"}=s,{code:c}=r;if(o.end.includes(c)){this.handleEnd(r);return}if(o.cancel.includes(c)){this.handleCancel(r);return}const{collisionRect:u}=n.current,f=u?{x:u.left,y:u.top}:Ie;this.referenceCoordinates||(this.referenceCoordinates=f);const d=i(r,{active:t,context:n.current,currentCoordinates:f});if(d){const h=Ot(d,f),x={x:0,y:0},{scrollableAncestors:R}=n.current;for(const C of R){const _=r.code,{isTop:M,isRight:S,isLeft:k,isBottom:y,maxScroll:w,minScroll:F}=ys(C),N=Zi(C),T={x:Math.min(_===z.Right?N.right-N.width/2:N.right,Math.max(_===z.Right?N.left:N.left+N.width/2,d.x)),y:Math.min(_===z.Down?N.bottom-N.height/2:N.bottom,Math.max(_===z.Down?N.top:N.top+N.height/2,d.y))},L=_===z.Right&&!S||_===z.Left&&!k,W=_===z.Down&&!y||_===z.Up&&!M;if(L&&T.x!==d.x){const P=C.scrollLeft+h.x,O=_===z.Right&&P<=w.x||_===z.Left&&P>=F.x;if(O&&!h.y){C.scrollTo({left:P,behavior:a});return}O?x.x=C.scrollLeft-P:x.x=_===z.Right?C.scrollLeft-w.x:C.scrollLeft-F.x,x.x&&C.scrollBy({left:-x.x,behavior:a});break}else if(W&&T.y!==d.y){const P=C.scrollTop+h.y,O=_===z.Down&&P<=w.y||_===z.Up&&P>=F.y;if(O&&!h.x){C.scrollTo({top:P,behavior:a});return}O?x.y=C.scrollTop-P:x.y=_===z.Down?C.scrollTop-w.y:C.scrollTop-F.y,x.y&&C.scrollBy({top:-x.y,behavior:a});break}}this.handleMove(r,mt(Ot(d,this.referenceCoordinates),x))}}}handleMove(r,t){const{onMove:n}=this.props;r.preventDefault(),n(t)}handleEnd(r){const{onEnd:t}=this.props;r.preventDefault(),this.detach(),t()}handleCancel(r){const{onCancel:t}=this.props;r.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tn.activators=[{eventName:"onKeyDown",handler:(e,r,t)=>{let{keyboardCodes:n=ws,onActivation:s}=r,{active:o}=t;const{code:i}=e.nativeEvent;if(n.start.includes(i)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function Sn(e){return!!(e&&"distance"in e)}function En(e){return!!(e&&"delay"in e)}class rn{constructor(r,t,n){var s;n===void 0&&(n=sa(r.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=r,this.events=t;const{event:o}=r,{target:i}=o;this.props=r,this.events=t,this.document=bt(i),this.documentListeners=new kt(this.document),this.listeners=new kt(n),this.windowListeners=new kt(he(i)),this.initialCoordinates=(s=Br(o))!=null?s:Ie,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:r,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(r.move.name,this.handleMove,{passive:!1}),this.listeners.add(r.end.name,this.handleEnd),r.cancel&&this.listeners.add(r.cancel.name,this.handleCancel),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.DragStart,Cn),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),this.windowListeners.add(Ee.ContextMenu,Cn),this.documentListeners.add(Ee.Keydown,this.handleKeydown),t){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(En(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Sn(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(r,t){const{active:n,onPending:s}=this.props;s(n,r,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:r}=this,{onStart:t}=this.props;r&&(this.activated=!0,this.documentListeners.add(Ee.Click,oa,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ee.SelectionChange,this.removeTextSelection),t(r))}handleMove(r){var t;const{activated:n,initialCoordinates:s,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!s)return;const c=(t=Br(r))!=null?t:Ie,u=Ot(s,c);if(!n&&a){if(Sn(a)){if(a.tolerance!=null&&Ir(u,a.tolerance))return this.handleCancel();if(Ir(u,a.distance))return this.handleStart()}if(En(a)&&Ir(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}r.cancelable&&r.preventDefault(),i(c)}handleEnd(){const{onAbort:r,onEnd:t}=this.props;this.detach(),this.activated||r(this.props.active),t()}handleCancel(){const{onAbort:r,onCancel:t}=this.props;this.detach(),this.activated||r(this.props.active),t()}handleKeydown(r){r.code===z.Esc&&this.handleCancel()}removeTextSelection(){var r;(r=this.document.getSelection())==null||r.removeAllRanges()}}const aa={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nn extends rn{constructor(r){const{event:t}=r,n=bt(t.target);super(r,aa,n)}}nn.activators=[{eventName:"onPointerDown",handler:(e,r)=>{let{nativeEvent:t}=e,{onActivation:n}=r;return!t.isPrimary||t.button!==0?!1:(n?.({event:t}),!0)}}];const la={move:{name:"mousemove"},end:{name:"mouseup"}};var zr;(function(e){e[e.RightClick=2]="RightClick"})(zr||(zr={}));class ca extends rn{constructor(r){super(r,la,bt(r.event.target))}}ca.activators=[{eventName:"onMouseDown",handler:(e,r)=>{let{nativeEvent:t}=e,{onActivation:n}=r;return t.button===zr.RightClick?!1:(n?.({event:t}),!0)}}];const Nr={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class _s extends rn{constructor(r){super(r,Nr)}static setup(){return window.addEventListener(Nr.move.name,r,{capture:!1,passive:!1}),function(){window.removeEventListener(Nr.move.name,r)};function r(){}}}_s.activators=[{eventName:"onTouchStart",handler:(e,r)=>{let{nativeEvent:t}=e,{onActivation:n}=r;const{touches:s}=t;return s.length>1?!1:(n?.({event:t}),!0)}}];var Mt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Mt||(Mt={}));var rr;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(rr||(rr={}));function ua(e){let{acceleration:r,activator:t=Mt.Pointer,canScroll:n,draggingRect:s,enabled:o,interval:i=5,order:a=rr.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:f,delta:d,threshold:h}=e;const x=fa({delta:d,disabled:!o}),[R,C]=Ci(),_=m.useRef({x:0,y:0}),M=m.useRef({x:0,y:0}),S=m.useMemo(()=>{switch(t){case Mt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Mt.DraggableRect:return s}},[t,s,c]),k=m.useRef(null),y=m.useCallback(()=>{const F=k.current;if(!F)return;const N=_.current.x*M.current.x,T=_.current.y*M.current.y;F.scrollBy(N,T)},[]),w=m.useMemo(()=>a===rr.TreeOrder?[...u].reverse():u,[a,u]);m.useEffect(()=>{if(!o||!u.length||!S){C();return}for(const F of w){if(n?.(F)===!1)continue;const N=u.indexOf(F),T=f[N];if(!T)continue;const{direction:L,speed:W}=Ji(F,T,S,r,h);for(const P of["x","y"])x[P][L[P]]||(W[P]=0,L[P]=0);if(W.x>0||W.y>0){C(),k.current=F,R(y,i),_.current=W,M.current=L;return}}_.current={x:0,y:0},M.current={x:0,y:0},C()},[r,y,n,C,o,i,JSON.stringify(S),JSON.stringify(x),R,u,w,f,JSON.stringify(h)])}const da={x:{[ne.Backward]:!1,[ne.Forward]:!1},y:{[ne.Backward]:!1,[ne.Forward]:!1}};function fa(e){let{delta:r,disabled:t}=e;const n=Lr(r);return qt(s=>{if(t||!n||!s)return da;const o={x:Math.sign(r.x-n.x),y:Math.sign(r.y-n.y)};return{x:{[ne.Backward]:s.x[ne.Backward]||o.x===-1,[ne.Forward]:s.x[ne.Forward]||o.x===1},y:{[ne.Backward]:s.y[ne.Backward]||o.y===-1,[ne.Forward]:s.y[ne.Forward]||o.y===1}}},[t,r,n])}function ga(e,r){const t=r!=null?e.get(r):void 0,n=t?t.node.current:null;return qt(s=>{var o;return r==null?null:(o=n??s)!=null?o:null},[n,r])}function ha(e,r){return m.useMemo(()=>e.reduce((t,n)=>{const{sensor:s}=n,o=s.activators.map(i=>({eventName:i.eventName,handler:r(i.handler,n)}));return[...t,...o]},[]),[e,r])}var Lt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Lt||(Lt={}));var qr;(function(e){e.Optimized="optimized"})(qr||(qr={}));const Dn=new Map;function ma(e,r){let{dragging:t,dependencies:n,config:s}=r;const[o,i]=m.useState(null),{frequency:a,measure:c,strategy:u}=s,f=m.useRef(e),d=_(),h=Tt(d),x=m.useCallback(function(M){M===void 0&&(M=[]),!h.current&&i(S=>S===null?M:S.concat(M.filter(k=>!S.includes(k))))},[h]),R=m.useRef(null),C=qt(M=>{if(d&&!t)return Dn;if(!M||M===Dn||f.current!==e||o!=null){const S=new Map;for(let k of e){if(!k)continue;if(o&&o.length>0&&!o.includes(k.id)&&k.rect.current){S.set(k.id,k.rect.current);continue}const y=k.node.current,w=y?new en(c(y),y):null;k.rect.current=w,w&&S.set(k.id,w)}return S}return M},[e,o,t,d,c]);return m.useEffect(()=>{f.current=e},[e]),m.useEffect(()=>{d||x()},[t,d]),m.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),m.useEffect(()=>{d||typeof a!="number"||R.current!==null||(R.current=setTimeout(()=>{x(),R.current=null},a))},[a,d,x,...n]),{droppableRects:C,measureDroppableContainers:x,measuringScheduled:o!=null};function _(){switch(u){case Lt.Always:return!1;case Lt.BeforeDragging:return t;default:return!t}}}function Cs(e,r){return qt(t=>e?t||(typeof r=="function"?r(e):e):null,[r,e])}function pa(e,r){return Cs(e,r)}function va(e){let{callback:r,disabled:t}=e;const n=Jr(r),s=m.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(n)},[n,t]);return m.useEffect(()=>()=>s?.disconnect(),[s]),s}function dr(e){let{callback:r,disabled:t}=e;const n=Jr(r),s=m.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(n)},[t]);return m.useEffect(()=>()=>s?.disconnect(),[s]),s}function ba(e){return new en(yt(e),e)}function An(e,r,t){r===void 0&&(r=ba);const[n,s]=m.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??t)!=null?u:null}const f=r(e);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const i=va({callback(c){if(e)for(const u of c){const{type:f,target:d}=u;if(f==="childList"&&d instanceof HTMLElement&&d.contains(e)){o();break}}}}),a=dr({callback:o});return Oe(()=>{o(),e?(a?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),i?.disconnect())},[e]),n}function ya(e){const r=Cs(e);return hs(e,r)}const Rn=[];function xa(e){const r=m.useRef(e),t=qt(n=>e?n&&n!==Rn&&e&&r.current&&e.parentNode===r.current.parentNode?n:ur(e):Rn,[e]);return m.useEffect(()=>{r.current=e},[e]),t}function wa(e){const[r,t]=m.useState(null),n=m.useRef(e),s=m.useCallback(o=>{const i=Fr(o.target);i&&t(a=>a?(a.set(i,Pr(i)),new Map(a)):null)},[]);return m.useEffect(()=>{const o=n.current;if(e!==o){i(o);const a=e.map(c=>{const u=Fr(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Pr(u)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),n.current=e}return()=>{i(e),i(o)};function i(a){a.forEach(c=>{const u=Fr(c);u?.removeEventListener("scroll",s)})}},[s,e]),m.useMemo(()=>e.length?r?Array.from(r.values()).reduce((o,i)=>mt(o,i),Ie):xs(e):Ie,[e,r])}function Fn(e,r){r===void 0&&(r=[]);const t=m.useRef(null);return m.useEffect(()=>{t.current=null},r),m.useEffect(()=>{const n=e!==Ie;n&&!t.current&&(t.current=e),!n&&t.current&&(t.current=null)},[e]),t.current?Ot(e,t.current):Ie}function _a(e){m.useEffect(()=>{if(!cr)return;const r=e.map(t=>{let{sensor:n}=t;return n.setup==null?void 0:n.setup()});return()=>{for(const t of r)t?.()}},e.map(r=>{let{sensor:t}=r;return t}))}function Ca(e,r){return m.useMemo(()=>e.reduce((t,n)=>{let{eventName:s,handler:o}=n;return t[s]=i=>{o(i,r)},t},{}),[e,r])}function Ss(e){return m.useMemo(()=>e?Xi(e):null,[e])}const In=[];function Sa(e,r){r===void 0&&(r=yt);const[t]=e,n=Ss(t?he(t):null),[s,o]=m.useState(In);function i(){o(()=>e.length?e.map(c=>bs(c)?n:new en(r(c),c)):In)}const a=dr({callback:i});return Oe(()=>{a?.disconnect(),i(),e.forEach(c=>a?.observe(c))},[e]),s}function Ea(e){if(!e)return null;if(e.children.length>1)return e;const r=e.children[0];return zt(r)?r:e}function Da(e){let{measure:r}=e;const[t,n]=m.useState(null),s=m.useCallback(u=>{for(const{target:f}of u)if(zt(f)){n(d=>{const h=r(f);return d?{...d,width:h.width,height:h.height}:h});break}},[r]),o=dr({callback:s}),i=m.useCallback(u=>{const f=Ea(u);o?.disconnect(),f&&o?.observe(f),n(f?r(f):null)},[r,o]),[a,c]=er(i);return m.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const Aa=[{sensor:nn,options:{}},{sensor:tn,options:{}}],Ra={current:{}},Kt={draggable:{measure:_n},droppable:{measure:_n,strategy:Lt.WhileDragging,frequency:qr.Optimized},dragOverlay:{measure:yt}};class Vt extends Map{get(r){var t;return r!=null&&(t=super.get(r))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(r=>{let{disabled:t}=r;return!t})}getNodeFor(r){var t,n;return(t=(n=this.get(r))==null?void 0:n.node.current)!=null?t:void 0}}const Fa={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tr},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Kt,measureDroppableContainers:tr,windowRect:null,measuringScheduled:!1},Ia={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tr,draggableNodes:new Map,over:null,measureDroppableContainers:tr},fr=m.createContext(Ia),Es=m.createContext(Fa);function Na(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vt}}}function ka(e,r){switch(r.type){case ee.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:r.initialCoordinates,active:r.active}};case ee.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:r.coordinates.x-e.draggable.initialCoordinates.x,y:r.coordinates.y-e.draggable.initialCoordinates.y}}};case ee.DragEnd:case ee.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ee.RegisterDroppable:{const{element:t}=r,{id:n}=t,s=new Vt(e.droppable.containers);return s.set(n,t),{...e,droppable:{...e.droppable,containers:s}}}case ee.SetDroppableDisabled:{const{id:t,key:n,disabled:s}=r,o=e.droppable.containers.get(t);if(!o||n!==o.key)return e;const i=new Vt(e.droppable.containers);return i.set(t,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case ee.UnregisterDroppable:{const{id:t,key:n}=r,s=e.droppable.containers.get(t);if(!s||n!==s.key)return e;const o=new Vt(e.droppable.containers);return o.delete(t),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Ma(e){let{disabled:r}=e;const{active:t,activatorEvent:n,draggableNodes:s}=m.useContext(fr),o=Lr(n),i=Lr(t?.id);return m.useEffect(()=>{if(!r&&!n&&o&&i!=null){if(!Zr(o)||document.activeElement===o.target)return;const a=s.get(i);if(!a)return;const{activatorNode:c,node:u}=a;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[c.current,u.current]){if(!f)continue;const d=Di(f);if(d){d.focus();break}}})}},[n,r,s,i,o]),null}function Va(e,r){let{transform:t,...n}=r;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...n}),t):t}function Ta(e){return m.useMemo(()=>({draggable:{...Kt.draggable,...e?.draggable},droppable:{...Kt.droppable,...e?.droppable},dragOverlay:{...Kt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Oa(e){let{activeNode:r,measure:t,initialRect:n,config:s=!0}=e;const o=m.useRef(!1),{x:i,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Oe(()=>{if(!i&&!a||!r){o.current=!1;return}if(o.current||!n)return;const u=r?.node.current;if(!u||u.isConnected===!1)return;const f=t(u),d=hs(f,n);if(i||(d.x=0),a||(d.y=0),o.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=ms(u);h&&h.scrollBy({top:d.y,left:d.x})}},[r,i,a,n,t])}const Ds=m.createContext({...Ie,scaleX:1,scaleY:1});var Ge;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ge||(Ge={}));const ja=m.memo(function(r){var t,n,s,o;let{id:i,accessibility:a,autoScroll:c=!0,children:u,sensors:f=Aa,collisionDetection:d=zi,measuring:h,modifiers:x,...R}=r;const C=m.useReducer(ka,void 0,Na),[_,M]=C,[S,k]=ki(),[y,w]=m.useState(Ge.Uninitialized),F=y===Ge.Initialized,{draggable:{active:N,nodes:T,translate:L},droppable:{containers:W}}=_,P=N!=null?T.get(N):null,O=m.useRef({initial:null,translated:null}),j=m.useMemo(()=>{var le;return N!=null?{id:N,data:(le=P?.data)!=null?le:Ra,rect:O}:null},[N,P]),$=m.useRef(null),[Y,Z]=m.useState(null),[K,Ne]=m.useState(null),ie=Tt(R,Object.values(R)),ke=$t("DndDescribedBy",i),et=m.useMemo(()=>W.getEnabled(),[W]),ae=Ta(h),{droppableRects:_e,measureDroppableContainers:Le,measuringScheduled:$e}=ma(et,{dragging:F,dependencies:[L.x,L.y],config:ae.droppable}),ue=ga(T,N),Ue=m.useMemo(()=>K?Br(K):null,[K]),Ae=Vs(),me=pa(ue,ae.draggable.measure);Oa({activeNode:N!=null?T.get(N):null,config:Ae.layoutShiftCompensation,initialRect:me,measure:ae.draggable.measure});const U=An(ue,ae.draggable.measure,me),tt=An(ue?ue.parentElement:null),pe=m.useRef({activatorEvent:null,active:null,activeNode:ue,collisionRect:null,collisions:null,droppableRects:_e,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),He=W.getNodeFor((t=pe.current.over)==null?void 0:t.id),Ce=Da({measure:ae.dragOverlay.measure}),Be=(n=Ce.nodeRef.current)!=null?n:ue,We=F?(s=Ce.rect)!=null?s:U:null,Ut=!!(Ce.nodeRef.current&&Ce.rect),gr=ya(Ut?null:U),at=Ss(Be?he(Be):null),l=xa(F?He??ue:null),g=Sa(l),p=Va(x,{transform:{x:L.x-gr.x,y:L.y-gr.y,scaleX:1,scaleY:1},activatorEvent:K,active:j,activeNodeRect:U,containerNodeRect:tt,draggingNodeRect:We,over:pe.current.over,overlayNodeRect:Ce.rect,scrollableAncestors:l,scrollableAncestorRects:g,windowRect:at}),I=Ue?mt(Ue,L):null,D=wa(l),E=Fn(D),V=Fn(D,[U]),B=mt(p,E),q=We?Ui(We,p):null,re=j&&q?d({active:j,collisionRect:q,droppableRects:_e,droppableContainers:et,pointerCoordinates:I}):null,rt=gs(re,"id"),[se,Ht]=m.useState(null),xt=Ut?p:mt(p,V),wt=qi(xt,(o=se?.rect)!=null?o:null,U),_t=m.useRef(null),Ct=m.useCallback((le,ve)=>{let{sensor:be,options:Qe}=ve;if($.current==null)return;const Se=T.get($.current);if(!Se)return;const ye=le.nativeEvent,Me=new be({active:$.current,activeNode:Se,event:ye,options:Qe,context:pe,onAbort(oe){if(!T.get(oe))return;const{onDragAbort:Ve}=ie.current,Pe={id:oe};Ve?.(Pe),S({type:"onDragAbort",event:Pe})},onPending(oe,Xe,Ve,Pe){if(!T.get(oe))return;const{onDragPending:Dt}=ie.current,Ke={id:oe,constraint:Xe,initialCoordinates:Ve,offset:Pe};Dt?.(Ke),S({type:"onDragPending",event:Ke})},onStart(oe){const Xe=$.current;if(Xe==null)return;const Ve=T.get(Xe);if(!Ve)return;const{onDragStart:Pe}=ie.current,Et={activatorEvent:ye,active:{id:Xe,data:Ve.data,rect:O}};dt.unstable_batchedUpdates(()=>{Pe?.(Et),w(Ge.Initializing),M({type:ee.DragStart,initialCoordinates:oe,active:Xe}),S({type:"onDragStart",event:Et}),Z(_t.current),Ne(ye)})},onMove(oe){M({type:ee.DragMove,coordinates:oe})},onEnd:lt(ee.DragEnd),onCancel:lt(ee.DragCancel)});_t.current=Me;function lt(oe){return async function(){const{active:Ve,collisions:Pe,over:Et,scrollAdjustedTranslate:Dt}=pe.current;let Ke=null;if(Ve&&Dt){const{cancelDrop:At}=ie.current;Ke={activatorEvent:ye,active:Ve,collisions:Pe,delta:Dt,over:Et},oe===ee.DragEnd&&typeof At=="function"&&await Promise.resolve(At(Ke))&&(oe=ee.DragCancel)}$.current=null,dt.unstable_batchedUpdates(()=>{M({type:oe}),w(Ge.Uninitialized),Ht(null),Z(null),Ne(null),_t.current=null;const At=oe===ee.DragEnd?"onDragEnd":"onDragCancel";if(Ke){const mr=ie.current[At];mr?.(Ke),S({type:At,event:Ke})}})}}},[T]),hr=m.useCallback((le,ve)=>(be,Qe)=>{const Se=be.nativeEvent,ye=T.get(Qe);if($.current!==null||!ye||Se.dndKit||Se.defaultPrevented)return;const Me={active:ye};le(be,ve.options,Me)===!0&&(Se.dndKit={capturedBy:ve.sensor},$.current=Qe,Ct(be,ve))},[T,Ct]),St=ha(f,hr);_a(f),Oe(()=>{U&&y===Ge.Initializing&&w(Ge.Initialized)},[U,y]),m.useEffect(()=>{const{onDragMove:le}=ie.current,{active:ve,activatorEvent:be,collisions:Qe,over:Se}=pe.current;if(!ve||!be)return;const ye={active:ve,activatorEvent:be,collisions:Qe,delta:{x:B.x,y:B.y},over:Se};dt.unstable_batchedUpdates(()=>{le?.(ye),S({type:"onDragMove",event:ye})})},[B.x,B.y]),m.useEffect(()=>{const{active:le,activatorEvent:ve,collisions:be,droppableContainers:Qe,scrollAdjustedTranslate:Se}=pe.current;if(!le||$.current==null||!ve||!Se)return;const{onDragOver:ye}=ie.current,Me=Qe.get(rt),lt=Me&&Me.rect.current?{id:Me.id,rect:Me.rect.current,data:Me.data,disabled:Me.disabled}:null,oe={active:le,activatorEvent:ve,collisions:be,delta:{x:Se.x,y:Se.y},over:lt};dt.unstable_batchedUpdates(()=>{Ht(lt),ye?.(oe),S({type:"onDragOver",event:oe})})},[rt]),Oe(()=>{pe.current={activatorEvent:K,active:j,activeNode:ue,collisionRect:q,collisions:re,droppableRects:_e,draggableNodes:T,draggingNode:Be,draggingNodeRect:We,droppableContainers:W,over:se,scrollableAncestors:l,scrollAdjustedTranslate:B},O.current={initial:We,translated:q}},[j,ue,re,q,T,Be,We,_e,W,se,l,B]),ua({...Ae,delta:L,draggingRect:q,pointerCoordinates:I,scrollableAncestors:l,scrollableAncestorRects:g});const ks=m.useMemo(()=>({active:j,activeNode:ue,activeNodeRect:U,activatorEvent:K,collisions:re,containerNodeRect:tt,dragOverlay:Ce,draggableNodes:T,droppableContainers:W,droppableRects:_e,over:se,measureDroppableContainers:Le,scrollableAncestors:l,scrollableAncestorRects:g,measuringConfiguration:ae,measuringScheduled:$e,windowRect:at}),[j,ue,U,K,re,tt,Ce,T,W,_e,se,Le,l,g,ae,$e,at]),Ms=m.useMemo(()=>({activatorEvent:K,activators:St,active:j,activeNodeRect:U,ariaDescribedById:{draggable:ke},dispatch:M,draggableNodes:T,over:se,measureDroppableContainers:Le}),[K,St,j,U,M,ke,T,se,Le]);return v.createElement(us.Provider,{value:k},v.createElement(fr.Provider,{value:Ms},v.createElement(Es.Provider,{value:ks},v.createElement(Ds.Provider,{value:wt},u)),v.createElement(Ma,{disabled:a?.restoreFocus===!1})),v.createElement(Ti,{...a,hiddenTextDescribedById:ke}));function Vs(){const le=Y?.autoScrollEnabled===!1,ve=typeof c=="object"?c.enabled===!1:c===!1,be=F&&!le&&!ve;return typeof c=="object"?{...c,enabled:be}:{enabled:be}}}),La=m.createContext(null),Nn="button",Ba="Draggable";function Pa(e){let{id:r,data:t,disabled:n=!1,attributes:s}=e;const o=$t(Ba),{activators:i,activatorEvent:a,active:c,activeNodeRect:u,ariaDescribedById:f,draggableNodes:d,over:h}=m.useContext(fr),{role:x=Nn,roleDescription:R="draggable",tabIndex:C=0}=s??{},_=c?.id===r,M=m.useContext(_?Ds:La),[S,k]=er(),[y,w]=er(),F=Ca(i,r),N=Tt(t);Oe(()=>(d.set(r,{id:r,key:o,node:S,activatorNode:y,data:N}),()=>{const L=d.get(r);L&&L.key===o&&d.delete(r)}),[d,r]);const T=m.useMemo(()=>({role:x,tabIndex:C,"aria-disabled":n,"aria-pressed":_&&x===Nn?!0:void 0,"aria-roledescription":R,"aria-describedby":f.draggable}),[n,x,C,_,R,f.draggable]);return{active:c,activatorEvent:a,activeNodeRect:u,attributes:T,isDragging:_,listeners:n?void 0:F,node:S,over:h,setNodeRef:k,setActivatorNodeRef:w,transform:M}}function za(){return m.useContext(Es)}const qa="Droppable",$a={timeout:25};function Ua(e){let{data:r,disabled:t=!1,id:n,resizeObserverConfig:s}=e;const o=$t(qa),{active:i,dispatch:a,over:c,measureDroppableContainers:u}=m.useContext(fr),f=m.useRef({disabled:t}),d=m.useRef(!1),h=m.useRef(null),x=m.useRef(null),{disabled:R,updateMeasurementsFor:C,timeout:_}={...$a,...s},M=Tt(C??n),S=m.useCallback(()=>{if(!d.current){d.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(M.current)?M.current:[M.current]),x.current=null},_)},[_]),k=dr({callback:S,disabled:R||!i}),y=m.useCallback((T,L)=>{k&&(L&&(k.unobserve(L),d.current=!1),T&&k.observe(T))},[k]),[w,F]=er(y),N=Tt(r);return m.useEffect(()=>{!k||!w.current||(k.disconnect(),d.current=!1,k.observe(w.current))},[w,k]),m.useEffect(()=>(a({type:ee.RegisterDroppable,element:{id:n,key:o,disabled:t,node:w,rect:h,data:N}}),()=>a({type:ee.UnregisterDroppable,key:o,id:n})),[n]),m.useEffect(()=>{t!==f.current.disabled&&(a({type:ee.SetDroppableDisabled,id:n,key:o,disabled:t}),f.current.disabled=t)},[n,o,t,a]),{active:i,rect:h,isOver:c?.id===n,node:w,over:c,setNodeRef:F}}function sn(e,r,t){const n=e.slice();return n.splice(t<0?n.length+t:t,0,n.splice(r,1)[0]),n}function Ha(e,r){return e.reduce((t,n,s)=>{const o=r.get(n);return o&&(t[s]=o),t},Array(e.length))}function Qt(e){return e!==null&&e>=0}function Wa(e,r){if(e===r)return!0;if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Qa(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const As=e=>{let{rects:r,activeIndex:t,overIndex:n,index:s}=e;const o=sn(r,n,t),i=r[s],a=o[s];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Xt={scaleX:1,scaleY:1},Xa=e=>{var r;let{activeIndex:t,activeNodeRect:n,index:s,rects:o,overIndex:i}=e;const a=(r=o[t])!=null?r:n;if(!a)return null;if(s===t){const u=o[i];return u?{x:0,y:t<i?u.top+u.height-(a.top+a.height):u.top-a.top,...Xt}:null}const c=Ka(o,s,t);return s>t&&s<=i?{x:0,y:-a.height-c,...Xt}:s<t&&s>=i?{x:0,y:a.height+c,...Xt}:{x:0,y:0,...Xt}};function Ka(e,r,t){const n=e[r],s=e[r-1],o=e[r+1];return n?t<r?s?n.top-(s.top+s.height):o?o.top-(n.top+n.height):0:o?o.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}const Rs="Sortable",Fs=v.createContext({activeIndex:-1,containerId:Rs,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:As,disabled:{draggable:!1,droppable:!1}});function Ya(e){let{children:r,id:t,items:n,strategy:s=As,disabled:o=!1}=e;const{active:i,dragOverlay:a,droppableRects:c,over:u,measureDroppableContainers:f}=za(),d=$t(Rs,t),h=a.rect!==null,x=m.useMemo(()=>n.map(F=>typeof F=="object"&&"id"in F?F.id:F),[n]),R=i!=null,C=i?x.indexOf(i.id):-1,_=u?x.indexOf(u.id):-1,M=m.useRef(x),S=!Wa(x,M.current),k=_!==-1&&C===-1||S,y=Qa(o);Oe(()=>{S&&R&&f(x)},[S,x,R,f]),m.useEffect(()=>{M.current=x},[x]);const w=m.useMemo(()=>({activeIndex:C,containerId:d,disabled:y,disableTransforms:k,items:x,overIndex:_,useDragOverlay:h,sortedRects:Ha(x,c),strategy:s}),[C,d,y.draggable,y.droppable,k,x,_,c,h,s]);return v.createElement(Fs.Provider,{value:w},r)}const Ga=e=>{let{id:r,items:t,activeIndex:n,overIndex:s}=e;return sn(t,n,s).indexOf(r)},Ja=e=>{let{containerId:r,isSorting:t,wasDragging:n,index:s,items:o,newIndex:i,previousItems:a,previousContainerId:c,transition:u}=e;return!u||!n||a!==o&&s===i?!1:t?!0:i!==s&&r===c},Za={duration:200,easing:"ease"},Is="transform",el=jt.Transition.toString({property:Is,duration:0,easing:"linear"}),tl={roleDescription:"sortable"};function rl(e){let{disabled:r,index:t,node:n,rect:s}=e;const[o,i]=m.useState(null),a=m.useRef(t);return Oe(()=>{if(!r&&t!==a.current&&n.current){const c=s.current;if(c){const u=yt(n.current,{ignoreTransform:!0}),f={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(f.x||f.y)&&i(f)}}t!==a.current&&(a.current=t)},[r,t,n,s]),m.useEffect(()=>{o&&i(null)},[o]),o}function nl(e){let{animateLayoutChanges:r=Ja,attributes:t,disabled:n,data:s,getNewIndex:o=Ga,id:i,strategy:a,resizeObserverConfig:c,transition:u=Za}=e;const{items:f,containerId:d,activeIndex:h,disabled:x,disableTransforms:R,sortedRects:C,overIndex:_,useDragOverlay:M,strategy:S}=m.useContext(Fs),k=sl(n,x),y=f.indexOf(i),w=m.useMemo(()=>({sortable:{containerId:d,index:y,items:f},...s}),[d,s,y,f]),F=m.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:N,node:T,isOver:L,setNodeRef:W}=Ua({id:i,data:w,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...c}}),{active:P,activatorEvent:O,activeNodeRect:j,attributes:$,setNodeRef:Y,listeners:Z,isDragging:K,over:Ne,setActivatorNodeRef:ie,transform:ke}=Pa({id:i,data:w,attributes:{...tl,...t},disabled:k.draggable}),et=_i(W,Y),ae=!!P,_e=ae&&!R&&Qt(h)&&Qt(_),Le=!M&&K,$e=Le&&_e?ke:null,Ue=_e?$e??(a??S)({rects:C,activeNodeRect:j,activeIndex:h,overIndex:_,index:y}):null,Ae=Qt(h)&&Qt(_)?o({id:i,items:f,activeIndex:h,overIndex:_}):y,me=P?.id,U=m.useRef({activeId:me,items:f,newIndex:Ae,containerId:d}),tt=f!==U.current.items,pe=r({active:P,containerId:d,isDragging:K,isSorting:ae,id:i,index:y,items:f,newIndex:U.current.newIndex,previousItems:U.current.items,previousContainerId:U.current.containerId,transition:u,wasDragging:U.current.activeId!=null}),He=rl({disabled:!pe,index:y,node:T,rect:N});return m.useEffect(()=>{ae&&U.current.newIndex!==Ae&&(U.current.newIndex=Ae),d!==U.current.containerId&&(U.current.containerId=d),f!==U.current.items&&(U.current.items=f)},[ae,Ae,d,f]),m.useEffect(()=>{if(me===U.current.activeId)return;if(me!=null&&U.current.activeId==null){U.current.activeId=me;return}const Be=setTimeout(()=>{U.current.activeId=me},50);return()=>clearTimeout(Be)},[me]),{active:P,activeIndex:h,attributes:$,data:w,rect:N,index:y,newIndex:Ae,items:f,isOver:L,isSorting:ae,isDragging:K,listeners:Z,node:T,overIndex:_,over:Ne,setNodeRef:et,setActivatorNodeRef:ie,setDroppableNodeRef:W,setDraggableNodeRef:Y,transform:He??Ue,transition:Ce()};function Ce(){if(He||tt&&U.current.newIndex===y)return el;if(!(Le&&!Zr(O)||!u)&&(ae||pe))return jt.Transition.toString({...u,property:Is})}}function sl(e,r){var t,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(t=e?.draggable)!=null?t:r.draggable,droppable:(n=e?.droppable)!=null?n:r.droppable}}function nr(e){if(!e)return!1;const r=e.data.current;return!!(r&&"sortable"in r&&typeof r.sortable=="object"&&"containerId"in r.sortable&&"items"in r.sortable&&"index"in r.sortable)}const ol=[z.Down,z.Right,z.Up,z.Left],il=(e,r)=>{let{context:{active:t,collisionRect:n,droppableRects:s,droppableContainers:o,over:i,scrollableAncestors:a}}=r;if(ol.includes(e.code)){if(e.preventDefault(),!t||!n)return;const c=[];o.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=s.get(d.id);if(h)switch(e.code){case z.Down:n.top<h.top&&c.push(d);break;case z.Up:n.top>h.top&&c.push(d);break;case z.Left:n.left>h.left&&c.push(d);break;case z.Right:n.left<h.left&&c.push(d);break}});const u=Bi({collisionRect:n,droppableRects:s,droppableContainers:c});let f=gs(u,"id");if(f===i?.id&&u.length>1&&(f=u[1].id),f!=null){const d=o.get(t.id),h=o.get(f),x=h?s.get(h.id):null,R=h?.node.current;if(R&&x&&d&&h){const _=ur(R).some((F,N)=>a[N]!==F),M=Ns(d,h),S=al(d,h),k=_||!M?{x:0,y:0}:{x:S?n.width-x.width:0,y:S?n.height-x.height:0},y={x:x.left,y:x.top};return k.x&&k.y?y:Ot(y,k)}}}};function Ns(e,r){return!nr(e)||!nr(r)?!1:e.data.current.sortable.containerId===r.data.current.sortable.containerId}function al(e,r){return!nr(e)||!nr(r)||!Ns(e,r)?!1:e.data.current.sortable.index<r.data.current.sortable.index}const ll=({items:e,render:r,move:t,setItems:n})=>{const s=Oi(Rr(nn),Rr(_s),Rr(tn,{coordinateGetter:il})),o=({active:i,over:a})=>{if(i.id!==a.id){const c=e.findIndex(f=>f.id===i.id),u=e.findIndex(f=>f.id===a.id);if(t)return t(c,u);n&&n(f=>sn(f,c,u))}};return b.jsx(ja,{sensors:s,collisionDetection:Li,onDragEnd:o,children:b.jsx(Ya,{items:e,strategy:Xa,children:e.map((i,a)=>b.jsx(cl,{id:i.id,render:c=>r({item:i,index:a,listeners:c})},i.id))})})},cl=({id:e,render:r})=>{const{attributes:t,listeners:n,setNodeRef:s,transform:o,transition:i}=nl({id:e}),a={transform:jt.Transform.toString(o),transition:i};return b.jsx("div",{ref:s,style:a,...t,children:r(n)})},ul="_item_76289_3",dl="_itemCorrect_76289_10",fl="_itemLabel_76289_14",gl="_itemGrab_76289_20",hl="_itemHeader_76289_36",ml="_actions_76289_44",pl="_itemTitle_76289_49",vl="_itemText_76289_59",bl="_itemImage_76289_63",qe={item:ul,itemCorrect:dl,itemLabel:fl,itemGrab:gl,itemHeader:hl,actions:ml,itemTitle:pl,itemText:vl,itemImage:bl},yl=({index:e,questionIndex:r,editOption:t,removeOption:n,dragListeners:s,onTouchDrag:o,imageError:i,textError:a})=>{const{t:c}=Je(),u=Qr({name:`questions.${r}.options.${e}`}),f=u.image?kr+"uploads/temp/"+u.image:u.loadedImg?kr+u.loadedImg:null;return b.jsxs("div",{className:Mn(qe.item,u.isCorrect&&qe.itemCorrect),children:[b.jsxs("div",{className:qe.itemHeader,children:[b.jsxs("div",{className:qe.itemLabel,children:[b.jsx("button",{className:qe.itemGrab,...s,onTouchStart:()=>o(!0),onTouchEnd:()=>o(!1),type:"button",children:b.jsx(Ks,{})}),b.jsx("p",{className:qe.itemTitle,dangerouslySetInnerHTML:{__html:c("create_page.options.title",{value:u.isCorrect?`${e+1} <span>${c("create_page.options.right")}</span>`:e+1})}})]}),b.jsxs("div",{className:qe.actions,children:[b.jsx(it,{style:"icon",size:"sm",onClick:t,type:"button",children:b.jsx($s,{})}),b.jsx(it,{style:"icon",size:"sm",onClick:n,type:"button",children:b.jsx($r,{})})]})]}),f?b.jsxs(b.Fragment,{children:[b.jsx("img",{className:qe.itemImage,src:f,alt:""}),i&&b.jsx(Te,{children:i})]}):b.jsxs(b.Fragment,{children:[b.jsx("p",{className:qe.itemText,children:u.text}),a&&b.jsx(Te,{children:a})]})]})},xl=(e,r)=>{const t=Ls(_=>_.openPopup),n=Ts(_=>_.setSwipeRedirectCallback),{control:s,register:o,setValue:i,formState:{errors:a}}=Ze(),{fields:c,append:u,remove:f,move:d}=Xn({control:s,name:`questions.${e}.options`,rules:ot(r).options}),h=()=>{u({text:"",image:null,loadedImg:null,isCorrect:!c.length},{shouldFocus:!1}),R(c.length)},x=_=>{c.forEach((M,S)=>{i(`questions.${e}.options.${S}.isCorrect`,!1,{shouldDirty:!0})}),i(`questions.${e}.options.${_}.isCorrect`,!0,{shouldDirty:!0})},R=_=>{t("questionOptionPopup",{isCorrect:!0,setCorrect:()=>x(_),questionIndex:e,optionIndex:_,registerText:o(`questions.${e}.options.${_}.text`,ot(r).option),fieldType:"text"})};return{control:s,register:o,optionFields:c,setCorrectOption:x,handleTouchDrag:_=>{n(_?null:"default")},errors:a?.questions?.[e],addOption:h,removeOption:f,moveOptions:d,editOption:R}},wl=[{value:"text",label:"Ð¢ÐµÐºÑÑ‚"},{value:"image",label:"ÐšÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ°"}],_l=({questionIndex:e})=>{const{t:r}=Je(),{control:t,optionFields:n,errors:s,addOption:o,removeOption:i,moveOptions:a,editOption:c,handleTouchDrag:u}=xl(e,r),f=s?.options?.root?.message,d=Qr({name:`questions.${e}.field`}),h=n.filter(x=>d==="image"?x.image:x.text);return b.jsxs(b.Fragment,{children:[b.jsx(Gt,{name:`questions.${e}.field`,control:t,render:({field:x})=>b.jsx(qs,{value:x.value,onChange:x.onChange,options:wl})}),!!n.length&&b.jsxs(b.Fragment,{children:[b.jsx(On,{}),b.jsx(ll,{items:h,move:a,render:({item:x,index:R,listeners:C})=>{const _=s?.options?.[R];return b.jsx(yl,{index:R,questionIndex:e,dragListeners:C,onTouchDrag:u,textError:_?.text?.message,imageError:_?.image?.message,editOption:()=>c(R),removeOption:()=>i(R)},x.id)}})]}),b.jsx(gt,{children:b.jsx(it,{type:"button",style:"white",size:"sm",onClick:o,children:r("create_page.options.add")})}),f&&b.jsx(Te,{className:"text-center",children:f})]})},Cl="_question_1pza9_1",Sl={question:Cl},El=({index:e,removeQuestion:r})=>{const t=m.useRef(null),{t:n}=Je(),{control:s,register:o,watch:i,setError:a,clearErrors:c,formState:{errors:u}}=Ze(),f=i(`questions.${e}.loadedImg`),d=u?.questions?.[e],h=d?.text?.message,x=d?.image?.message;return m.useEffect(()=>{f||t.current&&t.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[f]),b.jsxs("div",{ref:t,className:Sl.question,children:[b.jsxs(Bs,{className:"flex items-center justify-between",children:[b.jsx("p",{className:"w-full",children:n("create_page.question.title",{value:e+1})}),b.jsx("div",{className:"w-fit",children:b.jsx(it,{size:"sm",onClick:r,after:b.jsx($r,{className:"w-4"}),children:n("create_page.question.delete")})})]}),b.jsxs(gt,{children:[b.jsx(It,{htmlFor:`question-text-${e}`,children:n("create_page.question.field_title")}),b.jsx(Ps,{id:`question-text-${e}`,placeholder:n("create_page.question.field_placeholder"),...o(`questions.${e}.text`,ot(n).question)}),h?b.jsx(Te,{children:h}):b.jsx(Nt,{children:n("validation.min_length",{value:7})})]}),b.jsxs(gt,{children:[b.jsx(It,{htmlFor:`question-image-${e}`,children:n("create_page.question.image")}),b.jsx(Gt,{name:`questions.${e}.image`,control:s,render:({field:R})=>b.jsx(as,{id:`question-image-${e}`,type:"question",loadedImg:f,clearError:()=>c(`questions.${e}.image`),setError:C=>a(`questions.${e}.image`,{message:C}),onChange:R.onChange})}),x?b.jsx(Te,{children:x}):b.jsx(Nt,{children:n("create_page.question.image_placeholder")})]}),b.jsx(_l,{questionIndex:e})]})},Dl=({translate:e})=>{const{control:r,formState:{errors:t,isSubmitting:n}}=Ze(),{fields:s,append:o,remove:i}=Xn({control:r,name:"questions",rules:ot(e).questions});return{addQuestion:()=>{o({text:"",image:null,loadedImg:null,field:"text",options:[],type:"SINGLE_CHOICE",order:s?.length||0},{shouldFocus:!1})},removeQuestion:i,fields:s,error:t.questions?.root?.message,isSubmitting:n}},Al=()=>{const{t:e}=Je(),{fields:r,addQuestion:t,removeQuestion:n,error:s,isSubmitting:o}=Dl({translate:e});return b.jsxs(Tn,{className:"mb-5",children:[b.jsx(zs,{title:e("create_page.questions.title"),description:e("create_page.questions.description")}),r.map((i,a)=>b.jsx(El,{index:a,removeQuestion:()=>n(a)},i.id)),b.jsx(it,{disabled:o,type:"button",onClick:t,after:b.jsx(Qs,{}),children:e("create_page.questions.add_question")}),s&&b.jsx(Te,{className:"text-center",children:s})]})},jl=({isEdit:e,data:r})=>{const t=m.useRef(null),n=Io(r,e),s=!!Object.keys(n.formState.errors).length;return b.jsx(so,{...n,children:b.jsxs("form",{ref:t,onSubmit:n.onSubmit,children:[b.jsx(wi,{}),b.jsx(Al,{}),b.jsx(Oo,{formRef:t,isDisabled:s,isEdit:e,isLoading:n.formState.isSubmitting,onSubmit:n.onSubmit})]})})};export{jl as C};
