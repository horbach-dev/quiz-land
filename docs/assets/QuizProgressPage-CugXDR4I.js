import{c as U,j as d,i as Y,M as _,r as p,l as Ce,q as Ie,I as Le,P as Se}from"./index-DG1__StV.js";const $e=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],Ae=U("chevrons-left",$e);const De=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],Re=U("chevrons-right",De);const qe=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Pe=U("flag",qe),Ye="_progressWrap_38du3_1",ze="_progressIcon_38du3_9",Qe="_progress_38du3_1",Te="_progressTrack_38du3_24",He="_hide_38du3_34",P={progressWrap:Ye,progressIcon:ze,progress:Qe,progressTrack:Te,hide:He},We=({isShow:i=!0,step:a,length:o})=>{const c=`${(a+1)/o*100}%`;return d.jsxs("div",{className:Y(P.progressWrap,!i&&P.hide),children:[d.jsx("div",{className:P.progress,children:d.jsx("div",{style:{width:c},className:P.progressTrack})}),d.jsx(Pe,{className:P.progressIcon})]})};function ge(i){let a=_.useRef(i);return _.useEffect(()=>{a.current=i}),_.useMemo(()=>(...o)=>{var c;return(c=a.current)==null?void 0:c.call(a,...o)},[])}function Fe({defaultProp:i,onChange:a}){let o=_.useState(i),[c]=o,u=_.useRef(c),x=ge(a);return _.useEffect(()=>{u.current!==c&&(x(c),u.current=c)},[c,u,x]),o}function Ve({prop:i,defaultProp:a,onChange:o=()=>{}}){let[c,u]=Fe({defaultProp:a,onChange:o}),x=i!==void 0,N=x?i:c,j=ge(o),C=_.useCallback(g=>{if(x){let M=typeof g=="function"?g(i):g;M!==i&&j(M)}else u(g)},[x,i,u,j]);return[N,C]}var he=.3,Oe=30,Xe=i=>Math.pow(i-1,3)+1,G=(i,a,o)=>Math.max(a,Math.min(i,o)),Ze=({className:i,children:a})=>_.createElement("div",{className:i,"data-rwp-wrapper":!0},a);function Be({defaultValue:i,value:a,onValueChange:o,options:c,infinite:u=!1,visibleCount:x=20,dragSensitivity:N=3,scrollSensitivity:j=5,optionItemHeight:C=30,classNames:g}){var M;let[$=(M=c[0])==null?void 0:M.value,W]=Ve({defaultProp:i,prop:a,onChange:o}),l=p.useMemo(()=>{if(!u)return c;let e=[],t=Math.ceil(x/2);if(c.length===0)return e;for(;e.length<t;)e.push(...c);return e},[x,c,u]),m=C,z=m*.5,v=360/x,I=m/Math.tan(v*Math.PI/180),A=Math.round(I*2+m*.25),k=x>>2,ee=N*10,me=10,w=p.useRef(null),Q=p.useRef(null),F=p.useRef(null),y=p.useRef(0),te=p.useRef(0),L=p.useRef(!1),ne=p.useRef(0),V=p.useRef({startY:0,yList:[],touchScroll:0,isClick:!0}),O=p.useRef(null),ve=p.useMemo(()=>{let e=(n,r,s)=>_.createElement("li",{key:r,className:g?.optionItem,"data-slot":"option-item","data-rwp-option":!0,"data-index":r,style:{top:-z,height:m,lineHeight:`${m}px`,transform:`rotateX(${s}deg) translateZ(${I}px)`,visibility:"hidden"}},n.label),t=l.map((n,r)=>e(n,r,-v*r));if(u)for(let n=0;n<k;++n){let r=-n-1,s=n+l.length;t.unshift(e(l[l.length-n-1],r,v*(n+1))),t.push(e(l[n],s,-v*s))}return t},[m,z,u,v,l,k,I,g?.optionItem]),_e=p.useMemo(()=>{let e=(n,r)=>_.createElement("li",{key:r,className:g?.highlightItem,"data-slot":"highlight-item","data-rwp-highlight-item":!0,style:{height:m}},n.label),t=l.map((n,r)=>e(n,r));if(u){let n=l[0],r=l[l.length-1];t.unshift(e(r,"infinite-start")),t.push(e(n,"infinite-end"))}return t},[g?.highlightItem,m,u,l]),xe=p.useMemo(()=>{let e=0,t=Math.PI/180,n=[];for(let r=k-1;r>=-k+1;--r){let s=r*v,f=m*Math.cos(s*t),h=e;e+=f,n.push([h,e])}return n},[v,m,k]),X=e=>(e%l.length+l.length)%l.length,D=e=>{let t=u?X(e):e;if(Q.current){let n=`translateZ(${-I}px) rotateX(${v*t}deg)`;Q.current.style.transform=n,Q.current.childNodes.forEach(r=>{let s=r,f=Math.abs(Number(s.dataset.index)-t);s.style.visibility=f>k?"hidden":"visible"})}return F.current&&(F.current.style.transform=`translateY(${-t*m}px)`),t},T=()=>{cancelAnimationFrame(te.current)},re=(e,t,n,r)=>{if(e===t||n===0){D(e);return}let s=performance.now(),f=t-e,h=b=>{let E=(b-s)/1e3;if(E<n){let B=Xe(E/n);y.current=D(e+B*f),te.current=requestAnimationFrame(h)}else T(),y.current=D(t),r?.()};requestAnimationFrame(h)},H=e=>{let t=X(e)|0,n=u?t:Math.min(Math.max(t,0),l.length-1);if(!u&&n!==e)return;y.current=D(n);let r=l[y.current];W(r.value)},we=e=>{let t=l.findIndex(n=>n.value===e);if(t===-1){console.error("Invalid value selected:",e);return}T(),H(t)},se=e=>{let t=y.current,n=t+e;u?n=Math.round(n):n=G(Math.round(n),0,l.length-1);let r=Math.abs(n-t);if(r===0)return;let s=Math.sqrt(r/j);T(),re(t,n,s,()=>{H(y.current)})},ye=e=>{let t=w.current;if(!t){console.error("Container reference is not set.");return}let{top:n}=t.getBoundingClientRect(),r=e-n,s=xe.findIndex(([h,b])=>r>=h&&r<=b);if(s===-1){console.error("No item found for click position:",r);return}let f=(k-s-1)*-1;se(f)},be=e=>{var t,n;try{let r=(e instanceof MouseEvent?e.clientY:(n=(t=e.touches)==null?void 0:t[0])==null?void 0:n.clientY)||0,s=V.current;s.isClick&&Math.abs(r-s.startY)>5&&(s.isClick=!1),s.yList.push([r,Date.now()]),s.yList.length>5&&s.yList.shift();let f=(s.startY-r)/m,h=y.current+f;if(u)h=X(h);else{let b=l.length;h<0?h*=he:h>b&&(h=b+(h-b)*he)}s.touchScroll=D(h)}catch(r){console.error("Error in updateScrollDuringDrag:",r)}},ae=e=>{var t;!L.current&&!((t=w.current)!=null&&t.contains(e.target))&&e.target!==w.current||(e.cancelable&&e.preventDefault(),l.length&&be(e))},ie=e=>{var t,n,r;try{L.current=!0;let s=new AbortController,{signal:f}=s;O.current=s;let h={signal:f,passive:!1};(t=w.current)==null||t.addEventListener("touchmove",ae,h),document.addEventListener("mousemove",ae,h);let b=(e instanceof MouseEvent?e.clientY:(r=(n=e.touches)==null?void 0:n[0])==null?void 0:r.clientY)||0,E=V.current;E.startY=b,E.yList=[[b,Date.now()]],E.touchScroll=y.current,E.isClick=!0,T()}catch(s){console.error("Error in initiateDragGesture:",s)}},R=p.useCallback(e=>{var t;let n=L.current,r=!!((t=w.current)!=null&&t.contains(e.target))||e.target===w.current;(n||r)&&e.cancelable&&(e.preventDefault(),l.length&&ie(e))},[ie]),Me=e=>{let t=y.current,n=t,r=e>0?-ee:ee,s=0;if(u){s=Math.abs(e/r);let f=e*s+.5*r*s*s;n=Math.round(t+f)}else if(t<0||t>l.length-1){let f=G(t,0,l.length-1),h=t-f;r=me,s=Math.sqrt(Math.abs(h/r)),e=r*s,e=t>0?-e:e,n=f}else{s=Math.abs(e/r);let f=e*s+.5*r*s*s;n=Math.round(t+f),n=G(n,0,l.length-1);let h=n-t;s=Math.sqrt(Math.abs(h/r))}re(t,n,s,()=>{H(y.current)}),H(y.current)},le=()=>{var e,t,n,r;try{(e=O.current)==null||e.abort(),O.current=null;let s=V.current;if(s.isClick){ye(s.startY);return}let f=s.yList,h=0;if(f.length>1){let b=f.length,[E,B]=(t=f[b-2])!=null?t:[0,0],[Ee,Ne]=(n=f[b-1])!=null?n:[0,0],ce=Ne-B;if(ce>0){let ue=(E-Ee)/m*1e3/ce,ke=Oe,je=ue>0?1:-1;h=Math.min(Math.abs(ue),ke)*je}}y.current=(r=s.touchScroll)!=null?r:y.current,Me(h)}catch(s){console.error("Error in finalizeDragAndStartInertiaScroll:",s)}finally{L.current=!1}},q=p.useCallback(e=>{var t;if(!l.length)return;let n=L.current,r=!!((t=w.current)!=null&&t.contains(e.target))||e.target===w.current;(n||r)&&e.cancelable&&(e.preventDefault(),le())},[le]),oe=e=>{e.preventDefault();let t=Date.now();if(t-ne.current<100)return;let n=Math.sign(e.deltaY);n&&(ne.current=t,se(n))},Z=p.useCallback(e=>{if(!l.length||!w.current)return;let t=L.current,n=w.current.contains(e.target)||e.target===w.current;(t||n)&&e.cancelable&&(e.preventDefault(),oe(e))},[oe]);return p.useEffect(()=>{let e=w.current;if(!e)return;let t={passive:!1};return e.addEventListener("touchstart",R,t),e.addEventListener("touchend",q,t),e.addEventListener("wheel",Z,t),document.addEventListener("mousedown",R,t),document.addEventListener("mouseup",q,t),()=>{e.removeEventListener("touchstart",R),e.removeEventListener("touchend",q),e.removeEventListener("wheel",Z),document.removeEventListener("mousedown",R),document.removeEventListener("mouseup",q)}},[q,R,Z]),p.useEffect(()=>{we($)},[$,a,l]),_.createElement("div",{ref:w,"data-rwp":!0,style:{height:A}},_.createElement("ul",{ref:Q,"data-rwp-options":!0},ve),_.createElement("div",{className:g?.highlightWrapper,"data-rwp-highlight-wrapper":!0,"data-slot":"highlight-wrapper",style:{height:m,lineHeight:`${m}px`}},_.createElement("ul",{ref:F,"data-rwp-highlight-list":!0,style:{top:u?-m:void 0}},_e)))}const Ge=window.innerWidth*12/100,Je=({options:i,value:a,onValueChange:o})=>d.jsx(Ze,{children:d.jsx(Be,{options:i,optionItemHeight:Ge,value:a,onValueChange:o})}),Ke="_container_2n9kh_1",Ue="_item_2n9kh_5",et="_itemActive_2n9kh_15",J={container:Ke,item:Ue,itemActive:et},tt=({options:i,value:a,onChange:o})=>d.jsx("div",{className:J.container,children:i.map(c=>d.jsx("div",{className:Y(J.item,a===c.value&&J.itemActive),onClick:()=>o(c.value),children:c.label},c.value))}),nt="_container_15bqk_1",rt="_title_15bqk_9",st="_hide_15bqk_15",K={container:nt,title:rt,hide:st},at=({isShow:i,question:a,value:o,setValue:c})=>d.jsxs("div",{className:Y(K.container,!i&&K.hide),children:[d.jsx("p",{className:K.title,children:a.question}),a.type==="option"&&d.jsx(Je,{onValueChange:c,options:a.options,value:o||a?.default?.value||a.options[0].value}),a.type==="select"&&d.jsx(tt,{value:o,options:a.options,onChange:c})]}),it="_container_cpawx_1",lt="_content_cpawx_29",ot="_btn_cpawx_35",ct="_btnDone_cpawx_64",ut="_arrow_cpawx_69",S={container:it,content:lt,btn:ot,btnDone:ct,arrow:ut},ht=({disabled:i,isDone:a,onClick:o})=>d.jsx("div",{className:Y(S.container),children:d.jsx("div",{className:S.content,children:d.jsxs("button",{disabled:i,className:Y(S.btn,a&&S.btnDone),onClick:o,children:[!a&&d.jsx(Ae,{className:S.arrow}),d.jsx("span",{children:a?"Поделиться":"Назад"}),a&&d.jsx(Re,{className:S.arrow})]})})}),dt="_container_1iwae_1",ft="_content_1iwae_13",de={container:dt,content:ft},fe=300,pt="1",pe={id:1,title:"Тест на уровень зависимости от лудомании",description:"Короткий тест показывает на сколько сильна зависимость от азартных игр.",image:Le,averageScore:85,results:[],questions:Ie},gt=i=>i.reduce((a,o)=>(a[o.id]=null,a),{});function vt(){const[i,a]=p.useState(!1),[o,c]=p.useState(0),[u,x]=p.useState(!1),{currentQuiz:N,setCurrentQuiz:j}=Ce(),[C,g]=p.useState([]);if(p.useEffect(()=>{N||(g(gt(pe.questions)),j(pe))},[N]),!N&&!C.length)return null;const{questions:M}=N,$=()=>{if(!i){if(o===M.length-1){x(!0);return}a(!0),setTimeout(()=>{a(!1),c(v=>v+1)},fe)}},W=()=>{i||o!==0&&(a(!0),setTimeout(()=>{a(!1),c(v=>v-1)},fe))},l=M[o],m=C[l.id],z=v=>{$();const I=l.options.find(A=>A.value===v);g(A=>({...A,[l.id]:{value:v,point:I?.point||0}}))};return d.jsx(Se,{withNavigation:!1,children:d.jsxs("div",{className:de.container,children:[d.jsxs("div",{className:de.content,children:[d.jsx(We,{step:o,isShow:!u,length:M.length}),d.jsx(at,{isShow:!i&&!u,value:m?.value||"",setValue:z,question:l})]}),d.jsx(ht,{id:pt,isDone:u,disabled:o===0,onClick:u?$:W})]})})}export{vt as default};
