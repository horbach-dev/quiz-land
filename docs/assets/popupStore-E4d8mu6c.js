import{c as h,j as o,B as a,q as m}from"./index-BFo7XKRf.js";const x=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],b=h("x",x),f="_popup_90nz9_1",j="_close_90nz9_7",P="_title_90nz9_25",y="_render_90nz9_33",i={popup:f,close:j,title:P,render:y},z=({close:s,withClose:e=!0,title:t,render:l})=>o.jsxs("div",{className:i.popup,children:[e&&o.jsx("button",{className:i.close,onClick:s,children:o.jsx(b,{color:"#111"})}),t&&o.jsx("p",{className:i.title,children:t}),o.jsx("div",{className:i.render,children:l})]}),k="_popup_hpwip_1",E={popup:k},C=({close:s,onConfirm:e})=>o.jsxs("div",{className:E.popup,children:[o.jsx("p",{children:"Вы действительно хотите прервать прогресс?"}),o.jsx(a,{onClick:s,children:"Продолжить"}),o.jsx(a,{style:"white",size:"lg",onClick:()=>{s(),e()},children:"Завершить"})]}),v="_popup_hpwip_1",w={popup:v},N=({close:s,text:e})=>o.jsxs("div",{className:w.popup,children:[o.jsx("p",{children:e}),o.jsx(a,{to:"/quizzes",style:"white",size:"lg",onClick:s,children:"В каталог"})]}),O={defaultPopup:z,quizError:N,sessionEndConfirmation:C},$=()=>{const s={subscribers:[],subscribe:e=>(s.subscribers.push(e),()=>{s.subscribers=s.subscribers.filter(t=>t!==e)}),notify:e=>s.subscribers.forEach(t=>t(e))};return s},q=$(),S=(s,e)=>{const t=(p,n)=>{const r=u=>_=>({popups:_.popups.map(c=>c.name===p?{...c,isOpen:!0,lastOpen:Date.now(),params:{...c.params,...u}}:c)});if(typeof n=="function"){const u=n(()=>e().closePopup(p));s(r(u))}else s(r(n));return()=>e().closePopup(p)},l=p=>{s(n=>({popups:n.popups.map(r=>r.name===p?{...r,isOpen:!1}:r)})),q.notify(p)},d=()=>{s(p=>({popups:p.popups.map(n=>({...n,isOpen:!1}))}))};return{popups:Object.keys(O).map(p=>({name:p,close:()=>e().closePopup(p),isOpen:!1,lastOpen:0,params:{overlayClose:!0}})),openPopup:t,closePopup:l,closeAll:d}},g=m(S);export{O as r,g as u};
