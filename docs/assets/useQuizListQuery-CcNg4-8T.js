import{r as o,j as e,i as l,p as g,k as x,a as j,u as p}from"./index-DG1__StV.js";const v="_container_1a7ev_1",f="_card_1a7ev_12",h="_imageWrap_1a7ev_21",I="_image_1a7ev_21",k="_imageLoaded_1a7ev_55",z="_title_1a7ev_63",Q="_skeletonTitle_1a7ev_69",t={container:v,card:f,imageWrap:h,image:I,imageLoaded:k,title:z,skeletonTitle:Q},_=new Set,y=({title:n,image:s})=>{const[r,a]=o.useState(_.has(s));return s?e.jsx("div",{className:l(t.image,r&&t.imageLoaded),children:e.jsx("img",{alt:n,src:s,loading:"lazy",onLoad:()=>{_.add(s),a(!0)},onError:()=>a(!1)})}):null},L=({link:n,title:s,image:r})=>e.jsxs("div",{className:l(t.container,t.card),onClick:()=>g(n),children:[e.jsx("div",{className:t.imageWrap,children:e.jsx(y,{title:s,image:r})}),e.jsx("p",{className:t.title,children:s})]}),d=()=>e.jsxs("div",{className:l(t.container,t.skeleton),children:[e.jsx("div",{className:t.imageWrap}),e.jsx("p",{className:l(t.title,t.skeletonTitle),children:"."})]});function N(n={threshold:.1}){const s=o.useRef(null),[r,a]=o.useState(!1);return o.useEffect(()=>{const c=s.current;if(!c)return;const u=new IntersectionObserver(i=>a(i[0]?.isIntersecting??!1),n);return u.observe(c),()=>u.disconnect()},[n]),{ref:s,isIntersecting:r}}const q=({children:n,onVisible:s})=>{const{ref:r,isIntersecting:a}=N();return o.useEffect(()=>{a&&s()},[a,s]),e.jsx("div",{ref:r,children:n})},S="_container_qp318_1",m={container:S,"container-row":"_container-row_qp318_6","container-column":"_container-column_qp318_10"},W=({view:n="column",data:s,handleLoadMore:r,isLoading:a,isLoadingMore:c})=>{const u=a&&!s?.length||c;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l(m.container,m[`container-${n}`]),children:[s?.map(i=>e.jsx(L,{image:x+i.poster,title:i.title,link:`quiz/${i.id}`},i.id)),u&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{})]})]}),r&&!a&&s?.length>0&&!c&&e.jsx(q,{onVisible:r})]})},w=async n=>(await j.get("/quiz",{params:n}))?.data;function T(n){return p({queryKey:["getQuizList",n],queryFn:()=>w(n)})}export{W as Q,T as u};
