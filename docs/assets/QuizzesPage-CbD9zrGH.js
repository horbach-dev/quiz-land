import{c as B,j as e,r as o,B as g,u as E}from"./index-CV0xlpDw.js";import{s as b,Q as M,a as K}from"./QuizList-DdHLSoOT.js";import{P as U}from"./page-layout-D3QXpZvU.js";import{T as G}from"./tab-bar-CGMJl2T5.js";import{b as J}from"./buildUrl-CWkKUN6U.js";import{r as H}from"./index-BiTDqGEP.js";import{B as V}from"./Background-CK7SrmXQ.js";import{u as z}from"./useTranslation-BDM_T5DD.js";import{T as W}from"./trash-2-CYGwH9Td.js";import{S as X}from"./SectionHeader-B6Pb62-q.js";import"./useBaseQuery-lh8C4Mnx.js";const Z=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ee=B("funnel",Z);const te=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],se=B("search-check",te),re=({avatar:r,username:s})=>e.jsxs("div",{className:b.author,children:[e.jsx("img",{src:r,className:b.authorAvatar,alt:s}),e.jsx("p",{className:b.authorNick,children:s})]});(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode("._overlay_ued7t_1{position:fixed;inset:0;background:#00000080;opacity:0;pointer-events:none;transition:opacity .3s ease;z-index:10}._overlayOpen_ued7t_11{opacity:1;pointer-events:all}._sheet_ued7t_16{position:fixed;left:0;right:0;bottom:0;max-height:calc(100vh - 32px);background:#fff;border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -2px 12px #00000026;display:flex;flex-direction:column;z-index:20;transform:translateY(100%);touch-action:none}._sheetOpen_ued7t_33{transform:translateY(0)}._header_ued7t_37{padding:16px;border-bottom:1px solid #eee;text-align:center;cursor:grab;-webkit-user-select:none;user-select:none}._handle_ued7t_45{width:50px;height:4px;background:#ccc;border-radius:4px;margin:0 auto}._content_ued7t_53{overflow-y:auto;flex:1}")),document.head.appendChild(r)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const ne="_overlay_ued7t_1",ae="_overlayOpen_ued7t_11",oe="_sheet_ued7t_16",ce="_sheetOpen_ued7t_33",ie="_header_ued7t_37",le="_handle_ued7t_45",ue="_content_ued7t_53",l={overlay:ne,overlayOpen:ae,sheet:oe,sheetOpen:ce,header:ie,handle:le,content:ue},de=120;function he({isOpen:r,onClose:s,header:n,children:t,threshold:i=de,overlayClassName:m="",headerClassName:S="",sheetClassName:w="",contentClassName:Q=""}){const f=o.useRef(null),x=o.useRef(null),_=o.useRef(null),v=o.useRef(null),y=o.useRef(0),d=o.useRef(0),[j,p]=o.useState(!1),[N,R]=o.useState(!1);o.useEffect(()=>(r?(h(0),document.body.style.overflow="hidden"):(h(100),document.body.style.overflow=""),()=>{document.body.style.overflow="",$()}),[r]);const $=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",q)},C=()=>{d.current>i?(h(100),s()):h(0),d.current=0},T=a=>{const u=a-y.current;u>0&&(d.current=u,h(u/(_.current?.offsetHeight||0)*100))},h=a=>{_.current&&f.current&&(f.current.style.opacity=`${1-a/100}`,_.current.style.transform=`translateY(${a}%)`)},F=({clientY:a})=>{p(!0),y.current=a,d.current=0,document.addEventListener("mousemove",k),document.addEventListener("mouseup",q)},L=({touches:a})=>{const u=a[0].clientY;R(()=>{if(!v.current||!x.current)return!1;if(v.current.scrollTop===0)return!0;const{top:I,height:D}=x.current.getBoundingClientRect();return I+D>u}),p(!0),y.current=u,d.current=0},k=({clientY:a})=>{T(a)},P=({touches:a})=>{!j||!N||T(a[0].clientY)},q=()=>{p(!1),$(),C()},Y=()=>{p(!1),N&&C()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:f,className:`${l.overlay} ${r?l.overlayOpen:""} ${m}`,style:{transition:j?"none":"opacity 0.3s ease"},onClick:s}),e.jsxs("div",{ref:_,className:`${l.sheet} ${r?l.sheetOpen:""} ${w}`,style:{transition:j?"none":"transform 0.3s ease"},onTouchStart:L,onTouchMove:P,onTouchEnd:Y,children:[e.jsx("div",{ref:x,onMouseDown:F,className:`${l.header} ${S}`,children:n||e.jsx("div",{className:l.handle})}),e.jsx("div",{ref:v,className:`${l.content} ${Q}`,children:t})]})]})}const me="_container_1e1c3_1",_e="_overlay_1e1c3_11",pe="_header_1e1c3_16",fe="_filterHeader_1e1c3_23",xe="_filterTitle_1e1c3_29",ve="_filterAction_1e1c3_35",ye="_content_1e1c3_38",je="_actions_1e1c3_49",c={container:me,overlay:_e,header:pe,filterHeader:fe,filterTitle:xe,filterAction:ve,content:ye,actions:je},be=document.getElementById("modals"),ge=({isOpen:r,onClose:s,title:n,headerActions:t,children:i,actions:m})=>H.createPortal(e.jsxs(he,{isOpen:r,onClose:s,overlayClassName:c.overlay,sheetClassName:c.container,headerClassName:c.header,header:(n||t)&&e.jsxs("div",{className:c.filterHeader,children:[n&&e.jsx("span",{className:c.filterTitle,children:n}),t&&e.jsx("div",{className:c.filterAction,children:t})]}),children:[e.jsx(V,{absolute:!0}),e.jsx("div",{className:c.content,children:i}),m&&e.jsx("div",{className:c.actions,children:m})]}),be),ze="_empty_yu1sq_1",Ne={empty:ze},$e=({isOpen:r,onClose:s})=>{const{t:n}=z(),t=()=>{s()},i=()=>{};return e.jsx(ge,{isOpen:r,onClose:s,title:n("filter.title"),headerActions:e.jsx(g,{size:"sm",style:"white",disabled:!0,onClick:i,after:e.jsx(W,{}),children:n("filter.clear")}),actions:e.jsx(g,{onClick:t,after:e.jsx(se,{}),children:n("filter.search")}),children:e.jsx("div",{className:Ne.empty,children:e.jsx("p",{children:"Приложение пока не нуждается в поиске"})})})},Ce=()=>{const{t:r}=z(),[s,n]=o.useState(!1),t=()=>{n(!0)},i=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(g,{size:"sm",after:e.jsx(ee,{}),onClick:t,children:r("quizzes_page.search")}),e.jsx($e,{isOpen:s,onClose:i})]})},Te="_header_1uu80_1",ke="_content_1uu80_10",A={header:Te,content:ke},qe=document.getElementById("header"),Ee=({actions:r,title:s})=>{const n=o.useRef(null);return o.useLayoutEffect(()=>{n?.current?.offsetHeight&&document.documentElement.style.setProperty("--quizzes-page-header-height",n.current.offsetHeight+"px")},[]),H.createPortal(e.jsx("div",{ref:n,className:A.header,children:e.jsx("div",{className:A.content,children:e.jsx(X,{title:s,actions:r})})}),qe)},Ae="_container_uiqvl_1",Oe="_tabBar_uiqvl_10",O={container:Ae,tabBar:Oe},Be=[{label:"quizzes_page.tab.public",value:"public"},{label:"quizzes_page.tab.my",value:"my"},{label:"quizzes_page.tab.shared",value:"shared"}];function Me(){const{t:r}=z(),s=E(t=>t.quizActiveTab),n=E(t=>t.setQuizActiveTab);return e.jsxs(U,{children:[e.jsx(Ee,{title:r("quizzes_page.title"),actions:e.jsx(Ce,{})}),e.jsxs("div",{className:O.container,children:[e.jsx("div",{className:O.tabBar,children:e.jsx(G,{value:s,options:Be,onChange:t=>n(t)})}),e.jsx(M,{listKey:s,params:{type:s},renderItem:({data:t})=>e.jsx(K,{image:J(t.poster),title:t.title,link:`quiz/${t.id}`,actions:t?.author&&e.jsx(re,{avatar:t.author.avatar,username:t.author.username})},t.id)})]})]})}export{Me as default};
