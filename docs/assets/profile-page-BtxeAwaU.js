import{r as o,j as e,B as l,a as g,e as z,f as E,P as L,d as w}from"./index-BBmiffm6.js";import{u as Q,Q as S,a as A}from"./useQuizListQuery-BEqd41lH.js";import{S as R}from"./SectionHeader-Cl92eo1d.js";import{S as x}from"./square-pen-Bz4MDFWl.js";import{T as k}from"./trash-2-fmRROkaG.js";function P({onClickOutside:t,ref:s,options:n={}}){o.useEffect(()=>{const r=c=>{const d=n.excludedElementsSelector,u=d&&d.some(a=>!!c.target.closest(a));!s.current||s.current.contains(c.target)||u||t(c)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[n.excludedElementsSelector,s,t])}const B="_popover_vdrbh_1",W="_popoverContent_vdrbh_5",b="_popoverActions_vdrbh_21",h={popover:B,popoverContent:W,popoverActions:b},q=({children:t,text:s,onConfirm:n,onCancel:r})=>{const[c,d]=o.useState(0),u=o.useRef(null),a=o.useRef(null),i=o.useRef(null),[m,p]=o.useState(!1),j=()=>{p(!1),n()},y=()=>{p(!1),r?.()},C=()=>{d(window.innerWidth),p(f=>!f)};return o.useLayoutEffect(()=>{if(a.current&&i.current&&m){const{left:f,width:v}=i.current.getBoundingClientRect(),{width:_}=a.current.getBoundingClientRect();if(i.current.style.bottom="calc(100% + 0.7rem)",c-f-v<20){i.current.style.right="0";return}i.current.style.left=`calc(-${v/2-_/2}px)`}},[m]),P({ref:u,onClickOutside:()=>p(!1)}),e.jsxs("div",{ref:u,className:h.popover,children:[m&&e.jsxs("div",{ref:i,className:h.popoverContent,children:[s,e.jsxs("div",{className:h.popoverActions,children:[e.jsx(l,{style:"default",size:"sm",onClick:j,children:"Да"}),e.jsx(l,{style:"white",size:"sm",onClick:y,children:"Нет"})]})]}),e.jsx("div",{onClick:C,ref:a,children:t})]})},N="_cardActions_13057_1",$={cardActions:N},O=async t=>(await g.delete(`/quiz/${t}`))?.data;function D(t){const s=z();return E({mutationFn:()=>O(t),onSuccess:()=>{s.invalidateQueries({queryKey:["getQuizList",{type:"my"}]})}})}const F=({item:t})=>{const{mutate:s,isPending:n}=D(t.id);return e.jsxs("div",{className:$.cardActions,children:[e.jsx(l,{size:"sm",style:"icon",children:e.jsx(x,{})}),e.jsx(q,{onConfirm:s,text:e.jsxs(e.Fragment,{children:["Удалить ",e.jsx("br",{})," ",t.title," ?"]}),children:e.jsx(l,{size:"sm",style:"icon",loading:n,children:e.jsx(k,{})})})]})},I="_container_lkrrv_1",T={container:I};function J(){const{isLoading:t,data:s}=Q({type:"my"});return e.jsx(L,{children:e.jsxs("div",{className:T.container,children:[e.jsx(R,{title:"Созданные квизы",actions:e.jsx(l,{size:"sm",to:"/create",after:e.jsx(x,{}),children:"Новый"})}),e.jsx(S,{isLoading:t,data:s,renderItem:n=>e.jsx(A,{image:w+n.poster,title:n.title,link:`quiz/${n.id}`,actions:e.jsx(F,{item:n})},n.id)})]})})}export{J as default};
