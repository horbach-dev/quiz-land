import{j as e,g as l,r as o,n as p,a as g,u as x}from"./index-BBmiffm6.js";const j="_container_3nkrp_1",y="_card_3nkrp_16",k="_row_3nkrp_25",h="_imageWrap_3nkrp_30",v="_skeletonTitle_3nkrp_36",f="_image_3nkrp_30",z="_move_3nkrp_1",I="_imageLoaded_3nkrp_81",N="_title_3nkrp_89",Q="_linkOverlay_3nkrp_101",q="_action_3nkrp_109",t={container:j,card:y,row:k,imageWrap:h,skeletonTitle:v,image:f,move:z,imageLoaded:I,title:N,linkOverlay:Q,action:q},_=({view:n})=>e.jsxs("div",{className:l(t.container,t.skeleton,t[n]),children:[e.jsx("div",{className:t.imageWrap}),e.jsx("div",{className:t.content,children:e.jsx("p",{className:l(t.title,t.skeletonTitle),children:"."})})]});function T(n={threshold:.1}){const s=o.useRef(null),[a,r]=o.useState(!1);return o.useEffect(()=>{const c=s.current;if(!c)return;const m=new IntersectionObserver(d=>r(d[0]?.isIntersecting??!1),n);return m.observe(c),()=>m.disconnect()},[n]),{ref:s,isIntersecting:a}}const L=({children:n,onVisible:s})=>{const{ref:a,isIntersecting:r}=T();return o.useEffect(()=>{r&&s()},[r,s]),e.jsx("div",{ref:a,children:n})},O="_container_1n9qz_1",S="_empty_1n9qz_14",W="_emptyImage_1n9qz_24",w="_emptyTitle_1n9qz_36",i={container:O,"container-row":"_container-row_1n9qz_6","container-column":"_container-column_1n9qz_10",empty:S,emptyImage:W,emptyTitle:w},F=({view:n="column",data:s,handleLoadMore:a,isLoading:r,isLoadingMore:c,renderItem:m})=>{const d=r&&!s?.length||c;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l(i.container,i[`container-${n}`]),children:[s?.map(m),d&&e.jsxs(e.Fragment,{children:[e.jsx(_,{view:n}),e.jsx(_,{view:n}),e.jsx(_,{view:n}),e.jsx(_,{view:n})]})]}),!s?.length&&!r&&e.jsxs("div",{className:i.empty,children:[e.jsx("div",{className:i.emptyImage}),e.jsx("p",{className:i.emptyTitle,children:"Ничего не найдено"})]}),a&&!r&&!c&&!!s?.length&&e.jsx(L,{onVisible:a})]})},u=new Set,E=({title:n,image:s})=>{const[a,r]=o.useState(!u.has(s));return e.jsx("div",{className:l(t.image,!a&&t.imageLoaded),children:e.jsx("img",{alt:n,src:s,loading:"lazy",onLoad:()=>{u.add(s),r(!1)},onError:()=>r(!1)})})},$=({link:n,title:s,view:a="column",image:r,actions:c})=>e.jsxs("div",{className:l(t.container,t.card,t[a]),children:[e.jsxs("div",{className:t.content,children:[e.jsx("div",{className:t.imageWrap,children:e.jsx(E,{title:s,image:r})}),e.jsx("p",{className:t.title,children:s}),e.jsx("div",{className:t.linkOverlay,onClick:()=>p(n)})]}),c]}),b=async n=>(await g.get("/quiz",{params:n}))?.data;function R(n){return x({queryKey:["getQuizList",n],queryFn:()=>b(n),select:s=>s.length?s:[]})}export{F as Q,$ as a,R as u};
