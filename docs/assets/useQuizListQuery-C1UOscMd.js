import{r as o,j as e,d as l,n as j,i as x,a as p,u as f,m as d}from"./index-Dxm2hwCp.js";import"./create-quiz-form-DIL6ZW9t.js";const h="_container_14buj_1",v="_card_14buj_14",I="_imageWrap_14buj_23",b="_image_14buj_23",k="_imageLoaded_14buj_58",z="_title_14buj_66",Q="_skeletonTitle_14buj_72",n={container:h,card:v,imageWrap:I,image:b,imageLoaded:k,title:z,skeletonTitle:Q},_=new Set,y=({title:t,image:s})=>{const[r,a]=o.useState(_.has(s));return s?e.jsx("div",{className:l(n.image,r&&n.imageLoaded),children:e.jsx("img",{alt:t,src:s,loading:"lazy",onLoad:()=>{_.add(s),a(!0)},onError:()=>a(!1)})}):null},L=({link:t,title:s,image:r})=>e.jsxs("div",{className:l(n.container,n.card),onClick:()=>j(t),children:[e.jsx("div",{className:n.imageWrap,children:e.jsx(y,{title:s,image:r})}),e.jsx("p",{className:n.title,children:s})]}),m=()=>e.jsxs("div",{className:l(n.container,n.skeleton),children:[e.jsx("div",{className:n.imageWrap}),e.jsx("p",{className:l(n.title,n.skeletonTitle),children:"."})]});function N(t={threshold:.1}){const s=o.useRef(null),[r,a]=o.useState(!1);return o.useEffect(()=>{const c=s.current;if(!c)return;const u=new IntersectionObserver(i=>a(i[0]?.isIntersecting??!1),t);return u.observe(c),()=>u.disconnect()},[t]),{ref:s,isIntersecting:r}}const q=({children:t,onVisible:s})=>{const{ref:r,isIntersecting:a}=N();return o.useEffect(()=>{a&&s()},[a,s]),e.jsx("div",{ref:r,children:t})},S="_container_qp318_1",g={container:S,"container-row":"_container-row_qp318_6","container-column":"_container-column_qp318_10"},T=({view:t="column",data:s,handleLoadMore:r,isLoading:a,isLoadingMore:c})=>{const u=a&&!s?.length||c;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l(g.container,g[`container-${t}`]),children:[s?.map(i=>e.jsx(L,{image:x+i.poster,title:i.title,link:`quiz/${i.id}`},i.id)),u&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{})]})]}),r&&!a&&s?.length>0&&!c&&e.jsx(q,{onVisible:r})]})},w=async t=>(await p.get("/quiz",{params:t}))?.data;function C(t){return f({queryKey:["getQuizList",t],queryFn:()=>w(t),placeholderData:()=>[{...d,id:"1"},{...d,id:"2"},{...d,id:"3"},{...d,id:"4"}]})}export{T as Q,C as u};
