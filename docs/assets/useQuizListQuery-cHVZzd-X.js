import{r as o,j as e,d as l,n as g,i as j,a as x,u as p}from"./index-CxWIOCeG.js";import"./create-quiz-form-CGiPw1gx.js";const f="_container_14buj_1",h="_card_14buj_14",v="_imageWrap_14buj_23",I="_image_14buj_23",b="_imageLoaded_14buj_58",z="_title_14buj_66",Q="_skeletonTitle_14buj_72",t={container:f,card:h,imageWrap:v,image:I,imageLoaded:b,title:z,skeletonTitle:Q},_=new Set,k=({title:n,image:s})=>{const[r,a]=o.useState(_.has(s));return s?e.jsx("div",{className:l(t.image,r&&t.imageLoaded),children:e.jsx("img",{alt:n,src:s,loading:"lazy",onLoad:()=>{_.add(s),a(!0)},onError:()=>a(!1)})}):null},y=({link:n,title:s,image:r})=>e.jsxs("div",{className:l(t.container,t.card),onClick:()=>g(n),children:[e.jsx("div",{className:t.imageWrap,children:e.jsx(k,{title:s,image:r})}),e.jsx("p",{className:t.title,children:s})]}),d=()=>e.jsxs("div",{className:l(t.container,t.skeleton),children:[e.jsx("div",{className:t.imageWrap}),e.jsx("p",{className:l(t.title,t.skeletonTitle),children:"."})]});function L(n={threshold:.1}){const s=o.useRef(null),[r,a]=o.useState(!1);return o.useEffect(()=>{const c=s.current;if(!c)return;const u=new IntersectionObserver(i=>a(i[0]?.isIntersecting??!1),n);return u.observe(c),()=>u.disconnect()},[n]),{ref:s,isIntersecting:r}}const N=({children:n,onVisible:s})=>{const{ref:r,isIntersecting:a}=L();return o.useEffect(()=>{a&&s()},[a,s]),e.jsx("div",{ref:r,children:n})},q="_container_qp318_1",m={container:q,"container-row":"_container-row_qp318_6","container-column":"_container-column_qp318_10"},W=({view:n="column",data:s,handleLoadMore:r,isLoading:a,isLoadingMore:c})=>{const u=a&&!s?.length||c;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l(m.container,m[`container-${n}`]),children:[s?.map(i=>e.jsx(y,{image:j+i.poster,title:i.title,link:`quiz/${i.id}`},i.id)),u&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{})]})]}),r&&!a&&s?.length>0&&!c&&e.jsx(N,{onVisible:r})]})},S=async n=>(await x.get("/quiz",{params:n}))?.data;function T(n){return p({queryKey:["getQuizList",n],queryFn:()=>S(n)})}export{W as Q,T as u};
